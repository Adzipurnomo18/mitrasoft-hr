var ao=Object.defineProperty;var io=(l,e,t)=>e in l?ao(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var Wt=(l,e,t)=>io(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function W(){}function ro(l,e){for(const t in e)l[t]=e[t];return l}function xn(l){return l()}function il(){return Object.create(null)}function ce(l){l.forEach(xn)}function eo(l){return typeof l=="function"}function Re(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let Pt;function rl(l,e){return l===e?!0:(Pt||(Pt=document.createElement("a")),Pt.href=e,l===Pt.href)}function co(l){return Object.keys(l).length===0}function uo(l,e,t,n){if(l){const s=to(l,e,t,n);return l[0](s)}}function to(l,e,t,n){return l[1]&&n?ro(t.ctx.slice(),l[1](n(e))):t.ctx}function fo(l,e,t,n){return l[2],e.dirty}function po(l,e,t,n,s,i){if(s){const c=to(e,t,n,i);l.p(c,s)}}function _o(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function o(l,e){l.appendChild(e)}function O(l,e,t){l.insertBefore(e,t||null)}function R(l){l.parentNode&&l.parentNode.removeChild(l)}function me(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function a(l){return document.createElement(l)}function ct(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function P(l){return document.createTextNode(l)}function k(){return P(" ")}function ot(){return P("")}function U(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function Ct(l){return function(e){return e.preventDefault(),l.call(this,e)}}function mt(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function r(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function lo(l){return l===""?null:+l}function mo(l){return Array.from(l.childNodes)}function Y(l,e){e=""+e,l.data!==e&&(l.data=e)}function G(l,e){l.value=e??""}function se(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Ze(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function Lt(l){const e=l.querySelector(":checked");return e&&e.__value}function ut(l,e,t){l.classList.toggle(e,!!t)}function ho(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}let Mt;function At(l){Mt=l}function tl(){if(!Mt)throw new Error("Function called outside component initialization");return Mt}function tt(l){tl().$$.on_mount.push(l)}function bo(l){tl().$$.on_destroy.push(l)}function Nt(){const l=tl();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=ho(e,t,{cancelable:n});return s.slice().forEach(c=>{c.call(l,i)}),!i.defaultPrevented}return!0}}function et(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const yt=[],Ht=[];let wt=[];const $t=[],vo=Promise.resolve();let xt=!1;function go(){xt||(xt=!0,vo.then(no))}function ft(l){wt.push(l)}function cl(l){$t.push(l)}const Zt=new Set;let vt=0;function no(){if(vt!==0)return;const l=Mt;do{try{for(;vt<yt.length;){const e=yt[vt];vt++,At(e),ko(e.$$)}}catch(e){throw yt.length=0,vt=0,e}for(At(null),yt.length=0,vt=0;Ht.length;)Ht.pop()();for(let e=0;e<wt.length;e+=1){const t=wt[e];Zt.has(t)||(Zt.add(t),t())}wt.length=0}while(yt.length);for(;$t.length;)$t.pop()();xt=!1,Zt.clear(),At(l)}function ko(l){if(l.fragment!==null){l.update(),ce(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(ft)}}function yo(l){const e=[],t=[];wt.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),wt=e}const Ut=new Set;let _t;function oo(){_t={r:0,c:[],p:_t}}function so(){_t.r||ce(_t.c),_t=_t.p}function be(l,e){l&&l.i&&(Ut.delete(l),l.i(e))}function ve(l,e,t,n){if(l&&l.o){if(Ut.has(l))return;Ut.add(l),_t.c.push(()=>{Ut.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}function $(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ul(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function Ae(l){l&&l.c()}function Ee(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),ft(()=>{const i=l.$$.on_mount.map(xn).filter(eo);l.$$.on_destroy?l.$$.on_destroy.push(...i):ce(i),l.$$.on_mount=[]}),s.forEach(ft)}function Se(l,e){const t=l.$$;t.fragment!==null&&(yo(t.after_update),ce(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function wo(l,e){l.$$.dirty[0]===-1&&(yt.push(l),go(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Je(l,e,t,n,s,i,c=null,d=[-1]){const u=Mt;At(l);const p=l.$$={fragment:null,ctx:[],props:i,update:W,not_equal:s,bound:il(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:il(),dirty:d,skip_bound:!1,root:e.target||u.$$.root};c&&c(p.root);let f=!1;if(p.ctx=t?t(l,e.props||{},(m,_,...h)=>{const E=h.length?h[0]:_;return p.ctx&&s(p.ctx[m],p.ctx[m]=E)&&(!p.skip_bound&&p.bound[m]&&p.bound[m](E),f&&wo(l,m)),_}):[],p.update(),f=!0,ce(p.before_update),p.fragment=n?n(p.ctx):!1,e.target){if(e.hydrate){const m=mo(e.target);p.fragment&&p.fragment.l(m),m.forEach(R)}else p.fragment&&p.fragment.c();e.intro&&be(l.$$.fragment),Ee(l,e.target,e.anchor),no()}At(u)}class Xe{constructor(){Wt(this,"$$");Wt(this,"$$set")}$destroy(){Se(this,1),this.$destroy=W}$on(e,t){if(!eo(t))return W;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!co(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Co="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Co);const te=`http://${window.location.hostname}:8080`,gt=[];function Tt(l,e=W){let t;const n=new Set;function s(d){if(Re(l,d)&&(l=d,t)){const u=!gt.length;for(const p of n)p[1](),gt.push(p,l);if(u){for(let p=0;p<gt.length;p+=2)gt[p][0](gt[p+1]);gt.length=0}}}function i(d){s(d(l))}function c(d,u=W){const p=[d,u];return n.add(p),n.size===1&&(t=e(s,i)||W),d(l),()=>{n.delete(p),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:c}}const nt=Tt(null),It=Tt([]),Yt=Tt([]),Dt=Tt("dashboard"),Eo=localStorage.getItem("theme")||"dark",el=Tt(Eo);el.subscribe(l=>{localStorage.setItem("theme",l),typeof document<"u"&&document.documentElement.setAttribute("data-theme",l)});function fl(l){let e,t;return{c(){e=a("div"),t=P(l[2]),r(e,"class","login-alert")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&4&&Y(t,n[2])},d(n){n&&R(e)}}}function So(l){let e;return{c(){e=P("Login")},m(t,n){O(t,e,n)},d(t){t&&R(e)}}}function Ao(l){let e;return{c(){e=P("Sedang masuk...")},m(t,n){O(t,e,n)},d(t){t&&R(e)}}}function Do(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y,j,A,F,M,b=l[2]&&fl(l);function q(V,X){return V[3]?Ao:So}let v=q(l),B=v(l);return{c(){e=a("div"),t=a("div"),n=a("div"),n.innerHTML='<div class="brand-dot"></div> <span class="brand-name">HR Portal</span> <span class="brand-tag">Employee Experience</span>',s=k(),i=a("div"),c=a("h1"),c.textContent="Employee Portal Login",d=k(),u=a("p"),u.textContent="Masuk untuk mengelola kehadiran, cuti, dan aktivitas karyawan.",p=k(),b&&b.c(),f=k(),m=a("form"),_=a("label"),h=a("span"),h.textContent="Email",E=k(),C=a("input"),N=k(),D=a("label"),I=a("span"),I.textContent="Password",T=k(),g=a("input"),L=k(),w=a("button"),B.c(),S=k(),y=a("p"),y.textContent="PT Mitrasoft ‚Ä¢ Secure access & audit ready",j=k(),A=a("div"),A.innerHTML='<div class="orb orb-1"></div> <div class="orb orb-2"></div> <div class="login-stats-card"><p class="stats-kicker">Realtime Overview</p> <p class="stats-title">Kehadiran &amp; Aktivitas Karyawan</p> <div class="stats-row"><div><p class="stats-label">On Time</p> <p class="stats-value">92%</p></div> <div><p class="stats-label">Overtime</p> <p class="stats-value">18</p></div> <div><p class="stats-label">Leave Today</p> <p class="stats-value">6</p></div></div></div>',r(n,"class","login-brand"),r(c,"class","login-title"),r(u,"class","login-subtitle"),r(h,"class","field-label"),r(C,"type","email"),C.required=!0,r(C,"placeholder","you@example.com"),r(_,"class","field"),r(I,"class","field-label"),r(g,"type","password"),g.required=!0,r(g,"placeholder","‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"),r(D,"class","field"),r(w,"class","btn-primary"),w.disabled=l[3],r(m,"class","login-form"),r(y,"class","login-footnote"),r(i,"class","login-card"),r(t,"class","login-panel"),r(A,"class","login-illustration"),r(e,"class","login-screen")},m(V,X){O(V,e,X),o(e,t),o(t,n),o(t,s),o(t,i),o(i,c),o(i,d),o(i,u),o(i,p),b&&b.m(i,null),o(i,f),o(i,m),o(m,_),o(_,h),o(_,E),o(_,C),G(C,l[0]),o(m,N),o(m,D),o(D,I),o(D,T),o(D,g),G(g,l[1]),o(m,L),o(m,w),B.m(w,null),o(i,S),o(i,y),o(e,j),o(e,A),F||(M=[U(C,"input",l[5]),U(g,"input",l[6]),U(m,"submit",Ct(l[4]))],F=!0)},p(V,[X]){V[2]?b?b.p(V,X):(b=fl(V),b.c(),b.m(i,f)):b&&(b.d(1),b=null),X&1&&C.value!==V[0]&&G(C,V[0]),X&2&&g.value!==V[1]&&G(g,V[1]),v!==(v=q(V))&&(B.d(1),B=v(V),B&&(B.c(),B.m(w,null))),X&8&&(w.disabled=V[3])},i:W,o:W,d(V){V&&R(e),b&&b.d(),B.d(),F=!1,ce(M)}}}function Mo(l,e,t){const n=Nt();let s="",i="",c="",d=!1;async function u(){t(2,c=""),t(3,d=!0);try{const m=await fetch(`${te}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:s,password:i})});if(!m.ok){let h="Login failed";try{const E=await m.json();E&&E.message&&(h=E.message)}catch{}throw new Error(h)}const _=await m.json();n("loggedIn",_)}catch(m){t(2,c=m.message||"Login failed")}finally{t(3,d=!1)}}function p(){s=this.value,t(0,s)}function f(){i=this.value,t(1,i)}return[s,i,c,d,u,p,f]}class Io extends Xe{constructor(e){super(),Je(this,e,Mo,Do,Re,{})}}function dl(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E;return{c(){e=a("div"),t=a("div"),n=a("div"),n.textContent="üö™",s=k(),i=a("h3"),i.textContent="Logout Confirmation",c=k(),d=a("p"),d.textContent="Are you sure you want to end your secure session?",u=k(),p=a("div"),f=a("button"),f.textContent="Cancel",m=k(),_=a("button"),_.textContent="Yes, Logout",r(n,"class","logout-icon-wrapper svelte-1pv8e1s"),r(i,"class","svelte-1pv8e1s"),r(d,"class","svelte-1pv8e1s"),r(f,"class","btn-cancel svelte-1pv8e1s"),r(_,"class","btn-confirm-logout svelte-1pv8e1s"),r(p,"class","logout-actions svelte-1pv8e1s"),r(t,"class","logout-modal svelte-1pv8e1s"),r(e,"class","logout-modal-backdrop svelte-1pv8e1s")},m(C,N){O(C,e,N),o(e,t),o(t,n),o(t,s),o(t,i),o(t,c),o(t,d),o(t,u),o(t,p),o(p,f),o(p,m),o(p,_),h||(E=[U(f,"click",l[5]),U(_,"click",l[6])],h=!0)},p:W,d(C){C&&R(e),h=!1,ce(E)}}}function Lo(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C=l[0]==="dark"?"‚òÄÔ∏è":"üåô",N,D,I,T,g,L,w,S,y;const j=l[10].default,A=uo(j,l,l[9],null);let F=l[1]&&dl(l);return{c(){e=a("header"),t=a("div"),A&&A.c(),n=k(),s=a("div"),i=a("div"),c=a("button"),d=P("üü¢"),u=k(),p=a("button"),f=P("üî¥"),m=k(),_=a("div"),_.innerHTML='<span class="pill-dot svelte-1pv8e1s"></span> <span>Secure Session</span>',h=k(),E=a("button"),N=P(C),I=k(),T=a("button"),T.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line></svg>',g=k(),F&&F.c(),L=ot(),r(t,"class","header-content svelte-1pv8e1s"),r(c,"class","btn-icon svelte-1pv8e1s"),r(c,"title","Check-in"),c.disabled=l[2],r(p,"class","btn-icon svelte-1pv8e1s"),r(p,"title","Check-out"),p.disabled=l[2],r(i,"class","attendance-actions svelte-1pv8e1s"),r(_,"class","header-pill svelte-1pv8e1s"),r(E,"class","btn-icon svelte-1pv8e1s"),r(E,"title",D=l[0]==="dark"?"Switch to Light Mode":"Switch to Dark Mode"),r(T,"class","btn-icon btn-logout-icon svelte-1pv8e1s"),r(T,"title","Logout"),r(s,"class","header-actions svelte-1pv8e1s"),r(e,"class","main-header svelte-1pv8e1s")},m(M,b){O(M,e,b),o(e,t),A&&A.m(t,null),o(e,n),o(e,s),o(s,i),o(i,c),o(c,d),o(i,u),o(i,p),o(p,f),o(s,m),o(s,_),o(s,h),o(s,E),o(E,N),o(s,I),o(s,T),O(M,g,b),F&&F.m(M,b),O(M,L,b),w=!0,S||(y=[U(c,"click",l[7]),U(p,"click",l[8]),U(E,"click",l[3]),U(T,"click",l[4])],S=!0)},p(M,[b]){A&&A.p&&(!w||b&512)&&po(A,j,M,M[9],w?fo(j,M[9],b,null):_o(M[9]),null),(!w||b&4)&&(c.disabled=M[2]),(!w||b&4)&&(p.disabled=M[2]),(!w||b&1)&&C!==(C=M[0]==="dark"?"‚òÄÔ∏è":"üåô")&&Y(N,C),(!w||b&1&&D!==(D=M[0]==="dark"?"Switch to Light Mode":"Switch to Dark Mode"))&&r(E,"title",D),M[1]?F?F.p(M,b):(F=dl(M),F.c(),F.m(L.parentNode,L)):F&&(F.d(1),F=null)},i(M){w||(be(A,M),w=!0)},o(M){ve(A,M),w=!1},d(M){M&&(R(e),R(g),R(L)),A&&A.d(M),F&&F.d(M),S=!1,ce(y)}}}function No(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Nt();let c="dark";el.subscribe(C=>t(0,c=C));function d(){el.set(c==="dark"?"light":"dark")}let u=!1;function p(){t(1,u=!0)}function f(){t(1,u=!1)}async function m(){t(1,u=!1);try{await fetch(`${te}/api/auth/logout`,{method:"POST",credentials:"include"})}catch(C){console.error("Logout failed",C)}finally{nt.set(null),It.set([]),Yt.set([]),Dt.set("DASHBOARD"),i("logout")}}let _=!1;async function h(){if(!_){t(2,_=!0);try{const C=await fetch(`${te}/api/attendance/checkin`,{method:"POST",credentials:"include"});if(!C.ok){const N=await C.text();throw new Error(N||"Check-in failed")}}catch(C){console.error(C),alert((C==null?void 0:C.message)||"Check-in failed")}finally{t(2,_=!1)}}}async function E(){if(!_){t(2,_=!0);try{const C=await fetch(`${te}/api/attendance/checkout`,{method:"POST",credentials:"include"});if(!C.ok){const N=await C.text();throw new Error(N||"Check-out failed")}}catch(C){console.error(C),alert((C==null?void 0:C.message)||"Check-out failed")}finally{t(2,_=!1)}}}return l.$$set=C=>{"$$scope"in C&&t(9,s=C.$$scope)},[c,u,_,d,p,f,m,h,E,s,n]}class st extends Xe{constructor(e){super(),Je(this,e,No,Lo,Re,{})}}function pl(l,e,t){const n=l.slice();n[10]=e[t],n[14]=t;const s=30+n[14]*90;n[11]=s;const i=Math.min(120,(Number(n[10])||0)*8);return n[12]=i,n}function _l(l,e,t){const n=l.slice();return n[15]=e[t],n}function ml(l,e,t){const n=l.slice();n[10]=e[t],n[14]=t;const s=30+n[14]*90;n[11]=s;const i=Math.min(120,(Number(n[10])||0)*8);return n[12]=i,n}function To(l){let e,t,n,s;return{c(){e=a("div"),t=a("h1"),t.textContent="Dashboard",n=k(),s=a("p"),s.textContent=`Have a good day, ${l[4]()}!`},m(i,c){O(i,e,c),o(e,t),o(e,n),o(e,s)},p:W,d(i){i&&R(e)}}}function hl(l){let e,t,n,s,i=l[14]===0?"On-time":l[14]===1?"Late":"Absent",c,d,u=l[10]+"",p,f;return{c(){e=ct("rect"),s=ct("text"),c=P(i),d=ct("text"),p=P(u),r(e,"x",l[11]),r(e,"y",t=130-l[12]),r(e,"width","40"),r(e,"height",n=l[12]),r(e,"rx","6"),r(e,"fill",l[14]===0?"#22c55e":l[14]===1?"#f59e0b":"#ef4444"),r(s,"x",l[11]+20),r(s,"y","135"),r(s,"text-anchor","middle"),r(s,"font-size","12"),r(s,"fill","#9ca3af"),r(d,"x",l[11]+20),r(d,"y",f=130-l[12]-6),r(d,"text-anchor","middle"),r(d,"font-size","12"),r(d,"fill","#cbd5e1")},m(m,_){O(m,e,_),O(m,s,_),o(s,c),O(m,d,_),o(d,p)},p(m,_){_&4&&t!==(t=130-m[12])&&r(e,"y",t),_&4&&n!==(n=m[12])&&r(e,"height",n),_&4&&u!==(u=m[10]+"")&&Y(p,u),_&4&&f!==(f=130-m[12]-6)&&r(d,"y",f)},d(m){m&&(R(e),R(s),R(d))}}}function bl(l){let e,t=$([l[2].on_time,l[2].late,l[2].absent]),n=[];for(let s=0;s<3;s+=1)n[s]=hl(ml(l,t,s));return{c(){e=ct("svg");for(let s=0;s<3;s+=1)n[s].c();r(e,"viewBox","0 0 300 140"),r(e,"width","100%"),r(e,"height","140")},m(s,i){O(s,e,i);for(let c=0;c<3;c+=1)n[c]&&n[c].m(e,null)},p(s,i){if(i&4){t=$([s[2].on_time,s[2].late,s[2].absent]);let c;for(c=0;c<3;c+=1){const d=ml(s,t,c);n[c]?n[c].p(d,i):(n[c]=hl(d),n[c].c(),n[c].m(e,null))}for(;c<3;c+=1)n[c].d(1)}},d(s){s&&R(e),me(n,s)}}}function jo(l){let e,t=$(l[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=vl(_l(l,t,s));return{c(){e=a("ul");for(let s=0;s<n.length;s+=1)n[s].c();r(e,"class","announcement-list svelte-cub97x")},m(s,i){O(s,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(s,i){if(i&1){t=$(s[0]);let c;for(c=0;c<t.length;c+=1){const d=_l(s,t,c);n[c]?n[c].p(d,i):(n[c]=vl(d),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(s){s&&R(e),me(n,s)}}}function Ro(l){let e;return{c(){e=a("div"),e.textContent="No active announcements",r(e,"class","widget-empty svelte-cub97x")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Oo(l){let e;return{c(){e=a("div"),e.textContent="Loading...",r(e,"class","widget-loading svelte-cub97x")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function vl(l){let e,t,n=l[15].title+"",s,i,c,d=l[15].content+"",u,p,f,m=new Date(l[15].created_at).toLocaleDateString()+"",_,h;return{c(){e=a("li"),t=a("h3"),s=P(n),i=k(),c=a("p"),u=P(d),p=k(),f=a("span"),_=P(m),h=k(),r(t,"class","ann-title svelte-cub97x"),r(c,"class","ann-content svelte-cub97x"),r(f,"class","ann-date svelte-cub97x"),r(e,"class","ann-item svelte-cub97x")},m(E,C){O(E,e,C),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),o(e,f),o(f,_),o(e,h)},p(E,C){C&1&&n!==(n=E[15].title+"")&&Y(s,n),C&1&&d!==(d=E[15].content+"")&&Y(u,d),C&1&&m!==(m=new Date(E[15].created_at).toLocaleDateString()+"")&&Y(_,m)},d(E){E&&R(e)}}}function gl(l){let e,t,n,s,i=l[14]===0?"Pending":l[14]===1?"Approved":"Rejected",c,d,u=l[10]+"",p,f;return{c(){e=ct("rect"),s=ct("text"),c=P(i),d=ct("text"),p=P(u),r(e,"x",l[11]),r(e,"y",t=130-l[12]),r(e,"width","40"),r(e,"height",n=l[12]),r(e,"rx","6"),r(e,"fill",l[14]===0?"#60a5fa":l[14]===1?"#22c55e":"#ef4444"),r(s,"x",l[11]+20),r(s,"y","135"),r(s,"text-anchor","middle"),r(s,"font-size","12"),r(s,"fill","#9ca3af"),r(d,"x",l[11]+20),r(d,"y",f=130-l[12]-6),r(d,"text-anchor","middle"),r(d,"font-size","12"),r(d,"fill","#cbd5e1")},m(m,_){O(m,e,_),O(m,s,_),o(s,c),O(m,d,_),o(d,p)},p(m,_){_&8&&t!==(t=130-m[12])&&r(e,"y",t),_&8&&n!==(n=m[12])&&r(e,"height",n),_&8&&u!==(u=m[10]+"")&&Y(p,u),_&8&&f!==(f=130-m[12]-6)&&r(d,"y",f)},d(m){m&&(R(e),R(s),R(d))}}}function kl(l){let e,t=$([l[3].pending,l[3].approved,l[3].rejected]),n=[];for(let s=0;s<3;s+=1)n[s]=gl(pl(l,t,s));return{c(){e=ct("svg");for(let s=0;s<3;s+=1)n[s].c();r(e,"viewBox","0 0 300 140"),r(e,"width","100%"),r(e,"height","140")},m(s,i){O(s,e,i);for(let c=0;c<3;c+=1)n[c]&&n[c].m(e,null)},p(s,i){if(i&8){t=$([s[3].pending,s[3].approved,s[3].rejected]);let c;for(c=0;c<3;c+=1){const d=pl(s,t,c);n[c]?n[c].p(d,i):(n[c]=gl(d),n[c].c(),n[c].m(e,null))}for(;c<3;c+=1)n[c].d(1)}},d(s){s&&R(e),me(n,s)}}}function Po(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y,j,A=l[2],F,M,b,q,v,B,V,X,J,z,H,K,x=l[3],ye;t=new st({props:{$$slots:{default:[To]},$$scope:{ctx:l}}});let ne=bl(l);function de(le,ue){return le[1]?Oo:le[0].length===0?Ro:jo}let ae=de(l),oe=ae(l),he=kl(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),i=a("div"),c=a("div"),d=a("section"),u=a("article"),p=a("h2"),p.textContent="Your Profile",f=k(),m=a("dl"),_=a("div"),h=a("dt"),h.textContent="Email",E=k(),C=a("dd"),C.textContent=`${l[5]()}`,N=k(),D=a("div"),I=a("dt"),I.textContent="Roles",T=k(),g=a("dd"),g.textContent=`${l[6]()}`,L=k(),w=a("article"),S=a("h2"),S.textContent="Attendance",y=k(),j=a("div"),ne.c(),F=k(),M=a("article"),M.innerHTML='<h2>Leave Balance</h2> <p class="muted">Quota tahunan: 12 hari. Sisa cuti akan dihitung dari request APPROVED.</p>',b=k(),q=a("aside"),v=a("article"),B=a("div"),B.innerHTML='<h2 class="svelte-cub97x">üì¢ Announcements</h2>',V=k(),oe.c(),X=k(),J=a("article"),z=a("h2"),z.textContent="My Requests",H=k(),K=a("div"),he.c(),r(m,"class","data-list"),r(u,"class","card"),r(j,"class","chart"),r(w,"class","card"),r(M,"class","card"),r(d,"class","cards-grid"),r(c,"class","main-column"),r(B,"class","widget-header svelte-cub97x"),r(v,"class","card announcement-widget svelte-cub97x"),r(K,"class","chart"),r(J,"class","card"),r(q,"class","sidebar-column"),r(i,"class","dashboard-grid svelte-cub97x"),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(le,ue){O(le,e,ue),Ee(t,e,null),o(e,n),o(e,s),o(s,i),o(i,c),o(c,d),o(d,u),o(u,p),o(u,f),o(u,m),o(m,_),o(_,h),o(_,E),o(_,C),o(_,N),o(m,D),o(D,I),o(D,T),o(D,g),o(d,L),o(d,w),o(w,S),o(w,y),o(w,j),ne.m(j,null),o(d,F),o(d,M),o(i,b),o(i,q),o(q,v),o(v,B),o(v,V),oe.m(v,null),o(q,X),o(q,J),o(J,z),o(J,H),o(J,K),he.m(K,null),ye=!0},p(le,[ue]){const Ie={};ue&524288&&(Ie.$$scope={dirty:ue,ctx:le}),t.$set(Ie),ue&4&&Re(A,A=le[2])?(ne.d(1),ne=bl(le),ne.c(),ne.m(j,null)):ne.p(le,ue),ae===(ae=de(le))&&oe?oe.p(le,ue):(oe.d(1),oe=ae(le),oe&&(oe.c(),oe.m(v,null))),ue&8&&Re(x,x=le[3])?(he.d(1),he=kl(le),he.c(),he.m(K,null)):he.p(le,ue)},i(le){ye||(be(t.$$.fragment,le),ye=!0)},o(le){ve(t.$$.fragment,le),ye=!1},d(le){le&&R(e),Se(t),ne.d(le),oe.d(),he.d(le)}}}function qo(l,e,t){let n=null;nt.subscribe(h=>n=h);let s=[],i=!0;tt(c);async function c(){t(1,i=!0);try{const h=await fetch(`${te}/api/announcements`,{credentials:"include"}),E=h.ok?await h.json():[],C=JSON.parse(localStorage.getItem("announcements_local")||"[]"),N=new Map;[...E,...C].forEach(D=>{const I=D.id||D.local_id,T=N.get(I);(!T||D.updated_at&&(!T.updated_at||D.updated_at>T.updated_at))&&N.set(I,D)}),t(0,s=Array.from(N.values()).sort((D,I)=>new Date(I.created_at)-new Date(D.created_at)))}catch(h){console.error("Failed to load announcements",h)}finally{t(1,i=!1)}}let d={on_time:0,late:0,absent:0},u={pending:0,approved:0,rejected:0};async function p(){try{const h=new Date,E=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-01`,C=`${h.getFullYear()}-${String(h.getMonth()+2).padStart(2,"0")}-01`,N=await fetch(`${te}/api/attendance/summary?from=${encodeURIComponent(E)}&to=${encodeURIComponent(C)}`,{credentials:"include"});if(N.ok){const T=await N.json();t(2,d={on_time:T.on_time||0,late:T.late||0,absent:T.absent||0})}const D=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}`,I=await fetch(`${te}/api/requests/summary?month=${encodeURIComponent(D)}`,{credentials:"include"});if(I.ok){const T=await I.json();t(3,u={pending:T.pending||0,approved:T.approved||0,rejected:T.rejected||0})}}catch{}}return tt(()=>{c(),p()}),[s,i,d,u,()=>(n==null?void 0:n.name)||"Employee",()=>(n==null?void 0:n.email)||"",()=>Array.isArray(n==null?void 0:n.roles)&&n.roles.length?n.roles.join(", "):"-"]}class Fo extends Xe{constructor(e){super(),Je(this,e,qo,Po,Re,{})}}function yl(l,e,t){const n=l.slice();return n[23]=e[t],n}function wl(l){let e,t,n,s,i=l[1]==="edit"?"Edit Employee":"Add Employee",c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y,j,A,F,M,b,q,v,B,V,X,J,z,H,K,x,ye,ne,de,ae,oe,he,le,ue,Ie,ge,De,Oe,ie,pe,Pe,$e,Fe,Le,ze,qe,Ge,Ve=$(l[5]),we=[];for(let Z=0;Z<Ve.length;Z+=1)we[Z]=Cl(yl(l,Ve,Z));function Ue(Z,fe){return Z[2]?Ho:Uo}let Be=Ue(l),Te=Be(l);return{c(){e=a("div"),t=a("div"),n=a("header"),s=a("h2"),c=P(i),d=k(),u=a("div"),p=a("div"),f=a("label"),m=P(`Department
                        `),_=a("select"),h=a("option"),h.textContent="-- Pilih Department --";for(let Z=0;Z<we.length;Z+=1)we[Z].c();N=k(),D=a("div"),I=a("label"),T=P(`Employee Code
                        `),g=a("input"),S=k(),y=a("label"),j=P(`Name
                        `),A=a("input"),F=k(),M=a("div"),b=a("label"),q=P(`Email
                        `),v=a("input"),B=k(),V=a("label"),X=P(`Password
                        `),J=a("input"),z=k(),H=a("div"),K=a("label"),x=P(`Job Title
                        `),ye=a("input"),ne=k(),de=a("label"),ae=P(`Branch
                        `),oe=a("input"),he=k(),le=a("div"),ue=a("label"),Ie=P(`Status
                        `),ge=a("select"),De=a("option"),De.textContent="ACTIVE",Oe=a("option"),Oe.textContent="INACTIVE",ie=k(),pe=a("footer"),Pe=a("button"),$e=P("Cancel"),Fe=k(),Le=a("button"),Te.c(),r(n,"class","modal-header"),h.__value="",G(h,h.__value),_.disabled=C=l[1]==="edit",r(p,"class","form-row"),g.readOnly=L=l[1]==="create",r(g,"placeholder",w=l[4]?"Generating...":l[1]==="create"?"Pilih department dulu":""),ut(g,"readonly-input",l[1]==="create"),r(D,"class","form-row"),r(v,"type","email"),r(v,"placeholder",""),r(v,"autocomplete","off"),r(J,"type","password"),r(J,"placeholder",""),r(J,"autocomplete","off"),r(M,"class","form-row"),r(H,"class","form-row"),De.__value="ACTIVE",G(De,De.__value),Oe.__value="INACTIVE",G(Oe,Oe.__value),l[3].status===void 0&&ft(()=>l[20].call(ge)),r(le,"class","form-row"),r(u,"class","modal-body"),r(Pe,"type","button"),r(Pe,"class","btn-secondary"),Pe.disabled=l[2],r(Le,"type","button"),r(Le,"class","btn-primary"),Le.disabled=ze=l[2]||l[1]==="create"&&!l[3].employee_code,r(pe,"class","modal-footer"),r(t,"class","modal"),r(e,"class","modal-backdrop")},m(Z,fe){O(Z,e,fe),o(e,t),o(t,n),o(n,s),o(s,c),o(t,d),o(t,u),o(u,p),o(p,f),o(f,m),o(f,_),o(_,h);for(let ke=0;ke<we.length;ke+=1)we[ke]&&we[ke].m(_,null);Ze(_,l[3].department),o(u,N),o(u,D),o(D,I),o(I,T),o(I,g),G(g,l[3].employee_code),o(D,S),o(D,y),o(y,j),o(y,A),G(A,l[3].name),o(u,F),o(u,M),o(M,b),o(b,q),o(b,v),G(v,l[3].email),o(M,B),o(M,V),o(V,X),o(V,J),G(J,l[3].password),o(u,z),o(u,H),o(H,K),o(K,x),o(K,ye),G(ye,l[3].job_title),o(H,ne),o(H,de),o(de,ae),o(de,oe),G(oe,l[3].branch),o(u,he),o(u,le),o(le,ue),o(ue,Ie),o(ue,ge),o(ge,De),o(ge,Oe),Ze(ge,l[3].status,!0),o(t,ie),o(t,pe),o(pe,Pe),o(Pe,$e),o(pe,Fe),o(pe,Le),Te.m(Le,null),qe||(Ge=[U(_,"change",l[6]),U(g,"input",l[14]),U(A,"input",l[15]),U(v,"input",l[16]),U(J,"input",l[17]),U(ye,"input",l[18]),U(oe,"input",l[19]),U(ge,"change",l[20]),U(Pe,"click",l[7]),U(Le,"click",Ct(l[8])),U(t,"click",mt(l[13])),U(e,"click",l[7])],qe=!0)},p(Z,fe){if(fe&2&&i!==(i=Z[1]==="edit"?"Edit Employee":"Add Employee")&&Y(c,i),fe&32){Ve=$(Z[5]);let ke;for(ke=0;ke<Ve.length;ke+=1){const Ke=yl(Z,Ve,ke);we[ke]?we[ke].p(Ke,fe):(we[ke]=Cl(Ke),we[ke].c(),we[ke].m(_,null))}for(;ke<we.length;ke+=1)we[ke].d(1);we.length=Ve.length}fe&40&&E!==(E=Z[3].department)&&Ze(_,Z[3].department),fe&2&&C!==(C=Z[1]==="edit")&&(_.disabled=C),fe&2&&L!==(L=Z[1]==="create")&&(g.readOnly=L),fe&18&&w!==(w=Z[4]?"Generating...":Z[1]==="create"?"Pilih department dulu":"")&&r(g,"placeholder",w),fe&40&&g.value!==Z[3].employee_code&&G(g,Z[3].employee_code),fe&2&&ut(g,"readonly-input",Z[1]==="create"),fe&40&&A.value!==Z[3].name&&G(A,Z[3].name),fe&40&&v.value!==Z[3].email&&G(v,Z[3].email),fe&40&&J.value!==Z[3].password&&G(J,Z[3].password),fe&40&&ye.value!==Z[3].job_title&&G(ye,Z[3].job_title),fe&40&&oe.value!==Z[3].branch&&G(oe,Z[3].branch),fe&40&&Ze(ge,Z[3].status),fe&4&&(Pe.disabled=Z[2]),Be===(Be=Ue(Z))&&Te?Te.p(Z,fe):(Te.d(1),Te=Be(Z),Te&&(Te.c(),Te.m(Le,null))),fe&46&&ze!==(ze=Z[2]||Z[1]==="create"&&!Z[3].employee_code)&&(Le.disabled=ze)},d(Z){Z&&R(e),me(we,Z),Te.d(),qe=!1,ce(Ge)}}}function Cl(l){let e,t=l[23].code+"",n,s,i=l[23].name+"",c;return{c(){e=a("option"),n=P(t),s=P(" - "),c=P(i),e.__value=l[23].code,G(e,e.__value)},m(d,u){O(d,e,u),o(e,n),o(e,s),o(e,c)},p:W,d(d){d&&R(e)}}}function Uo(l){let e=l[1]==="edit"?"Update":"Save",t;return{c(){t=P(e)},m(n,s){O(n,t,s)},p(n,s){s&2&&e!==(e=n[1]==="edit"?"Update":"Save")&&Y(t,e)},d(n){n&&R(t)}}}function Ho(l){let e=l[1]==="edit"?"Updating‚Ä¶":"Saving‚Ä¶",t;return{c(){t=P(e)},m(n,s){O(n,t,s)},p(n,s){s&2&&e!==(e=n[1]==="edit"?"Updating‚Ä¶":"Saving‚Ä¶")&&Y(t,e)},d(n){n&&R(t)}}}function Yo(l){let e,t=l[0]&&wl(l);return{c(){t&&t.c(),e=ot()},m(n,s){t&&t.m(n,s),O(n,e,s)},p(n,[s]){n[0]?t?t.p(n,s):(t=wl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:W,o:W,d(n){n&&R(e),t&&t.d(n)}}}function Vo(l,e,t){const n=Nt();let{open:s=!1}=e,{mode:i="create"}=e,{employee:c=null}=e,{saving:d=!1}=e;const u=[{code:"ADM",name:"Administrasi"},{code:"IT",name:"Information Technology"},{code:"ACC",name:"Accounting"},{code:"TAX",name:"Pajak"},{code:"FIN",name:"Finance"},{code:"HR",name:"Human Resources"},{code:"MKT",name:"Marketing"},{code:"OPS",name:"Operations"}],p={employee_code:"",name:"",email:"",branch:"",job_title:"",status:"ACTIVE",department:"",password:""};let f={...p},m=!1,_=!1,h=null,E=null;async function C(A){const F=A.target.value;if(t(3,f.department=F,f),i==="create"&&F){t(4,m=!0);try{const M=await fetch(`${te}/api/employees/next-code?department=${encodeURIComponent(F)}`,{credentials:"include"});if(M.ok){const b=await M.json();t(3,f.employee_code=b.employee_code||"",f)}else console.error("Failed to fetch next code")}catch(M){console.error("Error fetching next code:",M)}finally{t(4,m=!1)}}}function N(){n("close")}function D(){n("submit",{mode:i,id:(c==null?void 0:c.id)??null,form:f})}function I(A){et.call(this,l,A)}function T(){f.employee_code=this.value,t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}function g(){f.name=this.value,t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}function L(){f.email=this.value,t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}function w(){f.password=this.value,t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}function S(){f.job_title=this.value,t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}function y(){f.branch=this.value,t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}function j(){f.status=Lt(this),t(3,f),t(9,c),t(0,s),t(10,_),t(1,i),t(11,h),t(12,E),t(5,u)}return l.$$set=A=>{"open"in A&&t(0,s=A.open),"mode"in A&&t(1,i=A.mode),"employee"in A&&t(9,c=A.employee),"saving"in A&&t(2,d=A.saving)},l.$$.update=()=>{if(l.$$.dirty&7683){const A=(c==null?void 0:c.id)??null;s&&(!_||i!==h||A!==E)&&(t(10,_=!0),t(11,h=i),t(12,E=A),i==="edit"&&c?t(3,f={employee_code:c.employee_code??"",name:c.name??"",email:c.email??"",branch:c.branch??"",job_title:c.job_title??"",status:c.status??"ACTIVE",department:c.department??"",password:""}):t(3,f={...p})),!s&&_&&(t(10,_=!1),t(11,h=null),t(12,E=null),t(3,f={...p}))}},[s,i,d,f,m,u,C,N,D,c,_,h,E,I,T,g,L,w,S,y,j]}class Bo extends Xe{constructor(e){super(),Je(this,e,Vo,Yo,Re,{open:0,mode:1,employee:9,saving:2})}}function El(l,e,t){const n=l.slice();return n[20]=e[t],n}function Jo(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>Employees</h1> <p>Manage employee profiles, roles, dan status keaktifan.</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Xo(l){let e,t,n,s,i,c=$(l[7]),d=[];for(let u=0;u<c.length;u+=1)d[u]=Sl(El(l,c,u));return{c(){e=a("div"),t=a("table"),n=a("thead"),n.innerHTML='<tr><th>Code</th> <th>Name</th> <th>Email</th> <th>Department</th> <th>Job Title</th> <th>Branch</th> <th>Status</th> <th style="width: 1%"></th></tr>',s=k(),i=a("tbody");for(let u=0;u<d.length;u+=1)d[u].c();r(t,"class","employees-table"),r(e,"class","employees-table-wrapper")},m(u,p){O(u,e,p),o(e,t),o(t,n),o(t,s),o(t,i);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(i,null)},p(u,p){if(p&1664){c=$(u[7]);let f;for(f=0;f<c.length;f+=1){const m=El(u,c,f);d[f]?d[f].p(m,p):(d[f]=Sl(m),d[f].c(),d[f].m(i,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=c.length}},d(u){u&&R(e),me(d,u)}}}function Go(l){let e;return{c(){e=a("div"),e.textContent="Tidak ada data karyawan yang cocok dengan pencarian.",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Qo(l){let e,t;return{c(){e=a("div"),t=P(l[2]),r(e,"class","state error")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&4&&Y(t,n[2])},d(n){n&&R(e)}}}function zo(l){let e;return{c(){e=a("div"),e.textContent="Loading employees‚Ä¶",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Ko(l){let e;return{c(){e=P("-")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Wo(l){let e,t=l[20].department+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","dept-badge svelte-1wq7lbd")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&128&&t!==(t=s[20].department+"")&&Y(n,t)},d(s){s&&R(e)}}}function Sl(l){let e,t,n=l[20].employee_code+"",s,i,c,d=l[20].name+"",u,p,f,m=l[20].email+"",_,h,E,C,N,D=l[20].job_title+"",I,T,g,L=l[20].branch+"",w,S,y,j,A=l[20].status==="ACTIVE"?"Active":"Inactive",F,M,b,q,v,B,V,X,J,z;function H(de,ae){return de[20].department?Wo:Ko}let K=H(l),x=K(l);function ye(){return l[16](l[20])}function ne(){return l[17](l[20])}return{c(){e=a("tr"),t=a("td"),s=P(n),i=k(),c=a("td"),u=P(d),p=k(),f=a("td"),_=P(m),h=k(),E=a("td"),x.c(),C=k(),N=a("td"),I=P(D),T=k(),g=a("td"),w=P(L),S=k(),y=a("td"),j=a("span"),F=P(A),b=k(),q=a("td"),v=a("button"),v.textContent="Edit",B=k(),V=a("button"),V.textContent="Delete",X=k(),r(t,"class","mono"),r(f,"class","email-cell"),r(j,"class",M="pill-status "+(l[20].status==="ACTIVE"?"pill-status-active":"pill-status-inactive")),r(v,"type","button"),r(v,"class","table-action-btn btn-edit"),r(V,"type","button"),r(V,"class","table-action-btn btn-delete"),r(q,"class","actions")},m(de,ae){O(de,e,ae),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),o(e,f),o(f,_),o(e,h),o(e,E),x.m(E,null),o(e,C),o(e,N),o(N,I),o(e,T),o(e,g),o(g,w),o(e,S),o(e,y),o(y,j),o(j,F),o(e,b),o(e,q),o(q,v),o(q,B),o(q,V),o(e,X),J||(z=[U(v,"click",ye),U(V,"click",ne)],J=!0)},p(de,ae){l=de,ae&128&&n!==(n=l[20].employee_code+"")&&Y(s,n),ae&128&&d!==(d=l[20].name+"")&&Y(u,d),ae&128&&m!==(m=l[20].email+"")&&Y(_,m),K===(K=H(l))&&x?x.p(l,ae):(x.d(1),x=K(l),x&&(x.c(),x.m(E,null))),ae&128&&D!==(D=l[20].job_title+"")&&Y(I,D),ae&128&&L!==(L=l[20].branch+"")&&Y(w,L),ae&128&&A!==(A=l[20].status==="ACTIVE"?"Active":"Inactive")&&Y(F,A),ae&128&&M!==(M="pill-status "+(l[20].status==="ACTIVE"?"pill-status-active":"pill-status-inactive"))&&r(j,"class",M)},d(de){de&&R(e),x.d(),J=!1,ce(z)}}}function Zo(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T;t=new st({props:{$$slots:{default:[Jo]},$$scope:{ctx:l}}});function g(S,y){return S[1]?zo:S[2]?Qo:S[7].length===0?Go:Xo}let L=g(l),w=L(l);return N=new Bo({props:{open:l[3],mode:l[4],employee:l[5],saving:l[6]}}),N.$on("close",l[11]),N.$on("submit",l[12]),{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),i=a("section"),c=a("div"),d=a("div"),d.innerHTML='<h2>Employees list</h2> <p class="muted small">Data karyawan aktif &amp; non-aktif.</p>',u=k(),p=a("div"),f=a("input"),m=k(),_=a("button"),_.textContent="+ Add Employee",h=k(),E=a("article"),w.c(),C=k(),Ae(N.$$.fragment),r(d,"class","employees-toolbar-text"),r(f,"type","text"),r(f,"class","input-search"),r(f,"placeholder","Search name, email, or code‚Ä¶"),se(f,"margin-bottom","12px"),r(_,"type","button"),r(_,"class","btn-primary"),r(p,"class","employees-toolbar-actions"),r(c,"class","employees-toolbar"),r(E,"class","card employees-card"),r(i,"class","employees-section"),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(S,y){O(S,e,y),Ee(t,e,null),o(e,n),o(e,s),o(s,i),o(i,c),o(c,d),o(c,u),o(c,p),o(p,f),G(f,l[0]),o(p,m),o(p,_),o(i,h),o(i,E),w.m(E,null),o(s,C),Ee(N,s,null),D=!0,I||(T=[U(f,"input",l[15]),U(_,"click",l[8])],I=!0)},p(S,[y]){const j={};y&8388608&&(j.$$scope={dirty:y,ctx:S}),t.$set(j),y&1&&f.value!==S[0]&&G(f,S[0]),L===(L=g(S))&&w?w.p(S,y):(w.d(1),w=L(S),w&&(w.c(),w.m(E,null)));const A={};y&8&&(A.open=S[3]),y&16&&(A.mode=S[4]),y&32&&(A.employee=S[5]),y&64&&(A.saving=S[6]),N.$set(A)},i(S){D||(be(t.$$.fragment,S),be(N.$$.fragment,S),D=!0)},o(S){ve(t.$$.fragment,S),ve(N.$$.fragment,S),D=!1},d(S){S&&R(e),Se(t),w.d(),Se(N),I=!1,ce(T)}}}function $o(l,e,t){let n,{page:s="employees"}=e;nt.subscribe(w=>w);let i=[],c=!0,d="",u="",p=!1,f="create",m=null,_=!1;async function h(){t(1,c=!0),t(2,d="");try{const w=await fetch(`${te}/api/employees`,{credentials:"include"});if(!w.ok){const y=await w.json().catch(()=>({}));throw new Error(y.message||"Failed to fetch employees")}const S=await w.json();t(14,i=Array.isArray(S)?S:[])}catch(w){console.error(w),t(2,d=(w==null?void 0:w.message)||"Failed to fetch employees"),t(14,i=[])}finally{t(1,c=!1)}}tt(h);function E(){t(4,f="create"),t(5,m=null),t(3,p=!0)}function C(w){t(4,f="edit"),t(5,m=w),t(3,p=!0)}async function N(w){const S=prompt("Ketik 'hard' untuk delete permanen, atau Enter untuk inactive:");if(S!==null)try{let y;if((S||"").toLowerCase()==="hard"?y=await fetch(`${te}/api/employees/${w}/hard`,{method:"DELETE",credentials:"include"}):y=await fetch(`${te}/api/employees/${w}`,{method:"DELETE",credentials:"include"}),!y.ok){const j=i.find(A=>A.id===w);if(j!=null&&j.employee_code&&((S||"").toLowerCase()==="hard"?y=await fetch(`${te}/api/employees/by-code/${encodeURIComponent(j.employee_code)}/hard`,{method:"DELETE",credentials:"include"}):y=await fetch(`${te}/api/employees/by-code/${encodeURIComponent(j.employee_code)}`,{method:"DELETE",credentials:"include"})),!y.ok){const A=await y.json().catch(()=>({}));throw new Error(A.message||"Failed to delete employee")}}await h()}catch(y){alert((y==null?void 0:y.message)||"Failed to delete employee")}}function D(){t(3,p=!1),t(5,m=null)}async function I(w){const{mode:S,id:y,form:j}=w.detail,A=S==="create"?`${te}/api/employees`:`${te}/api/employees/${y}`,F=S==="create"?"POST":"PUT";try{if(t(6,_=!0),S==="create"){const b=(j.department||"").toUpperCase();(!Array.isArray(j.roles)||j.roles.length===0)&&(b==="IT"||b==="HR"?j.roles=["ADMIN",b==="IT"?"IT":"HRD"]:j.roles=["EMPLOYEE"])}const M=await fetch(A,{method:F,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(j)});if(!M.ok){const b=await M.json().catch(()=>({}));throw new Error(b.message||"Failed to save employee")}t(3,p=!1),t(5,m=null),await h()}catch(M){alert((M==null?void 0:M.message)||"Failed to save employee")}finally{t(6,_=!1)}}function T(){u=this.value,t(0,u)}const g=w=>C(w),L=w=>N(w.id);return l.$$set=w=>{"page"in w&&t(13,s=w.page)},l.$$.update=()=>{l.$$.dirty&16385&&t(7,n=i.filter(w=>{const S=u.toLowerCase().trim();return S?(w.name||"").toLowerCase().includes(S)||(w.email||"").toLowerCase().includes(S)||(w.employee_code||"").toLowerCase().includes(S)||(w.branch||"").toLowerCase().includes(S):!0}))},[u,c,d,p,f,m,_,n,E,C,N,D,I,s,i,T,g,L]}class xo extends Xe{constructor(e){super(),Je(this,e,$o,Zo,Re,{page:13})}}function es(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>My Profile</h1> <p>View and update your personal information</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function ts(l){let e,t,n,s,i,c,d=l[0].name+"",u,p,f,m=(l[0].job_title||"-")+"",_,h,E,C,N,D=l[0].employee_code+"",I,T,g,L;function w(q,v){return q[0].photo_url?ss:os}let S=w(l),y=S(l),j=l[0].department&&Al(l),A=!l[3]&&Dl(l);function F(q,v){return q[3]?is:as}let M=F(l),b=M(l);return{c(){e=a("div"),t=a("div"),n=a("div"),y.c(),s=k(),i=a("div"),c=a("h2"),u=P(d),p=k(),f=a("p"),_=P(m),h=k(),E=a("p"),j&&j.c(),C=k(),N=a("span"),I=P(D),T=k(),g=a("div"),A&&A.c(),L=k(),b.c(),r(n,"class","profile-avatar"),r(f,"class","job-title"),r(N,"class","emp-code"),r(E,"class","dept-info"),r(i,"class","profile-header-info"),r(g,"class","profile-actions"),r(t,"class","profile-header-card"),r(e,"class","profile-container")},m(q,v){O(q,e,v),o(e,t),o(t,n),y.m(n,null),o(t,s),o(t,i),o(i,c),o(c,u),o(i,p),o(i,f),o(f,_),o(i,h),o(i,E),j&&j.m(E,null),o(E,C),o(E,N),o(N,I),o(t,T),o(t,g),A&&A.m(g,null),o(e,L),b.m(e,null)},p(q,v){S===(S=w(q))&&y?y.p(q,v):(y.d(1),y=S(q),y&&(y.c(),y.m(n,null))),v&1&&d!==(d=q[0].name+"")&&Y(u,d),v&1&&m!==(m=(q[0].job_title||"-")+"")&&Y(_,m),q[0].department?j?j.p(q,v):(j=Al(q),j.c(),j.m(E,C)):j&&(j.d(1),j=null),v&1&&D!==(D=q[0].employee_code+"")&&Y(I,D),q[3]?A&&(A.d(1),A=null):A?A.p(q,v):(A=Dl(q),A.c(),A.m(g,null)),M===(M=F(q))&&b?b.p(q,v):(b.d(1),b=M(q),b&&(b.c(),b.m(e,null)))},d(q){q&&R(e),y.d(),j&&j.d(),A&&A.d(),b.d()}}}function ls(l){let e,t;return{c(){e=a("div"),t=P(l[4]),r(e,"class","error-state")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&16&&Y(t,n[4])},d(n){n&&R(e)}}}function ns(l){let e;return{c(){e=a("div"),e.textContent="Loading profile...",r(e,"class","loading-state")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function os(l){let e,t=(l[0].name?l[0].name.charAt(0).toUpperCase():"?")+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","avatar-initials")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&1&&t!==(t=(s[0].name?s[0].name.charAt(0).toUpperCase():"?")+"")&&Y(n,t)},d(s){s&&R(e)}}}function ss(l){let e,t,n;return{c(){e=a("img"),rl(e.src,t=l[0].photo_url)||r(e,"src",t),r(e,"alt",n=l[0].name)},m(s,i){O(s,e,i)},p(s,i){i&1&&!rl(e.src,t=s[0].photo_url)&&r(e,"src",t),i&1&&n!==(n=s[0].name)&&r(e,"alt",n)},d(s){s&&R(e)}}}function Al(l){let e,t=l[0].department+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","dept-badge")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&1&&t!==(t=s[0].department+"")&&Y(n,t)},d(s){s&&R(e)}}}function Dl(l){let e,t,n;return{c(){e=a("button"),e.textContent="Edit Profile",r(e,"class","btn-primary")},m(s,i){O(s,e,i),t||(n=U(e,"click",l[6]),t=!0)},p:W,d(s){s&&R(e),t=!1,n()}}}function as(l){let e,t,n,s,i,c,d,u,p,f=l[0].email+"",m,_,h,E,C,N,D=(l[0].phone||"-")+"",I,T,g,L,w,S,y=qt(l[0].birth_date)+"",j,A,F,M,b,q,v=l[0].gender==="M"?"Male":l[0].gender==="F"?"Female":"-",B,V,X,J,z,H,K=(l[0].address||"-")+"",x,ye,ne,de,ae,oe,he,le,ue,Ie,ge=l[0].employee_code+"",De,Oe,ie,pe,Pe,$e,Fe=(l[0].department||"-")+"",Le,ze,qe,Ge,Ve,we,Ue=(l[0].job_title||"-")+"",Be,Te,Z,fe,ke,Ke,Qe=(l[0].branch||"-")+"",We,at,xe,lt,it,rt,Q=qt(l[0].join_date)+"",re,Me,He,je,ee,_e,Ce,pt=l[0].status+"",Vt,jt,ll,ht,Bt,nl,Et,bt,Jt,ol,Xt,Rt=(l[0].emergency_contact||"-")+"",Gt,sl,St,Qt,al,zt,Ot=(l[0].emergency_phone||"-")+"",Kt;return{c(){e=a("div"),t=a("div"),n=a("h3"),n.textContent="Personal Information",s=k(),i=a("dl"),c=a("div"),d=a("dt"),d.textContent="Email",u=k(),p=a("dd"),m=P(f),_=k(),h=a("div"),E=a("dt"),E.textContent="Phone",C=k(),N=a("dd"),I=P(D),T=k(),g=a("div"),L=a("dt"),L.textContent="Birth Date",w=k(),S=a("dd"),j=P(y),A=k(),F=a("div"),M=a("dt"),M.textContent="Gender",b=k(),q=a("dd"),B=P(v),V=k(),X=a("div"),J=a("dt"),J.textContent="Address",z=k(),H=a("dd"),x=P(K),ye=k(),ne=a("div"),de=a("h3"),de.textContent="Employment Information",ae=k(),oe=a("dl"),he=a("div"),le=a("dt"),le.textContent="Employee Code",ue=k(),Ie=a("dd"),De=P(ge),Oe=k(),ie=a("div"),pe=a("dt"),pe.textContent="Department",Pe=k(),$e=a("dd"),Le=P(Fe),ze=k(),qe=a("div"),Ge=a("dt"),Ge.textContent="Job Title",Ve=k(),we=a("dd"),Be=P(Ue),Te=k(),Z=a("div"),fe=a("dt"),fe.textContent="Branch",ke=k(),Ke=a("dd"),We=P(Qe),at=k(),xe=a("div"),lt=a("dt"),lt.textContent="Join Date",it=k(),rt=a("dd"),re=P(Q),Me=k(),He=a("div"),je=a("dt"),je.textContent="Status",ee=k(),_e=a("dd"),Ce=a("span"),Vt=P(pt),ll=k(),ht=a("div"),Bt=a("h3"),Bt.textContent="Emergency Contact",nl=k(),Et=a("dl"),bt=a("div"),Jt=a("dt"),Jt.textContent="Contact Name",ol=k(),Xt=a("dd"),Gt=P(Rt),sl=k(),St=a("div"),Qt=a("dt"),Qt.textContent="Contact Phone",al=k(),zt=a("dd"),Kt=P(Ot),r(X,"class","full-width"),r(i,"class","info-list"),r(t,"class","card profile-card"),r(Ie,"class","mono"),r(Ce,"class",jt="status-badge "+(l[0].status==="ACTIVE"?"active":"inactive")),r(oe,"class","info-list"),r(ne,"class","card profile-card"),r(Et,"class","info-list"),r(ht,"class","card profile-card"),r(e,"class","profile-details-grid")},m(Ne,Ye){O(Ne,e,Ye),o(e,t),o(t,n),o(t,s),o(t,i),o(i,c),o(c,d),o(c,u),o(c,p),o(p,m),o(c,_),o(i,h),o(h,E),o(h,C),o(h,N),o(N,I),o(h,T),o(i,g),o(g,L),o(g,w),o(g,S),o(S,j),o(g,A),o(i,F),o(F,M),o(F,b),o(F,q),o(q,B),o(F,V),o(i,X),o(X,J),o(X,z),o(X,H),o(H,x),o(e,ye),o(e,ne),o(ne,de),o(ne,ae),o(ne,oe),o(oe,he),o(he,le),o(he,ue),o(he,Ie),o(Ie,De),o(he,Oe),o(oe,ie),o(ie,pe),o(ie,Pe),o(ie,$e),o($e,Le),o(ie,ze),o(oe,qe),o(qe,Ge),o(qe,Ve),o(qe,we),o(we,Be),o(qe,Te),o(oe,Z),o(Z,fe),o(Z,ke),o(Z,Ke),o(Ke,We),o(Z,at),o(oe,xe),o(xe,lt),o(xe,it),o(xe,rt),o(rt,re),o(xe,Me),o(oe,He),o(He,je),o(He,ee),o(He,_e),o(_e,Ce),o(Ce,Vt),o(e,ll),o(e,ht),o(ht,Bt),o(ht,nl),o(ht,Et),o(Et,bt),o(bt,Jt),o(bt,ol),o(bt,Xt),o(Xt,Gt),o(bt,sl),o(Et,St),o(St,Qt),o(St,al),o(St,zt),o(zt,Kt)},p(Ne,Ye){Ye&1&&f!==(f=Ne[0].email+"")&&Y(m,f),Ye&1&&D!==(D=(Ne[0].phone||"-")+"")&&Y(I,D),Ye&1&&y!==(y=qt(Ne[0].birth_date)+"")&&Y(j,y),Ye&1&&v!==(v=Ne[0].gender==="M"?"Male":Ne[0].gender==="F"?"Female":"-")&&Y(B,v),Ye&1&&K!==(K=(Ne[0].address||"-")+"")&&Y(x,K),Ye&1&&ge!==(ge=Ne[0].employee_code+"")&&Y(De,ge),Ye&1&&Fe!==(Fe=(Ne[0].department||"-")+"")&&Y(Le,Fe),Ye&1&&Ue!==(Ue=(Ne[0].job_title||"-")+"")&&Y(Be,Ue),Ye&1&&Qe!==(Qe=(Ne[0].branch||"-")+"")&&Y(We,Qe),Ye&1&&Q!==(Q=qt(Ne[0].join_date)+"")&&Y(re,Q),Ye&1&&pt!==(pt=Ne[0].status+"")&&Y(Vt,pt),Ye&1&&jt!==(jt="status-badge "+(Ne[0].status==="ACTIVE"?"active":"inactive"))&&r(Ce,"class",jt),Ye&1&&Rt!==(Rt=(Ne[0].emergency_contact||"-")+"")&&Y(Gt,Rt),Ye&1&&Ot!==(Ot=(Ne[0].emergency_phone||"-")+"")&&Y(Kt,Ot)},d(Ne){Ne&&R(e)}}}function is(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y,j,A,F,M,b,q,v,B,V,X,J,z,H,K,x,ye,ne,de,ae,oe,he,le,ue,Ie=l[2]?"Saving...":"Save Changes",ge,De,Oe;return{c(){e=a("div"),t=a("h3"),t.textContent="Edit Profile",n=k(),s=a("div"),i=a("label"),c=a("span"),c.textContent="Full Name",d=k(),u=a("input"),p=k(),f=a("label"),m=a("span"),m.textContent="Phone",_=k(),h=a("input"),E=k(),C=a("label"),N=a("span"),N.textContent="Birth Date",D=k(),I=a("input"),T=k(),g=a("label"),L=a("span"),L.textContent="Gender",w=k(),S=a("select"),y=a("option"),y.textContent="Select...",j=a("option"),j.textContent="Male",A=a("option"),A.textContent="Female",F=k(),M=a("label"),b=a("span"),b.textContent="Address",q=k(),v=a("textarea"),B=k(),V=a("label"),X=a("span"),X.textContent="Emergency Contact Name",J=k(),z=a("input"),H=k(),K=a("label"),x=a("span"),x.textContent="Emergency Contact Phone",ye=k(),ne=a("input"),de=k(),ae=a("div"),oe=a("button"),he=P("Cancel"),le=k(),ue=a("button"),ge=P(Ie),r(u,"type","text"),r(h,"type","tel"),r(h,"placeholder","+62..."),r(I,"type","date"),y.__value="",G(y,y.__value),j.__value="M",G(j,j.__value),A.__value="F",G(A,A.__value),l[5].gender===void 0&&ft(()=>l[12].call(S)),r(v,"rows","2"),r(M,"class","full-width"),r(z,"type","text"),r(ne,"type","tel"),r(s,"class","form-grid"),r(oe,"class","btn-secondary"),oe.disabled=l[2],r(ue,"class","btn-primary"),ue.disabled=l[2],r(ae,"class","form-actions"),r(e,"class","profile-form card")},m(ie,pe){O(ie,e,pe),o(e,t),o(e,n),o(e,s),o(s,i),o(i,c),o(i,d),o(i,u),G(u,l[5].name),o(s,p),o(s,f),o(f,m),o(f,_),o(f,h),G(h,l[5].phone),o(s,E),o(s,C),o(C,N),o(C,D),o(C,I),G(I,l[5].birth_date),o(s,T),o(s,g),o(g,L),o(g,w),o(g,S),o(S,y),o(S,j),o(S,A),Ze(S,l[5].gender,!0),o(s,F),o(s,M),o(M,b),o(M,q),o(M,v),G(v,l[5].address),o(s,B),o(s,V),o(V,X),o(V,J),o(V,z),G(z,l[5].emergency_contact),o(s,H),o(s,K),o(K,x),o(K,ye),o(K,ne),G(ne,l[5].emergency_phone),o(e,de),o(e,ae),o(ae,oe),o(oe,he),o(ae,le),o(ae,ue),o(ue,ge),De||(Oe=[U(u,"input",l[9]),U(h,"input",l[10]),U(I,"input",l[11]),U(S,"change",l[12]),U(v,"input",l[13]),U(z,"input",l[14]),U(ne,"input",l[15]),U(oe,"click",l[7]),U(ue,"click",l[8])],De=!0)},p(ie,pe){pe&32&&u.value!==ie[5].name&&G(u,ie[5].name),pe&32&&G(h,ie[5].phone),pe&32&&G(I,ie[5].birth_date),pe&32&&Ze(S,ie[5].gender),pe&32&&G(v,ie[5].address),pe&32&&z.value!==ie[5].emergency_contact&&G(z,ie[5].emergency_contact),pe&32&&G(ne,ie[5].emergency_phone),pe&4&&(oe.disabled=ie[2]),pe&4&&Ie!==(Ie=ie[2]?"Saving...":"Save Changes")&&Y(ge,Ie),pe&4&&(ue.disabled=ie[2])},d(ie){ie&&R(e),De=!1,ce(Oe)}}}function rs(l){let e,t,n,s,i;t=new st({props:{$$slots:{default:[es]},$$scope:{ctx:l}}});function c(p,f){if(p[1])return ns;if(p[4])return ls;if(p[0])return ts}let d=c(l),u=d&&d(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),u&&u.c(),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(p,f){O(p,e,f),Ee(t,e,null),o(e,n),o(e,s),u&&u.m(s,null),i=!0},p(p,[f]){const m={};f&524288&&(m.$$scope={dirty:f,ctx:p}),t.$set(m),d===(d=c(p))&&u?u.p(p,f):(u&&u.d(1),u=d&&d(p),u&&(u.c(),u.m(s,null)))},i(p){i||(be(t.$$.fragment,p),i=!0)},o(p){ve(t.$$.fragment,p),i=!1},d(p){p&&R(e),Se(t),u&&u.d()}}}function qt(l){return l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-"}function cs(l,e,t){let n=null,s=!0,i=!1,c=!1,d="",u={name:"",phone:"",address:"",birth_date:"",gender:"",emergency_contact:"",emergency_phone:""};nt.subscribe(L=>L),tt(p);async function p(){t(1,s=!0),t(4,d="");try{const L=await fetch(`${te}/api/me`,{credentials:"include"});if(!L.ok)throw new Error("Failed to load profile");t(0,n=await L.json()),f()}catch(L){t(4,d=L.message||"Failed to load profile")}finally{t(1,s=!1)}}function f(){n&&t(5,u={name:n.name||"",phone:n.phone||"",address:n.address||"",birth_date:n.birth_date?n.birth_date.split("T")[0]:"",gender:n.gender||"",emergency_contact:n.emergency_contact||"",emergency_phone:n.emergency_phone||""})}function m(){f(),t(3,c=!0)}function _(){t(3,c=!1),f()}async function h(){t(2,i=!0),t(4,d="");try{const L=await fetch(`${te}/api/me`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});if(!L.ok){const w=await L.json().catch(()=>({}));throw new Error(w.message||"Failed to save profile")}t(0,n=await L.json()),nt.set(n),t(3,c=!1)}catch(L){t(4,d=L.message||"Failed to save profile")}finally{t(2,i=!1)}}function E(){u.name=this.value,t(5,u)}function C(){u.phone=this.value,t(5,u)}function N(){u.birth_date=this.value,t(5,u)}function D(){u.gender=Lt(this),t(5,u)}function I(){u.address=this.value,t(5,u)}function T(){u.emergency_contact=this.value,t(5,u)}function g(){u.emergency_phone=this.value,t(5,u)}return[n,s,i,c,d,u,m,_,h,E,C,N,D,I,T,g]}class us extends Xe{constructor(e){super(),Je(this,e,cs,rs,Re,{})}}function Ml(l,e,t){const n=l.slice();return n[74]=e[t],n}function Il(l,e,t){const n=l.slice();return n[77]=e[t],n}function Ll(l,e,t){const n=l.slice();return n[80]=e[t],n}function Nl(l,e,t){const n=l.slice();return n[74]=e[t],n}function Tl(l,e,t){const n=l.slice();return n[77]=e[t],n}function jl(l,e,t){const n=l.slice();return n[80]=e[t],n}function Rl(l,e,t){const n=l.slice();return n[74]=e[t],n}function Ol(l,e,t){const n=l.slice();return n[77]=e[t],n}function Pl(l,e,t){const n=l.slice();return n[80]=e[t],n}function ql(l,e,t){const n=l.slice();return n[74]=e[t],n}function Fl(l,e,t){const n=l.slice();return n[77]=e[t],n}function Ul(l,e,t){const n=l.slice();return n[80]=e[t],n}function Hl(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S=l[16]?"Submitting‚Ä¶":"Submit",y,j,A;function F(v,B){return v[1]==="EXIT_CLEARANCE"?ps:v[1]==="MEDICAL_CLAIM"?ds:fs}let M=F(l),b=M(l),q=l[0]&&nn(l);return{c(){e=a("div"),t=a("div"),n=a("header"),n.innerHTML="<h2>New Request</h2>",s=k(),i=a("div"),c=a("div"),d=a("label"),u=P(`Type
                        `),p=a("select"),f=a("option"),f.textContent="Leave (Cuti)",m=a("option"),m.textContent="Overtime (Lembur)",_=a("option"),_.textContent="Permit (Izin)",h=a("option"),h.textContent="Exit Clearance",E=a("option"),E.textContent="Medical Claim",C=k(),b.c(),N=k(),q&&q.c(),D=k(),I=a("footer"),T=a("button"),g=P("Cancel"),L=k(),w=a("button"),y=P(S),r(n,"class","modal-header"),f.__value="LEAVE",G(f,f.__value),m.__value="OVERTIME",G(m,m.__value),_.__value="PERMIT",G(_,_.__value),h.__value="EXIT_CLEARANCE",G(h,h.__value),E.__value="MEDICAL_CLAIM",G(E,E.__value),r(p,"class","form-control"),l[1]===void 0&&ft(()=>l[37].call(p)),r(c,"class","form-row"),r(i,"class","modal-body"),r(T,"type","button"),r(T,"class","btn"),T.disabled=l[16],r(w,"type","button"),r(w,"class","btn-primary"),w.disabled=l[16],r(I,"class","modal-footer"),r(t,"class","modal"),r(t,"role","dialog"),r(t,"aria-modal","true"),se(t,"width","520px"),r(e,"class","modal-overlay")},m(v,B){O(v,e,B),o(e,t),o(t,n),o(t,s),o(t,i),o(i,c),o(c,d),o(d,u),o(d,p),o(p,f),o(p,m),o(p,_),o(p,h),o(p,E),Ze(p,l[1],!0),o(i,C),b.m(i,null),o(i,N),q&&q.m(i,null),o(t,D),o(t,I),o(I,T),o(T,g),o(I,L),o(I,w),o(w,y),j||(A=[U(p,"change",l[37]),U(T,"click",l[27]),U(w,"click",l[26]),U(t,"click",mt(l[28])),U(e,"click",l[27])],j=!0)},p(v,B){B[0]&2&&Ze(p,v[1]),M===(M=F(v))&&b?b.p(v,B):(b.d(1),b=M(v),b&&(b.c(),b.m(i,N))),v[0]?q?q.p(v,B):(q=nn(v),q.c(),q.m(i,null)):q&&(q.d(1),q=null),B[0]&65536&&(T.disabled=v[16]),B[0]&65536&&S!==(S=v[16]?"Submitting‚Ä¶":"Submit")&&Y(y,S),B[0]&65536&&(w.disabled=v[16])},d(v){v&&R(e),b.d(),q&&q.d(),j=!1,ce(A)}}}function fs(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g=l[13]==="start"&&Yl(l),L=l[13]==="end"&&Xl(l);return{c(){e=a("div"),t=a("label"),n=P(`Start Date
                            `),s=a("div"),i=a("input"),c=k(),g&&g.c(),d=k(),u=a("label"),p=P(`End Date
                            `),f=a("div"),m=a("input"),_=k(),L&&L.c(),h=k(),E=a("div"),C=a("label"),N=P(`Reason
                            `),D=a("textarea"),r(i,"type","text"),r(i,"class","form-control"),r(i,"placeholder","dd/mm/yyyy"),se(s,"position","relative"),r(m,"type","text"),r(m,"class","form-control"),r(m,"placeholder","dd/mm/yyyy"),se(f,"position","relative"),r(e,"class","form-row"),r(D,"rows","3"),r(D,"class","form-control"),r(E,"class","form-row")},m(w,S){O(w,e,S),o(e,t),o(t,n),o(t,s),o(s,i),G(i,l[2]),o(s,c),g&&g.m(s,null),o(e,d),o(e,u),o(u,p),o(u,f),o(f,m),G(m,l[3]),o(f,_),L&&L.m(f,null),O(w,h,S),O(w,E,S),o(E,C),o(C,N),o(C,D),G(D,l[4]),I||(T=[U(i,"input",l[59]),U(i,"input",l[60]),U(i,"focus",l[61]),U(i,"blur",l[19]),U(m,"input",l[65]),U(m,"input",l[66]),U(m,"focus",l[67]),U(m,"blur",l[19]),U(D,"input",l[71])],I=!0)},p(w,S){S[0]&4&&i.value!==w[2]&&G(i,w[2]),w[13]==="start"?g?g.p(w,S):(g=Yl(w),g.c(),g.m(s,null)):g&&(g.d(1),g=null),S[0]&8&&m.value!==w[3]&&G(m,w[3]),w[13]==="end"?L?L.p(w,S):(L=Xl(w),L.c(),L.m(f,null)):L&&(L.d(1),L=null),S[0]&16&&G(D,w[4])},d(w){w&&(R(e),R(h),R(E)),g&&g.d(),L&&L.d(),I=!1,ce(T)}}}function ds(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w=l[13]==="claim"&&Kl(l);return{c(){e=a("div"),t=a("label"),n=P(`Claim Date
                            `),s=a("div"),i=a("input"),c=k(),w&&w.c(),d=k(),u=a("label"),p=P(`Provider
                            `),f=a("input"),m=k(),_=a("div"),h=a("label"),E=P(`Amount
                            `),C=a("input"),N=k(),D=a("label"),I=P(`Description
                            `),T=a("input"),r(i,"type","text"),r(i,"class","form-control"),r(i,"placeholder","dd/mm/yyyy"),se(s,"position","relative"),r(f,"type","text"),r(f,"class","form-control"),r(e,"class","form-row"),r(C,"type","number"),r(C,"min","0"),r(C,"step","1"),r(C,"class","form-control"),r(T,"type","text"),r(T,"class","form-control"),r(_,"class","form-row")},m(S,y){O(S,e,y),o(e,t),o(t,n),o(t,s),o(s,i),G(i,l[9]),o(s,c),w&&w.m(s,null),o(e,d),o(e,u),o(u,p),o(u,f),G(f,l[10]),O(S,m,y),O(S,_,y),o(_,h),o(h,E),o(h,C),G(C,l[11]),o(_,N),o(_,D),o(D,I),o(D,T),G(T,l[12]),g||(L=[U(i,"input",l[50]),U(i,"input",l[51]),U(i,"focus",l[52]),U(i,"blur",l[19]),U(f,"input",l[56]),U(C,"input",l[57]),U(T,"input",l[58])],g=!0)},p(S,y){y[0]&512&&i.value!==S[9]&&G(i,S[9]),S[13]==="claim"?w?w.p(S,y):(w=Kl(S),w.c(),w.m(s,null)):w&&(w.d(1),w=null),y[0]&1024&&f.value!==S[10]&&G(f,S[10]),y[0]&2048&&lo(C.value)!==S[11]&&G(C,S[11]),y[0]&4096&&T.value!==S[12]&&G(T,S[12])},d(S){S&&(R(e),R(m),R(_)),w&&w.d(),g=!1,ce(L)}}}function ps(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y,j,A,F,M,b,q,v,B,V,X,J,z=l[13]==="last"&&xl(l);return{c(){e=a("div"),t=a("label"),n=P(`Last Work Date
                            `),s=a("div"),i=a("input"),c=k(),z&&z.c(),d=k(),u=a("label"),p=P(`Supervisor Name
                            `),f=a("input"),m=k(),_=a("div"),h=a("label"),E=P(`Handover Notes
                            `),C=a("textarea"),N=k(),D=a("div"),I=a("div"),T=a("label"),g=a("input"),L=P(" ID Card"),w=k(),S=a("label"),y=a("input"),j=P(" Laptop"),A=k(),F=a("label"),M=a("input"),b=P(" Keys"),q=k(),v=a("label"),B=a("input"),V=P(" Email Access Disabled"),r(i,"type","text"),r(i,"class","form-control"),r(i,"placeholder","dd/mm/yyyy"),se(s,"position","relative"),r(f,"type","text"),r(f,"class","form-control"),r(e,"class","form-row"),r(C,"rows","3"),r(C,"class","form-control"),r(_,"class","form-row"),r(g,"type","checkbox"),r(y,"type","checkbox"),r(M,"type","checkbox"),r(B,"type","checkbox"),r(I,"class","checkboxes"),r(D,"class","form-row")},m(H,K){O(H,e,K),o(e,t),o(t,n),o(t,s),o(s,i),G(i,l[5]),o(s,c),z&&z.m(s,null),o(e,d),o(e,u),o(u,p),o(u,f),G(f,l[7]),O(H,m,K),O(H,_,K),o(_,h),o(h,E),o(h,C),G(C,l[6]),O(H,N,K),O(H,D,K),o(D,I),o(I,T),o(T,g),g.checked=l[8].id_card,o(T,L),o(I,w),o(I,S),o(S,y),y.checked=l[8].laptop,o(S,j),o(I,A),o(I,F),o(F,M),M.checked=l[8].keys,o(F,b),o(I,q),o(I,v),o(v,B),B.checked=l[8].email_access_disabled,o(v,V),X||(J=[U(i,"input",l[38]),U(i,"input",l[39]),U(i,"focus",l[40]),U(i,"blur",l[19]),U(f,"input",l[44]),U(C,"input",l[45]),U(g,"change",l[46]),U(y,"change",l[47]),U(M,"change",l[48]),U(B,"change",l[49])],X=!0)},p(H,K){K[0]&32&&i.value!==H[5]&&G(i,H[5]),H[13]==="last"?z?z.p(H,K):(z=xl(H),z.c(),z.m(s,null)):z&&(z.d(1),z=null),K[0]&128&&f.value!==H[7]&&G(f,H[7]),K[0]&64&&G(C,H[6]),K[0]&256&&(g.checked=H[8].id_card),K[0]&256&&(y.checked=H[8].laptop),K[0]&256&&(M.checked=H[8].keys),K[0]&256&&(B.checked=H[8].email_access_disabled)},d(H){H&&(R(e),R(m),R(_),R(N),R(D)),z&&z.d(),X=!1,ce(J)}}}function Yl(l){let e,t,n,s,i,c=l[21][l[14]]+"",d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S=$(l[22]),y=[];for(let b=0;b<S.length;b+=1)y[b]=Vl(jl(l,S,b));let j=$(Array(new Date(l[15],l[14],1).getDay()).fill(0)),A=[];for(let b=0;b<j.length;b+=1)A[b]=Bl(Tl(l,j,b));let F=$(Array(dt(l[15],l[14])).fill(0).map(an)),M=[];for(let b=0;b<F.length;b+=1)M[b]=Jl(Nl(l,F,b));return{c(){e=a("div"),t=a("div"),n=a("button"),n.textContent="‚óÄ",s=k(),i=a("span"),d=P(c),u=k(),p=P(l[15]),f=k(),m=a("button"),m.textContent="‚ñ∂",_=k(),h=a("div");for(let b=0;b<y.length;b+=1)y[b].c();E=k();for(let b=0;b<A.length;b+=1)A[b].c();C=k();for(let b=0;b<M.length;b+=1)M[b].c();N=k(),D=a("div"),I=a("button"),I.textContent="Clear",T=k(),g=a("button"),g.textContent="Close",r(n,"type","button"),r(n,"class","svelte-1qjv2xn"),r(m,"type","button"),r(m,"class","svelte-1qjv2xn"),r(t,"class","dp-header svelte-1qjv2xn"),r(h,"class","dp-grid svelte-1qjv2xn"),r(I,"type","button"),r(I,"class","btn"),r(g,"type","button"),r(g,"class","btn"),se(D,"display","flex"),se(D,"justify-content","space-between"),se(D,"margin-top","8px"),r(e,"class","datepicker-pop svelte-1qjv2xn"),r(e,"role","dialog"),r(e,"aria-label","Datepicker"),r(e,"tabindex","-1")},m(b,q){O(b,e,q),o(e,t),o(t,n),o(t,s),o(t,i),o(i,d),o(i,u),o(i,p),o(t,f),o(t,m),o(e,_),o(e,h);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(h,null);o(h,E);for(let v=0;v<A.length;v+=1)A[v]&&A[v].m(h,null);o(h,C);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(h,null);o(e,N),o(e,D),o(D,I),o(D,T),o(D,g),L||(w=[U(n,"click",l[23]),U(m,"click",l[24]),U(I,"click",l[64]),U(g,"click",l[19]),U(e,"click",mt(l[35])),U(e,"mousedown",Ct(l[36]))],L=!0)},p(b,q){if(q[0]&16384&&c!==(c=b[21][b[14]]+"")&&Y(d,c),q[0]&32768&&Y(p,b[15]),q[0]&4194304){S=$(b[22]);let v;for(v=0;v<S.length;v+=1){const B=jl(b,S,v);y[v]?y[v].p(B,q):(y[v]=Vl(B),y[v].c(),y[v].m(h,E))}for(;v<y.length;v+=1)y[v].d(1);y.length=S.length}if(q[0]&49152){j=$(Array(new Date(b[15],b[14],1).getDay()).fill(0));let v;for(v=0;v<j.length;v+=1){const B=Tl(b,j,v);A[v]?A[v].p(B,q):(A[v]=Bl(),A[v].c(),A[v].m(h,C))}for(;v<A.length;v+=1)A[v].d(1);A.length=j.length}if(q[0]&1097728){F=$(Array(dt(b[15],b[14])).fill(0).map(an));let v;for(v=0;v<F.length;v+=1){const B=Nl(b,F,v);M[v]?M[v].p(B,q):(M[v]=Jl(B),M[v].c(),M[v].m(h,null))}for(;v<M.length;v+=1)M[v].d(1);M.length=F.length}},d(b){b&&R(e),me(y,b),me(A,b),me(M,b),L=!1,ce(w)}}}function Vl(l){let e;return{c(){e=a("div"),e.textContent=`${l[80]}`,r(e,"class","dp-dow svelte-1qjv2xn")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Bl(l){let e;return{c(){e=a("div")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Jl(l){let e,t=l[74]+"",n,s,i;function c(...u){return l[62](l[74],...u)}function d(){return l[63](l[74])}return{c(){e=a("div"),n=P(t),r(e,"class","dp-day svelte-1qjv2xn"),r(e,"role","button"),r(e,"tabindex","0")},m(u,p){O(u,e,p),o(e,n),s||(i=[U(e,"keydown",c),U(e,"click",d)],s=!0)},p(u,p){l=u,p[0]&49152&&t!==(t=l[74]+"")&&Y(n,t)},d(u){u&&R(e),s=!1,ce(i)}}}function Xl(l){let e,t,n,s,i,c=l[21][l[14]]+"",d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S=$(l[22]),y=[];for(let b=0;b<S.length;b+=1)y[b]=Gl(Ll(l,S,b));let j=$(Array(new Date(l[15],l[14],1).getDay()).fill(0)),A=[];for(let b=0;b<j.length;b+=1)A[b]=Ql(Il(l,j,b));let F=$(Array(dt(l[15],l[14])).fill(0).map(rn)),M=[];for(let b=0;b<F.length;b+=1)M[b]=zl(Ml(l,F,b));return{c(){e=a("div"),t=a("div"),n=a("button"),n.textContent="‚óÄ",s=k(),i=a("span"),d=P(c),u=k(),p=P(l[15]),f=k(),m=a("button"),m.textContent="‚ñ∂",_=k(),h=a("div");for(let b=0;b<y.length;b+=1)y[b].c();E=k();for(let b=0;b<A.length;b+=1)A[b].c();C=k();for(let b=0;b<M.length;b+=1)M[b].c();N=k(),D=a("div"),I=a("button"),I.textContent="Clear",T=k(),g=a("button"),g.textContent="Close",r(n,"type","button"),r(n,"class","svelte-1qjv2xn"),r(m,"type","button"),r(m,"class","svelte-1qjv2xn"),r(t,"class","dp-header svelte-1qjv2xn"),r(h,"class","dp-grid svelte-1qjv2xn"),r(I,"type","button"),r(I,"class","btn"),r(g,"type","button"),r(g,"class","btn"),se(D,"display","flex"),se(D,"justify-content","space-between"),se(D,"margin-top","8px"),r(e,"class","datepicker-pop svelte-1qjv2xn"),r(e,"role","dialog"),r(e,"aria-label","Datepicker"),r(e,"tabindex","-1")},m(b,q){O(b,e,q),o(e,t),o(t,n),o(t,s),o(t,i),o(i,d),o(i,u),o(i,p),o(t,f),o(t,m),o(e,_),o(e,h);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(h,null);o(h,E);for(let v=0;v<A.length;v+=1)A[v]&&A[v].m(h,null);o(h,C);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(h,null);o(e,N),o(e,D),o(D,I),o(D,T),o(D,g),L||(w=[U(n,"click",l[23]),U(m,"click",l[24]),U(I,"click",l[70]),U(g,"click",l[19]),U(e,"click",mt(l[33])),U(e,"mousedown",Ct(l[34]))],L=!0)},p(b,q){if(q[0]&16384&&c!==(c=b[21][b[14]]+"")&&Y(d,c),q[0]&32768&&Y(p,b[15]),q[0]&4194304){S=$(b[22]);let v;for(v=0;v<S.length;v+=1){const B=Ll(b,S,v);y[v]?y[v].p(B,q):(y[v]=Gl(B),y[v].c(),y[v].m(h,E))}for(;v<y.length;v+=1)y[v].d(1);y.length=S.length}if(q[0]&49152){j=$(Array(new Date(b[15],b[14],1).getDay()).fill(0));let v;for(v=0;v<j.length;v+=1){const B=Il(b,j,v);A[v]?A[v].p(B,q):(A[v]=Ql(),A[v].c(),A[v].m(h,C))}for(;v<A.length;v+=1)A[v].d(1);A.length=j.length}if(q[0]&1097728){F=$(Array(dt(b[15],b[14])).fill(0).map(rn));let v;for(v=0;v<F.length;v+=1){const B=Ml(b,F,v);M[v]?M[v].p(B,q):(M[v]=zl(B),M[v].c(),M[v].m(h,null))}for(;v<M.length;v+=1)M[v].d(1);M.length=F.length}},d(b){b&&R(e),me(y,b),me(A,b),me(M,b),L=!1,ce(w)}}}function Gl(l){let e;return{c(){e=a("div"),e.textContent=`${l[80]}`,r(e,"class","dp-dow svelte-1qjv2xn")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Ql(l){let e;return{c(){e=a("div")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function zl(l){let e,t=l[74]+"",n,s,i;function c(...u){return l[68](l[74],...u)}function d(){return l[69](l[74])}return{c(){e=a("div"),n=P(t),r(e,"class","dp-day svelte-1qjv2xn"),r(e,"role","button"),r(e,"tabindex","0")},m(u,p){O(u,e,p),o(e,n),s||(i=[U(e,"keydown",c),U(e,"click",d)],s=!0)},p(u,p){l=u,p[0]&49152&&t!==(t=l[74]+"")&&Y(n,t)},d(u){u&&R(e),s=!1,ce(i)}}}function Kl(l){let e,t,n,s,i,c=l[21][l[14]]+"",d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S=$(l[22]),y=[];for(let b=0;b<S.length;b+=1)y[b]=Wl(Pl(l,S,b));let j=$(Array(new Date(l[15],l[14],1).getDay()).fill(0)),A=[];for(let b=0;b<j.length;b+=1)A[b]=Zl(Ol(l,j,b));let F=$(Array(dt(l[15],l[14])).fill(0).map(sn)),M=[];for(let b=0;b<F.length;b+=1)M[b]=$l(Rl(l,F,b));return{c(){e=a("div"),t=a("div"),n=a("button"),n.textContent="‚óÄ",s=k(),i=a("span"),d=P(c),u=k(),p=P(l[15]),f=k(),m=a("button"),m.textContent="‚ñ∂",_=k(),h=a("div");for(let b=0;b<y.length;b+=1)y[b].c();E=k();for(let b=0;b<A.length;b+=1)A[b].c();C=k();for(let b=0;b<M.length;b+=1)M[b].c();N=k(),D=a("div"),I=a("button"),I.textContent="Clear",T=k(),g=a("button"),g.textContent="Close",r(n,"type","button"),r(n,"class","svelte-1qjv2xn"),r(m,"type","button"),r(m,"class","svelte-1qjv2xn"),r(t,"class","dp-header svelte-1qjv2xn"),r(h,"class","dp-grid svelte-1qjv2xn"),r(I,"type","button"),r(I,"class","btn"),r(g,"type","button"),r(g,"class","btn"),se(D,"display","flex"),se(D,"justify-content","space-between"),se(D,"margin-top","8px"),r(e,"class","datepicker-pop svelte-1qjv2xn"),r(e,"role","dialog"),r(e,"aria-label","Datepicker"),r(e,"tabindex","-1")},m(b,q){O(b,e,q),o(e,t),o(t,n),o(t,s),o(t,i),o(i,d),o(i,u),o(i,p),o(t,f),o(t,m),o(e,_),o(e,h);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(h,null);o(h,E);for(let v=0;v<A.length;v+=1)A[v]&&A[v].m(h,null);o(h,C);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(h,null);o(e,N),o(e,D),o(D,I),o(D,T),o(D,g),L||(w=[U(n,"click",l[23]),U(m,"click",l[24]),U(I,"click",l[55]),U(g,"click",l[19]),U(e,"click",mt(l[31])),U(e,"mousedown",Ct(l[32]))],L=!0)},p(b,q){if(q[0]&16384&&c!==(c=b[21][b[14]]+"")&&Y(d,c),q[0]&32768&&Y(p,b[15]),q[0]&4194304){S=$(b[22]);let v;for(v=0;v<S.length;v+=1){const B=Pl(b,S,v);y[v]?y[v].p(B,q):(y[v]=Wl(B),y[v].c(),y[v].m(h,E))}for(;v<y.length;v+=1)y[v].d(1);y.length=S.length}if(q[0]&49152){j=$(Array(new Date(b[15],b[14],1).getDay()).fill(0));let v;for(v=0;v<j.length;v+=1){const B=Ol(b,j,v);A[v]?A[v].p(B,q):(A[v]=Zl(),A[v].c(),A[v].m(h,C))}for(;v<A.length;v+=1)A[v].d(1);A.length=j.length}if(q[0]&1097728){F=$(Array(dt(b[15],b[14])).fill(0).map(sn));let v;for(v=0;v<F.length;v+=1){const B=Rl(b,F,v);M[v]?M[v].p(B,q):(M[v]=$l(B),M[v].c(),M[v].m(h,null))}for(;v<M.length;v+=1)M[v].d(1);M.length=F.length}},d(b){b&&R(e),me(y,b),me(A,b),me(M,b),L=!1,ce(w)}}}function Wl(l){let e;return{c(){e=a("div"),e.textContent=`${l[80]}`,r(e,"class","dp-dow svelte-1qjv2xn")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Zl(l){let e;return{c(){e=a("div")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function $l(l){let e,t=l[74]+"",n,s,i;function c(...u){return l[53](l[74],...u)}function d(){return l[54](l[74])}return{c(){e=a("div"),n=P(t),r(e,"class","dp-day svelte-1qjv2xn"),r(e,"role","button"),r(e,"tabindex","0")},m(u,p){O(u,e,p),o(e,n),s||(i=[U(e,"keydown",c),U(e,"click",d)],s=!0)},p(u,p){l=u,p[0]&49152&&t!==(t=l[74]+"")&&Y(n,t)},d(u){u&&R(e),s=!1,ce(i)}}}function xl(l){let e,t,n,s,i,c=l[21][l[14]]+"",d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S=$(l[22]),y=[];for(let b=0;b<S.length;b+=1)y[b]=en(Ul(l,S,b));let j=$(Array(new Date(l[15],l[14],1).getDay()).fill(0)),A=[];for(let b=0;b<j.length;b+=1)A[b]=tn(Fl(l,j,b));let F=$(Array(dt(l[15],l[14])).fill(0).map(on)),M=[];for(let b=0;b<F.length;b+=1)M[b]=ln(ql(l,F,b));return{c(){e=a("div"),t=a("div"),n=a("button"),n.textContent="‚óÄ",s=k(),i=a("span"),d=P(c),u=k(),p=P(l[15]),f=k(),m=a("button"),m.textContent="‚ñ∂",_=k(),h=a("div");for(let b=0;b<y.length;b+=1)y[b].c();E=k();for(let b=0;b<A.length;b+=1)A[b].c();C=k();for(let b=0;b<M.length;b+=1)M[b].c();N=k(),D=a("div"),I=a("button"),I.textContent="Clear",T=k(),g=a("button"),g.textContent="Close",r(n,"type","button"),r(n,"class","svelte-1qjv2xn"),r(m,"type","button"),r(m,"class","svelte-1qjv2xn"),r(t,"class","dp-header svelte-1qjv2xn"),r(h,"class","dp-grid svelte-1qjv2xn"),r(I,"type","button"),r(I,"class","btn"),r(g,"type","button"),r(g,"class","btn"),se(D,"display","flex"),se(D,"justify-content","space-between"),se(D,"margin-top","8px"),r(e,"class","datepicker-pop svelte-1qjv2xn"),r(e,"role","dialog"),r(e,"aria-label","Datepicker"),r(e,"tabindex","-1")},m(b,q){O(b,e,q),o(e,t),o(t,n),o(t,s),o(t,i),o(i,d),o(i,u),o(i,p),o(t,f),o(t,m),o(e,_),o(e,h);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(h,null);o(h,E);for(let v=0;v<A.length;v+=1)A[v]&&A[v].m(h,null);o(h,C);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(h,null);o(e,N),o(e,D),o(D,I),o(D,T),o(D,g),L||(w=[U(n,"click",l[23]),U(m,"click",l[24]),U(I,"click",l[43]),U(g,"click",l[19]),U(e,"click",mt(l[29])),U(e,"mousedown",Ct(l[30]))],L=!0)},p(b,q){if(q[0]&16384&&c!==(c=b[21][b[14]]+"")&&Y(d,c),q[0]&32768&&Y(p,b[15]),q[0]&4194304){S=$(b[22]);let v;for(v=0;v<S.length;v+=1){const B=Ul(b,S,v);y[v]?y[v].p(B,q):(y[v]=en(B),y[v].c(),y[v].m(h,E))}for(;v<y.length;v+=1)y[v].d(1);y.length=S.length}if(q[0]&49152){j=$(Array(new Date(b[15],b[14],1).getDay()).fill(0));let v;for(v=0;v<j.length;v+=1){const B=Fl(b,j,v);A[v]?A[v].p(B,q):(A[v]=tn(),A[v].c(),A[v].m(h,C))}for(;v<A.length;v+=1)A[v].d(1);A.length=j.length}if(q[0]&1097728){F=$(Array(dt(b[15],b[14])).fill(0).map(on));let v;for(v=0;v<F.length;v+=1){const B=ql(b,F,v);M[v]?M[v].p(B,q):(M[v]=ln(B),M[v].c(),M[v].m(h,null))}for(;v<M.length;v+=1)M[v].d(1);M.length=F.length}},d(b){b&&R(e),me(y,b),me(A,b),me(M,b),L=!1,ce(w)}}}function en(l){let e;return{c(){e=a("div"),e.textContent=`${l[80]}`,r(e,"class","dp-dow svelte-1qjv2xn")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function tn(l){let e;return{c(){e=a("div")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function ln(l){let e,t=l[74]+"",n,s,i;function c(...u){return l[41](l[74],...u)}function d(){return l[42](l[74])}return{c(){e=a("div"),n=P(t),r(e,"class","dp-day svelte-1qjv2xn"),r(e,"role","button"),r(e,"tabindex","0")},m(u,p){O(u,e,p),o(e,n),s||(i=[U(e,"keydown",c),U(e,"click",d)],s=!0)},p(u,p){l=u,p[0]&49152&&t!==(t=l[74]+"")&&Y(n,t)},d(u){u&&R(e),s=!1,ce(i)}}}function nn(l){let e,t;return{c(){e=a("div"),t=P(l[17]),r(e,"class","alert alert-error")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s[0]&131072&&Y(t,n[17])},d(n){n&&R(e)}}}function _s(l){let e,t=l[0]&&Hl(l);return{c(){t&&t.c(),e=ot()},m(n,s){t&&t.m(n,s),O(n,e,s)},p(n,s){n[0]?t?t.p(n,s):(t=Hl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:W,o:W,d(n){n&&R(e),t&&t.d(n)}}}function ms(l){const e=String(l||"").match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!e)return null;const t=Number(e[1]),n=Number(e[2])-1,s=Number(e[3]),i=new Date(s,n,t);return isNaN(i.getTime())?null:i}function hs(l){const e=String(l.getDate()).padStart(2,"0"),t=String(l.getMonth()+1).padStart(2,"0"),n=l.getFullYear();return`${e}/${t}/${n}`}function dt(l,e){return new Date(l,e+1,0).getDate()}function kt(l,e){const t=String(l||"").match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!t)return"";const n=`${t[3]}-${t[2]}-${t[1]}${e?"T23:59:59Z":"T00:00:00Z"}`,s=new Date(n);return isNaN(s.getTime())?"":s.toISOString()}function Ft(l){let e=String(l||"").replace(/[^\d]/g,"");e.length>8&&(e=e.slice(0,8));const t=e.slice(0,2),n=e.slice(2,4),s=e.slice(4,8);let i=t;return n&&(i+="/"+n),s&&(i+="/"+s),i}const on=(l,e)=>e+1,sn=(l,e)=>e+1,an=(l,e)=>e+1,rn=(l,e)=>e+1;function bs(l,e,t){let{isOpen:n=!1}=e,{type:s="LEAVE"}=e;const i=Nt();let c="",d="",u="",p="",f="",m="",_={id_card:!1,laptop:!1,keys:!1,email_access_disabled:!1},h="",E="",C="",N="",D=null,I=new Date().getMonth(),T=new Date().getFullYear();function g(Q){t(13,D=Q);const Me=ms(Q==="start"?c:d)||new Date;t(14,I=Me.getMonth()),t(15,T=Me.getFullYear())}function L(){t(13,D=null)}function w(Q){const re=new Date(T,I,Q),Me=hs(re);D==="start"?t(2,c=Me):D==="end"?t(3,d=Me):D==="last"?t(5,p=Me):D==="claim"&&t(9,h=Me),L()}const S=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],y=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];function j(){I===0?(t(14,I=11),t(15,T-=1)):t(14,I-=1)}function A(){I===11?(t(14,I=0),t(15,T+=1)):t(14,I+=1)}let F=!1,M="";function b(Q){Q==="start"?t(2,c=""):Q==="end"?t(3,d=""):Q==="last"?t(5,p=""):Q==="claim"&&t(9,h=""),L()}async function q(){if(!c||!d||!u)if(s==="EXIT_CLEARANCE"){if(!p||!f||!m){t(17,M="Please fill all fields");return}}else if(s==="MEDICAL_CLAIM"){if(!h||!E||!C){t(17,M="Please fill all fields");return}}else{t(17,M="Please fill all fields");return}t(16,F=!0),t(17,M="");try{let Q={type:s};if(s==="EXIT_CLEARANCE"){const Me=kt(p,!1),He=kt(p,!0);if(!Me||!He){t(17,M="Invalid start date format (RFC3339 required)"),t(16,F=!1);return}const je=Object.keys(_).filter(_e=>_[_e]),ee=`Supervisor: ${m}; Notes: ${f}; Assets: ${je.join(", ")}`;Q={type:s,start_date:Me,end_date:He,reason:ee}}else if(s==="MEDICAL_CLAIM"){const Me=kt(h,!1),He=kt(h,!0);if(!Me||!He){t(17,M="Invalid start date format (RFC3339 required)"),t(16,F=!1);return}const je=Number(C||0),ee=`Provider: ${E}; Amount: ${je}; ${N||u||""}`.trim();Q={type:s,start_date:Me,end_date:He,reason:ee}}else Q={type:s,start_date:kt(c,!1),end_date:kt(d,!0),reason:u};const re=await fetch(`${te}/api/requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Q)});if(re.ok)i("created"),v();else{const Me=await re.json();t(17,M=Me.error||"Failed to submit request")}}catch{t(17,M="Network error")}finally{t(16,F=!1)}}function v(){t(1,s="LEAVE"),t(2,c=""),t(3,d=""),t(4,u=""),t(5,p=""),t(6,f=""),t(7,m=""),t(8,_={id_card:!1,laptop:!1,keys:!1,email_access_disabled:!1}),t(9,h=""),t(10,E=""),t(11,C=""),t(12,N=""),t(17,M="")}function B(){t(0,n=!1),v()}function V(Q){et.call(this,l,Q)}function X(Q){et.call(this,l,Q)}function J(Q){et.call(this,l,Q)}function z(Q){et.call(this,l,Q)}function H(Q){et.call(this,l,Q)}function K(Q){et.call(this,l,Q)}function x(Q){et.call(this,l,Q)}function ye(Q){et.call(this,l,Q)}function ne(Q){et.call(this,l,Q)}function de(){s=Lt(this),t(1,s)}function ae(){p=this.value,t(5,p)}const oe=Q=>t(5,p=Ft(Q.target.value)),he=()=>g("last"),le=(Q,re)=>re.key==="Enter"&&w(Q),ue=Q=>w(Q),Ie=()=>b("last");function ge(){m=this.value,t(7,m)}function De(){f=this.value,t(6,f)}function Oe(){_.id_card=this.checked,t(8,_)}function ie(){_.laptop=this.checked,t(8,_)}function pe(){_.keys=this.checked,t(8,_)}function Pe(){_.email_access_disabled=this.checked,t(8,_)}function $e(){h=this.value,t(9,h)}const Fe=Q=>t(9,h=Ft(Q.target.value)),Le=()=>g("claim"),ze=(Q,re)=>re.key==="Enter"&&w(Q),qe=Q=>w(Q),Ge=()=>b("claim");function Ve(){E=this.value,t(10,E)}function we(){C=lo(this.value),t(11,C)}function Ue(){N=this.value,t(12,N)}function Be(){c=this.value,t(2,c)}const Te=Q=>t(2,c=Ft(Q.target.value)),Z=()=>g("start"),fe=(Q,re)=>re.key==="Enter"&&w(Q),ke=Q=>w(Q),Ke=()=>b("start");function Qe(){d=this.value,t(3,d)}const We=Q=>t(3,d=Ft(Q.target.value)),at=()=>g("end"),xe=(Q,re)=>re.key==="Enter"&&w(Q),lt=Q=>w(Q),it=()=>b("end");function rt(){u=this.value,t(4,u)}return l.$$set=Q=>{"isOpen"in Q&&t(0,n=Q.isOpen),"type"in Q&&t(1,s=Q.type)},[n,s,c,d,u,p,f,m,_,h,E,C,N,D,I,T,F,M,g,L,w,S,y,j,A,b,q,B,V,X,J,z,H,K,x,ye,ne,de,ae,oe,he,le,ue,Ie,ge,De,Oe,ie,pe,Pe,$e,Fe,Le,ze,qe,Ge,Ve,we,Ue,Be,Te,Z,fe,ke,Ke,Qe,We,at,xe,lt,it,rt]}class vs extends Xe{constructor(e){super(),Je(this,e,bs,_s,Re,{isOpen:0,type:1},null,[-1,-1,-1,-1])}}function cn(l,e,t){const n=l.slice();return n[30]=e[t],n}function gs(l){let e,t,n,s,i;return{c(){e=a("div"),t=a("h1"),n=P(l[7]),s=k(),i=a("p"),i.textContent="Manage leave and overtime requests"},m(c,d){O(c,e,d),o(e,t),o(t,n),o(e,s),o(e,i)},p(c,d){d[0]&128&&Y(n,c[7])},d(c){c&&R(e)}}}function un(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E;return{c(){e=a("div"),t=a("button"),n=P("+ Request Leave"),i=k(),c=a("button"),d=P("Exit Clearance"),p=k(),f=a("button"),m=P("Medical Claim"),r(t,"class",s="action-btn "+(l[4]==="LEAVE"?"active":"")+" svelte-80efkq"),r(c,"class",u="action-btn "+(l[4]==="EXIT_CLEARANCE"?"active":"")+" svelte-80efkq"),r(f,"class",_="action-btn "+(l[4]==="MEDICAL_CLAIM"?"active":"")+" svelte-80efkq"),r(e,"class","actions svelte-80efkq")},m(C,N){O(C,e,N),o(e,t),o(t,n),o(e,i),o(e,c),o(c,d),o(e,p),o(e,f),o(f,m),h||(E=[U(t,"click",l[17]),U(c,"click",l[18]),U(f,"click",l[19])],h=!0)},p(C,N){N[0]&16&&s!==(s="action-btn "+(C[4]==="LEAVE"?"active":"")+" svelte-80efkq")&&r(t,"class",s),N[0]&16&&u!==(u="action-btn "+(C[4]==="EXIT_CLEARANCE"?"active":"")+" svelte-80efkq")&&r(c,"class",u),N[0]&16&&_!==(_="action-btn "+(C[4]==="MEDICAL_CLAIM"?"active":"")+" svelte-80efkq")&&r(f,"class",_)},d(C){C&&R(e),h=!1,ce(E)}}}function fn(l){let e,t,n,s,i,c;return{c(){e=a("div"),t=a("button"),n=P("My Requests"),r(t,"class",s="tab-button "+(l[0]==="my_requests"?"active":"")+" svelte-80efkq"),r(e,"class","tabs svelte-80efkq")},m(d,u){O(d,e,u),o(e,t),o(t,n),i||(c=U(t,"click",l[20]),i=!0)},p(d,u){u[0]&1&&s!==(s="tab-button "+(d[0]==="my_requests"?"active":"")+" svelte-80efkq")&&r(t,"class",s)},d(d){d&&R(e),i=!1,c()}}}function ks(l){let e;function t(i,c){return i[1].length===0?Cs:ws}let n=t(l),s=n(l);return{c(){e=a("article"),s.c(),r(e,"class","card")},m(i,c){O(i,e,c),s.m(e,null)},p(i,c){n===(n=t(i))&&s?s.p(i,c):(s.d(1),s=n(i),s&&(s.c(),s.m(e,null)))},d(i){i&&R(e),s.d()}}}function ys(l){let e;return{c(){e=a("div"),e.textContent="Loading...",r(e,"class","state muted svelte-80efkq")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function ws(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I=l[0]==="approvals"&&dn(),T=l[0]==="approvals"&&pn(),g=l[0]==="my_requests"&&_n(),L=l[6]&&mn(),w=$(l[1]),S=[];for(let y=0;y<w.length;y+=1)S[y]=kn(cn(l,w,y));return{c(){I&&I.c(),e=k(),t=a("div"),n=a("table"),s=a("thead"),i=a("tr"),c=a("th"),c.textContent="Type",d=k(),u=a("th"),u.textContent="Dates",p=k(),f=a("th"),f.textContent="Reason",m=k(),T&&T.c(),_=k(),h=a("th"),h.textContent="Status",E=k(),g&&g.c(),C=k(),L&&L.c(),N=k(),D=a("tbody");for(let y=0;y<S.length;y+=1)S[y].c();r(n,"class","employees-table"),r(t,"class","employees-table-wrapper")},m(y,j){I&&I.m(y,j),O(y,e,j),O(y,t,j),o(t,n),o(n,s),o(s,i),o(i,c),o(i,d),o(i,u),o(i,p),o(i,f),o(i,m),T&&T.m(i,null),o(i,_),o(i,h),o(i,E),g&&g.m(i,null),o(i,C),L&&L.m(i,null),o(n,N),o(n,D);for(let A=0;A<S.length;A+=1)S[A]&&S[A].m(D,null)},p(y,j){if(y[0]==="approvals"?I||(I=dn(),I.c(),I.m(e.parentNode,e)):I&&(I.d(1),I=null),y[0]==="approvals"?T||(T=pn(),T.c(),T.m(i,_)):T&&(T.d(1),T=null),y[0]==="my_requests"?g||(g=_n(),g.c(),g.m(i,C)):g&&(g.d(1),g=null),y[6]?L||(L=mn(),L.c(),L.m(i,null)):L&&(L.d(1),L=null),j[0]&28995){w=$(y[1]);let A;for(A=0;A<w.length;A+=1){const F=cn(y,w,A);S[A]?S[A].p(F,j):(S[A]=kn(F),S[A].c(),S[A].m(D,null))}for(;A<S.length;A+=1)S[A].d(1);S.length=w.length}},d(y){y&&(R(e),R(t)),I&&I.d(y),T&&T.d(),g&&g.d(),L&&L.d(),me(S,y)}}}function Cs(l){let e;return{c(){e=a("div"),e.textContent="No requests found.",r(e,"class","state muted svelte-80efkq")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function dn(l){let e;return{c(){e=a("div"),e.textContent="Requests pending your approval",r(e,"class","state muted svelte-80efkq")},m(t,n){O(t,e,n)},d(t){t&&R(e)}}}function pn(l){let e;return{c(){e=a("th"),e.textContent="Requester"},m(t,n){O(t,e,n)},d(t){t&&R(e)}}}function _n(l){let e,t,n;return{c(){e=a("th"),e.textContent="Decision By",t=k(),n=a("th"),n.textContent="Decision Date"},m(s,i){O(s,e,i),O(s,t,i),O(s,n,i)},d(s){s&&(R(e),R(t),R(n))}}}function mn(l){let e;return{c(){e=a("th"),e.textContent="Actions",r(e,"class","text-right")},m(t,n){O(t,e,n)},d(t){t&&R(e)}}}function hn(l){let e,t=(l[30].user_name||"Unknown")+"",n;return{c(){e=a("td"),n=P(t)},m(s,i){O(s,e,i),o(e,n)},p(s,i){i[0]&2&&t!==(t=(s[30].user_name||"Unknown")+"")&&Y(n,t)},d(s){s&&R(e)}}}function bn(l){let e,t=(l[14](l[30])||"-")+"",n,s,i,c=(yn(l[30])||"-")+"",d;return{c(){e=a("td"),n=P(t),s=k(),i=a("td"),d=P(c)},m(u,p){O(u,e,p),o(e,n),O(u,s,p),O(u,i,p),o(i,d)},p(u,p){p[0]&2&&t!==(t=(u[14](u[30])||"-")+"")&&Y(n,t),p[0]&2&&c!==(c=(yn(u[30])||"-")+"")&&Y(d,c)},d(u){u&&(R(e),R(s),R(i))}}}function vn(l){let e,t=l[30].status==="PENDING"&&gn(l);return{c(){e=a("td"),t&&t.c(),r(e,"class","text-right")},m(n,s){O(n,e,s),t&&t.m(e,null)},p(n,s){n[30].status==="PENDING"?t?t.p(n,s):(t=gn(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(n){n&&R(e),t&&t.d()}}}function gn(l){let e,t,n,s,i;function c(){return l[21](l[30])}function d(){return l[22](l[30])}return{c(){e=a("button"),e.textContent="Approve",t=k(),n=a("button"),n.textContent="Reject",r(e,"class","btn"),r(n,"class","btn btn-danger")},m(u,p){O(u,e,p),O(u,t,p),O(u,n,p),s||(i=[U(e,"click",c),U(n,"click",d)],s=!0)},p(u,p){l=u},d(u){u&&(R(e),R(t),R(n)),s=!1,ce(i)}}}function kn(l){let e,t,n,s=l[30].type+"",i,c,d,u=new Date(l[30].start_date).toLocaleDateString()+"",p,f,m=new Date(l[30].end_date).toLocaleDateString()+"",_,h,E,C=l[30].reason+"",N,D,I,T,g,L,w=l[30].status+"",S,y,j,A,F,M=l[0]==="approvals"&&hn(l),b=l[0]==="my_requests"&&bn(l),q=l[6]&&vn(l);return{c(){e=a("tr"),t=a("td"),n=a("span"),i=P(s),c=k(),d=a("td"),p=P(u),f=P(` -
                                            `),_=P(m),h=k(),E=a("td"),N=P(C),I=k(),M&&M.c(),T=k(),g=a("td"),L=a("span"),S=P(w),j=k(),b&&b.c(),A=k(),q&&q.c(),F=k(),r(n,"class","type-badge svelte-80efkq"),r(E,"title",D=l[30].reason),r(L,"class",y="status-badge "+(l[8][l[30].status]||"")+" svelte-80efkq")},m(v,B){O(v,e,B),o(e,t),o(t,n),o(n,i),o(e,c),o(e,d),o(d,p),o(d,f),o(d,_),o(e,h),o(e,E),o(E,N),o(e,I),M&&M.m(e,null),o(e,T),o(e,g),o(g,L),o(L,S),o(e,j),b&&b.m(e,null),o(e,A),q&&q.m(e,null),o(e,F)},p(v,B){B[0]&2&&s!==(s=v[30].type+"")&&Y(i,s),B[0]&2&&u!==(u=new Date(v[30].start_date).toLocaleDateString()+"")&&Y(p,u),B[0]&2&&m!==(m=new Date(v[30].end_date).toLocaleDateString()+"")&&Y(_,m),B[0]&2&&C!==(C=v[30].reason+"")&&Y(N,C),B[0]&2&&D!==(D=v[30].reason)&&r(E,"title",D),v[0]==="approvals"?M?M.p(v,B):(M=hn(v),M.c(),M.m(e,T)):M&&(M.d(1),M=null),B[0]&2&&w!==(w=v[30].status+"")&&Y(S,w),B[0]&2&&y!==(y="status-badge "+(v[8][v[30].status]||"")+" svelte-80efkq")&&r(L,"class",y),v[0]==="my_requests"?b?b.p(v,B):(b=bn(v),b.c(),b.m(e,A)):b&&(b.d(1),b=null),v[6]?q?q.p(v,B):(q=vn(v),q.c(),q.m(e,F)):q&&(q.d(1),q=null)},d(v){v&&R(e),M&&M.d(),b&&b.d(),q&&q.d()}}}function Es(l){let e,t,n,s,i,c,d,u,p,f,m;t=new st({props:{$$slots:{default:[gs]},$$scope:{ctx:l}}});let _=l[0]==="my_requests"&&un(l),h=l[0]==="my_requests"&&fn(l);function E(g,L){return g[5]?ys:ks}let C=E(l),N=C(l);function D(g){l[23](g)}function I(g){l[24](g)}let T={};return l[2]!==void 0&&(T.isOpen=l[2]),l[3]!==void 0&&(T.type=l[3]),u=new vs({props:T}),Ht.push(()=>ul(u,"isOpen",D)),Ht.push(()=>ul(u,"type",I)),u.$on("created",l[11]),{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),_&&_.c(),i=k(),h&&h.c(),c=k(),N.c(),d=k(),Ae(u.$$.fragment),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(g,L){O(g,e,L),Ee(t,e,null),o(e,n),o(e,s),_&&_.m(s,null),o(s,i),h&&h.m(s,null),o(s,c),N.m(s,null),o(s,d),Ee(u,s,null),m=!0},p(g,L){const w={};L[0]&128|L[1]&4&&(w.$$scope={dirty:L,ctx:g}),t.$set(w),g[0]==="my_requests"?_?_.p(g,L):(_=un(g),_.c(),_.m(s,i)):_&&(_.d(1),_=null),g[0]==="my_requests"?h?h.p(g,L):(h=fn(g),h.c(),h.m(s,c)):h&&(h.d(1),h=null),C===(C=E(g))&&N?N.p(g,L):(N.d(1),N=C(g),N&&(N.c(),N.m(s,d)));const S={};!p&&L[0]&4&&(p=!0,S.isOpen=g[2],cl(()=>p=!1)),!f&&L[0]&8&&(f=!0,S.type=g[3],cl(()=>f=!1)),u.$set(S)},i(g){m||(be(t.$$.fragment,g),be(u.$$.fragment,g),m=!0)},o(g){ve(t.$$.fragment,g),ve(u.$$.fragment,g),m=!1},d(g){g&&R(e),Se(t),_&&_.d(),h&&h.d(),N.d(),Se(u)}}}function yn(l){const e=l.approved_at||l.rejected_at||l.decided_at;return e?new Date(e).toLocaleDateString():""}function Ss(l,e,t){let n,s,{page:i="MY_REQUESTS"}=e,c="my_requests",d=[],u=!1,p="LEAVE",f="LEAVE",m=!1,_={roles:[]};const h={PENDING:"status-pending",APPROVED:"status-approved",REJECTED:"status-rejected"};tt(async()=>{await E(),await N()});async function E(){try{const V=await fetch(`${te}/api/me`,{credentials:"include"});V.ok&&t(16,_=await V.json())}catch(V){console.error(V)}}let C=new Map;async function N(){try{const V=await fetch(`${te}/api/employees`,{credentials:"include"});if(V.ok){const X=await V.json();Array.isArray(X)&&(C=new Map(X.map(J=>[J.id||J.employee_id,J.name])))}}catch{}}async function D(){t(5,m=!0);const V=c==="my_requests"?`${te}/api/requests/my`:`${te}/api/requests/approvals`;try{const X=await fetch(V,{credentials:"include"});if(X.ok){let z=(await X.json()||[]).map(H=>({...H,approved_by_name:H.approver_name||H.approved_by_name||H.approved_by||H.approver||H.decider_name||H.decider||"",approved_at:H.approved_at||H.decided_at||H.updated_at||H.processed_at||"",rejected_by:H.rejected_by||"",rejected_at:H.rejected_at||""}));z=await y(z),t(1,d=z)}else t(1,d=[])}catch(X){console.error(X),t(1,d=[])}finally{t(5,m=!1)}}function I(V){t(0,c="my_requests")}function T(V){t(3,p=V),t(4,f=V),t(2,u=!0)}function g(){t(2,u=!1),D()}async function L(V){if(confirm("Approve this request?"))try{(await fetch(`${te}/api/requests/${V}/approve`,{method:"POST",credentials:"include"})).ok&&(t(1,d=d.map(J=>J.id===V?{...J,status:"APPROVED",approved_by_name:_&&_.name||"You",approved_at:new Date().toISOString()}:J)),setTimeout(D,2e3))}catch(X){console.error(X)}}async function w(V){const X=prompt("Reason for rejection:");if(X)try{(await fetch(`${te}/api/requests/${V}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:X})})).ok&&(t(1,d=d.map(z=>z.id===V?{...z,status:"REJECTED",rejected_by:_&&_.name||"You",rejected_at:new Date().toISOString()}:z)),setTimeout(D,2e3))}catch(J){console.error(J)}}function S(V){const X=V.approver_name||V.approved_by_name||V.approved_by||V.rejected_by||V.decider_name||"";if(X)return X;const J=V.approved_by_id||V.rejected_by_id||V.decider_id;return J&&C.has(J)?C.get(J):""}async function y(V){const X=V.filter(H=>H.status!=="PENDING"&&!(H.approver_name||H.approved_by_name||H.approved_by||H.rejected_by||H.decider_name));if(X.length===0)return V;const J=await Promise.all(X.map(async H=>{try{const K=await fetch(`${te}/api/requests/${H.id}`,{credentials:"include"});if(K.ok){const x=await K.json();return{id:H.id,approved_by_name:x.approver_name||x.approved_by_name||x.approved_by||x.rejected_by||x.decider_name||"",approved_at:x.approved_at||x.decided_at||x.updated_at||"",rejected_by:x.rejected_by||"",rejected_at:x.rejected_at||""}}}catch{}return{id:H.id}})),z=new Map(J.map(H=>[H.id,H]));return V.map(H=>{const K=z.get(H.id);return K?{...H,...K}:H})}const j=()=>T("LEAVE"),A=()=>T("EXIT_CLEARANCE"),F=()=>T("MEDICAL_CLAIM"),M=()=>I(),b=V=>L(V.id),q=V=>w(V.id);function v(V){u=V,t(2,u),t(16,_),t(15,i)}function B(V){p=V,t(3,p),t(16,_),t(15,i)}return l.$$set=V=>{"page"in V&&t(15,i=V.page)},l.$$.update=()=>{if(l.$$.dirty[0]&98304){const V=Array.isArray(_==null?void 0:_.roles)&&_.roles.some(X=>["ADMIN","IT","HRD","IT_ADMIN","HR_ADMIN"].includes(X));t(0,c=i==="APPROVALS"&&V?"approvals":"my_requests"),i==="LEAVE_REQUEST"&&(t(3,p="LEAVE"),t(2,u=!0))}l.$$.dirty[0]&1&&c&&typeof window<"u"&&D(),l.$$.dirty[0]&1&&t(7,n=c==="approvals"?"Approvals":"Request History"),l.$$.dirty[0]&1&&t(6,s=c==="approvals")},[c,d,u,p,f,m,s,n,h,I,T,g,L,w,S,i,_,j,A,F,M,b,q,v,B]}class As extends Xe{constructor(e){super(),Je(this,e,Ss,Es,Re,{page:15},null,[-1,-1])}}function wn(l,e,t){const n=l.slice();return n[27]=e[t],n}function Cn(l,e,t){const n=l.slice();return n[30]=e[t],n}function Ds(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>Inbox</h1> <p>Internal messages and notifications.</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Ms(l){let e,t=$(l[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=En(Cn(l,t,s));return{c(){e=a("ul");for(let s=0;s<n.length;s+=1)n[s].c();r(e,"class","message-list")},m(s,i){O(s,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(s,i){if(i[0]&261){t=$(s[0]);let c;for(c=0;c<t.length;c+=1){const d=Cn(s,t,c);n[c]?n[c].p(d,i):(n[c]=En(d),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(s){s&&R(e),me(n,s)}}}function Is(l){let e;return{c(){e=a("div"),e.innerHTML="<p>No messages yet.</p>",r(e,"class","empty-state")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Ls(l){let e;return{c(){e=a("div"),e.textContent="Loading...",r(e,"class","p-4 text-center muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function En(l){let e,t,n,s=l[30].sender_name+"",i,c,d,u=new Date(l[30].created_at).toLocaleDateString()+"",p,f,m,_=l[30].subject+"",h,E,C,N=l[30].body.substring(0,50)+"",D,I,T,g,L,w;function S(){return l[16](l[30])}function y(...j){return l[17](l[30],...j)}return{c(){var j;e=a("li"),t=a("div"),n=a("span"),i=P(s),c=k(),d=a("span"),p=P(u),f=k(),m=a("div"),h=P(_),E=k(),C=a("div"),D=P(N),I=P("..."),T=k(),r(n,"class","sender"),r(d,"class","date"),r(t,"class","msg-header"),r(m,"class","msg-subject"),r(C,"class","msg-preview"),r(e,"class",g="message-item "+(l[30].is_read?"read":"unread")+" "+(((j=l[2])==null?void 0:j.id)===l[30].id?"active":"")),r(e,"role","button"),r(e,"tabindex","0")},m(j,A){O(j,e,A),o(e,t),o(t,n),o(n,i),o(t,c),o(t,d),o(d,p),o(e,f),o(e,m),o(m,h),o(e,E),o(e,C),o(C,D),o(C,I),o(e,T),L||(w=[U(e,"click",S),U(e,"keydown",y)],L=!0)},p(j,A){var F;l=j,A[0]&1&&s!==(s=l[30].sender_name+"")&&Y(i,s),A[0]&1&&u!==(u=new Date(l[30].created_at).toLocaleDateString()+"")&&Y(p,u),A[0]&1&&_!==(_=l[30].subject+"")&&Y(h,_),A[0]&1&&N!==(N=l[30].body.substring(0,50)+"")&&Y(D,N),A[0]&5&&g!==(g="message-item "+(l[30].is_read?"read":"unread")+" "+(((F=l[2])==null?void 0:F.id)===l[30].id?"active":""))&&r(e,"class",g)},d(j){j&&R(e),L=!1,ce(w)}}}function Ns(l){let e;return{c(){e=a("div"),e.innerHTML="<p>Select a message to read</p>",r(e,"class","empty-detail")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Ts(l){let e,t,n,s,i,c,d,u=l[2].subject+"",p,f,m,_,h,E=l[2].sender_name+"",C,N,D=Mn(l[2].created_at)+"",I,T,g,L=l[2].body+"",w,S,y;return{c(){e=a("div"),t=a("div"),n=a("button"),n.textContent="‚Üê Back",s=k(),i=a("button"),i.textContent="üóëÔ∏è Delete",c=k(),d=a("h2"),p=P(u),f=k(),m=a("div"),_=P("From "),h=a("strong"),C=P(E),N=P(" on "),I=P(D),T=k(),g=a("div"),w=P(L),r(n,"class","back-btn mobile-only"),r(i,"class","btn-delete-msg"),r(i,"title","Delete Message"),r(t,"class","detail-top-row"),r(m,"class","meta"),r(e,"class","detail-header"),r(g,"class","detail-body")},m(j,A){O(j,e,A),o(e,t),o(t,n),o(t,s),o(t,i),o(e,c),o(e,d),o(d,p),o(e,f),o(e,m),o(m,_),o(m,h),o(h,C),o(m,N),o(m,I),O(j,T,A),O(j,g,A),o(g,w),S||(y=[U(n,"click",l[9]),U(i,"click",l[18])],S=!0)},p(j,A){A[0]&4&&u!==(u=j[2].subject+"")&&Y(p,u),A[0]&4&&E!==(E=j[2].sender_name+"")&&Y(C,E),A[0]&4&&D!==(D=Mn(j[2].created_at)+"")&&Y(I,D),A[0]&4&&L!==(L=j[2].body+"")&&Y(w,L)},d(j){j&&(R(e),R(T),R(g)),S=!1,ce(y)}}}function Sn(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y,j,A,F,M,b=l[6]?"Sending...":"Send Message",q,v,B,V=$(l[4]),X=[];for(let J=0;J<V.length;J+=1)X[J]=An(wn(l,V,J));return{c(){e=a("div"),t=a("div"),n=a("div"),s=a("h2"),s.textContent="New Message",i=k(),c=a("button"),c.textContent="√ó",d=k(),u=a("div"),p=a("div"),f=a("label"),f.textContent="To",m=k(),_=a("select"),h=a("option"),h.textContent="Select Recipient...";for(let J=0;J<X.length;J+=1)X[J].c();E=k(),C=a("div"),N=a("label"),N.textContent="Subject",D=k(),I=a("input"),T=k(),g=a("div"),L=a("label"),L.textContent="Message",w=k(),S=a("textarea"),y=k(),j=a("div"),A=a("button"),A.textContent="Cancel",F=k(),M=a("button"),q=P(b),r(c,"class","close-btn"),r(n,"class","modal-header"),r(f,"for","recipient"),h.__value="",G(h,h.__value),r(_,"id","recipient"),l[5].receiver_id===void 0&&ft(()=>l[19].call(_)),r(p,"class","form-group"),r(N,"for","subject"),r(I,"id","subject"),r(I,"type","text"),r(I,"placeholder","Subject..."),r(C,"class","form-group"),r(L,"for","message"),r(S,"id","message"),r(S,"rows","5"),r(S,"placeholder","Write your message..."),r(g,"class","form-group"),r(u,"class","modal-body"),r(A,"class","btn-secondary"),r(M,"class","btn-primary"),M.disabled=l[6],r(j,"class","modal-footer"),r(t,"class","modal-card"),r(e,"class","modal-backdrop")},m(J,z){O(J,e,z),o(e,t),o(t,n),o(n,s),o(n,i),o(n,c),o(t,d),o(t,u),o(u,p),o(p,f),o(p,m),o(p,_),o(_,h);for(let H=0;H<X.length;H+=1)X[H]&&X[H].m(_,null);Ze(_,l[5].receiver_id,!0),o(u,E),o(u,C),o(C,N),o(C,D),o(C,I),G(I,l[5].subject),o(u,T),o(u,g),o(g,L),o(g,w),o(g,S),G(S,l[5].body),o(t,y),o(t,j),o(j,A),o(j,F),o(j,M),o(M,q),v||(B=[U(c,"click",l[11]),U(_,"change",l[19]),U(I,"input",l[20]),U(S,"input",l[21]),U(A,"click",l[11]),U(M,"click",l[12])],v=!0)},p(J,z){if(z[0]&16){V=$(J[4]);let H;for(H=0;H<V.length;H+=1){const K=wn(J,V,H);X[H]?X[H].p(K,z):(X[H]=An(K),X[H].c(),X[H].m(_,null))}for(;H<X.length;H+=1)X[H].d(1);X.length=V.length}z[0]&48&&Ze(_,J[5].receiver_id),z[0]&48&&I.value!==J[5].subject&&G(I,J[5].subject),z[0]&48&&G(S,J[5].body),z[0]&64&&b!==(b=J[6]?"Sending...":"Send Message")&&Y(q,b),z[0]&64&&(M.disabled=J[6])},d(J){J&&R(e),me(X,J),v=!1,ce(B)}}}function An(l){let e,t=l[27].name+"",n,s,i=l[27].email+"",c,d,u;return{c(){e=a("option"),n=P(t),s=P(" ("),c=P(i),d=P(")"),e.__value=u=l[27].id,G(e,e.__value)},m(p,f){O(p,e,f),o(e,n),o(e,s),o(e,c),o(e,d)},p(p,f){f[0]&16&&t!==(t=p[27].name+"")&&Y(n,t),f[0]&16&&i!==(i=p[27].email+"")&&Y(c,i),f[0]&16&&u!==(u=p[27].id)&&(e.__value=u,G(e,e.__value))},d(p){p&&R(e)}}}function Dn(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C;return{c(){e=a("div"),t=a("div"),n=a("div"),s=a("h2"),s.textContent="Confirm Delete",i=k(),c=a("button"),c.textContent="√ó",d=k(),u=a("div"),u.innerHTML='<p class="delete-confirm-text">Are you sure you want to permanently delete this message?</p>',p=k(),f=a("div"),m=a("button"),m.textContent="Cancel",_=k(),h=a("button"),h.textContent="Yes, Delete",r(c,"class","close-btn"),r(n,"class","modal-header"),r(u,"class","modal-body"),r(m,"class","btn-secondary"),r(h,"class","btn-delete-confirm"),r(f,"class","modal-footer"),r(t,"class","modal-card delete-modal"),r(e,"class","modal-backdrop")},m(N,D){O(N,e,D),o(e,t),o(t,n),o(n,s),o(n,i),o(n,c),o(t,d),o(t,u),o(t,p),o(t,f),o(f,m),o(f,_),o(f,h),E||(C=[U(c,"click",l[14]),U(m,"click",l[14]),U(h,"click",l[15])],E=!0)},p:W,d(N){N&&R(e),E=!1,ce(C)}}}function js(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D,I;t=new st({props:{$$slots:{default:[Ds]},$$scope:{ctx:l}}});function T(F,M){return F[1]?Ls:F[0].length===0?Is:Ms}let g=T(l),L=g(l);function w(F,M){return F[2]?Ts:Ns}let S=w(l),y=S(l),j=l[3]&&Sn(l),A=l[7]&&Dn(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),i=a("div"),c=a("div"),d=a("button"),d.textContent="+ New Message",u=k(),L.c(),f=k(),m=a("div"),y.c(),h=k(),j&&j.c(),E=k(),A&&A.c(),C=ot(),r(d,"class","btn-primary full-width"),r(c,"class","inbox-toolbar"),r(i,"class",p="message-list-pane "+(l[2]?"hidden-mobile":"")),r(m,"class",_="message-detail-pane "+(l[2]?"visible-mobile":"")),r(s,"class","page-content inbox-layout"),r(e,"class","page-wrapper")},m(F,M){O(F,e,M),Ee(t,e,null),o(e,n),o(e,s),o(s,i),o(i,c),o(c,d),o(i,u),L.m(i,null),o(s,f),o(s,m),y.m(m,null),O(F,h,M),j&&j.m(F,M),O(F,E,M),A&&A.m(F,M),O(F,C,M),N=!0,D||(I=U(d,"click",l[10]),D=!0)},p(F,M){const b={};M[1]&4&&(b.$$scope={dirty:M,ctx:F}),t.$set(b),g===(g=T(F))&&L?L.p(F,M):(L.d(1),L=g(F),L&&(L.c(),L.m(i,null))),(!N||M[0]&4&&p!==(p="message-list-pane "+(F[2]?"hidden-mobile":"")))&&r(i,"class",p),S===(S=w(F))&&y?y.p(F,M):(y.d(1),y=S(F),y&&(y.c(),y.m(m,null))),(!N||M[0]&4&&_!==(_="message-detail-pane "+(F[2]?"visible-mobile":"")))&&r(m,"class",_),F[3]?j?j.p(F,M):(j=Sn(F),j.c(),j.m(E.parentNode,E)):j&&(j.d(1),j=null),F[7]?A?A.p(F,M):(A=Dn(F),A.c(),A.m(C.parentNode,C)):A&&(A.d(1),A=null)},i(F){N||(be(t.$$.fragment,F),N=!0)},o(F){ve(t.$$.fragment,F),N=!1},d(F){F&&(R(e),R(h),R(E),R(C)),Se(t),L.d(),y.d(),j&&j.d(F),A&&A.d(F),D=!1,I()}}}function Mn(l){return new Date(l).toLocaleString()}function Rs(l,e,t){let n=[],s=!0,i=null,c=!1,d=[],u={receiver_id:"",subject:"",body:""},p=!1;tt(async()=>{await f(),m()});async function f(){t(1,s=!0);try{const b=await fetch(`${te}/api/inbox`,{credentials:"include"});if(b.ok){const q=await b.json();t(0,n=q||[])}}catch(b){console.error(b)}finally{t(1,s=!1)}}async function m(){try{const b=await fetch(`${te}/api/employees`,{credentials:"include"});if(b.ok){const q=await b.json();t(4,d=q.map(v=>({id:v.id,name:v.name,email:v.email})))}}catch(b){console.error("Failed to load recipients",b)}}function _(b){t(2,i=b),b.is_read||(h(b.id),t(0,n=n.map(q=>q.id===b.id?{...q,is_read:!0}:q)))}async function h(b){try{await fetch(`${te}/api/inbox/${b}/read`,{method:"PUT",credentials:"include"})}catch(q){console.error(q)}}function E(){t(2,i=null)}function C(){t(5,u={receiver_id:"",subject:"",body:""}),t(3,c=!0)}function N(){t(3,c=!1)}async function D(){if(!(!u.receiver_id||!u.subject||!u.body)){t(6,p=!0);try{(await fetch(`${te}/api/inbox`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({receiver_id:parseInt(u.receiver_id),subject:u.subject,body:u.body})})).ok?(N(),alert("Message sent!")):alert("Failed to send message")}catch(b){console.error(b),alert("Error sending message")}finally{t(6,p=!1)}}}let I=!1,T=null;function g(b){T=b,t(7,I=!0)}function L(){t(7,I=!1),T=null}async function w(){if(T)try{(await fetch(`${te}/api/inbox/${T}`,{method:"DELETE",credentials:"include"})).ok?(t(0,n=n.filter(q=>q.id!==T)),t(2,i=null),t(7,I=!1),T=null):console.error("Failed to delete message")}catch(b){console.error(b)}}const S=b=>_(b),y=(b,q)=>q.key==="Enter"&&_(b),j=()=>g(i.id);function A(){u.receiver_id=Lt(this),t(5,u),t(4,d)}function F(){u.subject=this.value,t(5,u),t(4,d)}function M(){u.body=this.value,t(5,u),t(4,d)}return[n,s,i,c,d,u,p,I,_,E,C,N,D,g,L,w,S,y,j,A,F,M]}class Os extends Xe{constructor(e){super(),Je(this,e,Rs,js,Re,{},null,[-1,-1])}}function In(l,e,t){const n=l.slice();return n[10]=e[t],n}function Ln(l,e,t){const n=l.slice();return n[13]=e[t],n}function Ps(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>User Management</h1> <p>Kelola peran pengguna</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function qs(l){let e,t,n,s,i,c=$(l[3]),d=[];for(let u=0;u<c.length;u+=1)d[u]=Tn(In(l,c,u));return{c(){e=a("article"),t=a("table"),n=a("thead"),n.innerHTML="<tr><th>Code</th> <th>Name</th> <th>Email</th> <th>Roles</th> <th>Actions</th></tr>",s=k(),i=a("tbody");for(let u=0;u<d.length;u+=1)d[u].c();r(t,"class","table"),r(e,"class","card employees-card"),se(e,"margin-top","16px")},m(u,p){O(u,e,p),o(e,t),o(t,n),o(t,s),o(t,i);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(i,null)},p(u,p){if(p&56){c=$(u[3]);let f;for(f=0;f<c.length;f+=1){const m=In(u,c,f);d[f]?d[f].p(m,p):(d[f]=Tn(m),d[f].c(),d[f].m(i,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=c.length}},d(u){u&&R(e),me(d,u)}}}function Fs(l){let e,t;return{c(){e=a("div"),t=P(l[2]),r(e,"class","state error")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&4&&Y(t,n[2])},d(n){n&&R(e)}}}function Us(l){let e;return{c(){e=a("div"),e.textContent="Loading‚Ä¶",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Nn(l){let e,t,n,s,i=l[13]+"",c,d,u,p;function f(...m){return l[8](l[10],l[13],...m)}return{c(){e=a("label"),t=a("input"),s=k(),c=P(i),d=k(),r(t,"type","checkbox"),t.checked=n=Array.isArray(l[10].roles)&&l[10].roles.includes(l[13]),r(e,"class","small"),se(e,"margin-right","12px")},m(m,_){O(m,e,_),o(e,t),o(e,s),o(e,c),o(e,d),u||(p=U(t,"change",f),u=!0)},p(m,_){l=m,_&8&&n!==(n=Array.isArray(l[10].roles)&&l[10].roles.includes(l[13]))&&(t.checked=n)},d(m){m&&R(e),u=!1,p()}}}function Tn(l){let e,t,n=l[10].employee_code+"",s,i,c,d=l[10].name+"",u,p,f,m=l[10].email+"",_,h,E,C=(Array.isArray(l[10].roles)?l[10].roles.join(", "):"-")+"",N,D,I,T,g=$(l[5]),L=[];for(let w=0;w<g.length;w+=1)L[w]=Nn(Ln(l,g,w));return{c(){e=a("tr"),t=a("td"),s=P(n),i=k(),c=a("td"),u=P(d),p=k(),f=a("td"),_=P(m),h=k(),E=a("td"),N=P(C),D=k(),I=a("td");for(let w=0;w<L.length;w+=1)L[w].c();T=k(),r(I,"class","actions")},m(w,S){O(w,e,S),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),o(e,f),o(f,_),o(e,h),o(e,E),o(E,N),o(e,D),o(e,I);for(let y=0;y<L.length;y+=1)L[y]&&L[y].m(I,null);o(e,T)},p(w,S){if(S&8&&n!==(n=w[10].employee_code+"")&&Y(s,n),S&8&&d!==(d=w[10].name+"")&&Y(u,d),S&8&&m!==(m=w[10].email+"")&&Y(_,m),S&8&&C!==(C=(Array.isArray(w[10].roles)?w[10].roles.join(", "):"-")+"")&&Y(N,C),S&56){g=$(w[5]);let y;for(y=0;y<g.length;y+=1){const j=Ln(w,g,y);L[y]?L[y].p(j,S):(L[y]=Nn(j),L[y].c(),L[y].m(I,null))}for(;y<L.length;y+=1)L[y].d(1);L.length=g.length}},d(w){w&&R(e),me(L,w)}}}function Hs(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E;t=new st({props:{$$slots:{default:[Ps]},$$scope:{ctx:l}}});function C(I,T){return I[1]?Us:I[2]?Fs:qs}let N=C(l),D=N(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),i=a("section"),c=a("div"),d=a("div"),d.innerHTML='<h2>Users</h2> <p class="muted small">Kelola peran dan hak akses pengguna.</p>',u=k(),p=a("div"),f=a("input"),m=k(),D.c(),r(d,"class","employees-toolbar-text"),r(f,"type","text"),r(f,"class","input-search"),r(f,"placeholder","Cari nama, email, atau kode‚Ä¶"),r(p,"class","employees-toolbar-actions"),r(c,"class","employees-toolbar"),r(i,"class","employees-section"),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(I,T){O(I,e,T),Ee(t,e,null),o(e,n),o(e,s),o(s,i),o(i,c),o(c,d),o(c,u),o(c,p),o(p,f),G(f,l[0]),o(i,m),D.m(i,null),_=!0,h||(E=U(f,"input",l[7]),h=!0)},p(I,[T]){const g={};T&65536&&(g.$$scope={dirty:T,ctx:I}),t.$set(g),T&1&&f.value!==I[0]&&G(f,I[0]),N===(N=C(I))&&D?D.p(I,T):(D.d(1),D=N(I),D&&(D.c(),D.m(i,null)))},i(I){_||(be(t.$$.fragment,I),_=!0)},o(I){ve(t.$$.fragment,I),_=!1},d(I){I&&R(e),Se(t),D.d(),h=!1,E()}}}function Ys(l,e,t){let n,s=[],i=!1,c="",d="";async function u(){t(1,i=!0),t(2,c="");try{const h=await fetch(`${te}/api/employees`,{credentials:"include"});if(!h.ok)throw new Error("Failed to fetch users");const E=await h.json();t(6,s=Array.isArray(E)?E:[])}catch(h){t(2,c=(h==null?void 0:h.message)||"Failed to fetch users")}finally{t(1,i=!1)}}tt(u);async function p(h,E){try{const C={employee_code:h.employee_code,name:h.name,email:h.email,branch:h.branch,job_title:h.job_title,status:h.status,department:h.department,roles:E},N=await fetch(`${te}/api/employees/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(C)});if(!N.ok){const D=await N.text();throw new Error(D||"Failed to update roles")}await u()}catch(C){alert((C==null?void 0:C.message)||"Failed to update roles")}}const f=["ADMIN","HRD","IT","EMPLOYEE"];function m(){d=this.value,t(0,d)}const _=(h,E,C)=>{const N=C.target.checked,D=new Set(Array.isArray(h.roles)?h.roles:[]);N?D.add(E):D.delete(E),p(h,Array.from(D))};return l.$$.update=()=>{l.$$.dirty&65&&t(3,n=s.filter(h=>{const E=d.toLowerCase().trim();return E?(h.name||"").toLowerCase().includes(E)||(h.email||"").toLowerCase().includes(E)||(h.employee_code||"").toLowerCase().includes(E):!0}))},[d,i,c,n,p,f,s,m,_]}class Vs extends Xe{constructor(e){super(),Je(this,e,Ys,Hs,Re,{})}}function jn(l,e,t){const n=l.slice();return n[9]=e[t],n}function Rn(l,e,t){const n=l.slice();return n[12]=e[t],n}function Bs(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>Permissions</h1> <p>Kelola dan lihat izin yang dimiliki pengguna saat ini</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Js(l){let e,t,n,s,i,c,d,u=(l[1].length===0?"-":l[1].join(", "))+"",p,f,m,_,h,E,C;function N(T,g){return T[4].length===0?zs:Qs}let D=N(l),I=D(l);return{c(){e=a("section"),t=a("div"),n=a("div"),s=a("h2"),s.textContent="Permission Overview",i=k(),c=a("p"),d=P("Roles: "),p=P(u),f=k(),m=a("div"),_=a("input"),h=k(),I.c(),r(c,"class","muted small"),r(n,"class","employees-toolbar-text"),r(_,"type","text"),r(_,"class","input-search"),r(_,"placeholder","Search permission‚Ä¶"),r(m,"class","employees-toolbar-actions"),r(t,"class","employees-toolbar"),r(e,"class","employees-section")},m(T,g){O(T,e,g),o(e,t),o(t,n),o(n,s),o(n,i),o(n,c),o(c,d),o(c,p),o(t,f),o(t,m),o(m,_),G(_,l[0]),o(e,h),I.m(e,null),E||(C=U(_,"input",l[7]),E=!0)},p(T,g){g&2&&u!==(u=(T[1].length===0?"-":T[1].join(", "))+"")&&Y(p,u),g&1&&_.value!==T[0]&&G(_,T[0]),D===(D=N(T))&&I?I.p(T,g):(I.d(1),I=D(T),I&&(I.c(),I.m(e,null)))},d(T){T&&R(e),I.d(),E=!1,C()}}}function Xs(l){let e,t;return{c(){e=a("div"),t=P(l[3]),r(e,"class","state error")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&8&&Y(t,n[3])},d(n){n&&R(e)}}}function Gs(l){let e;return{c(){e=a("div"),e.textContent="Loading‚Ä¶",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Qs(l){let e,t=$(l[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Pn(jn(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ot()},m(s,i){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(s,i);O(s,e,i)},p(s,i){if(i&16){t=$(s[4]);let c;for(c=0;c<t.length;c+=1){const d=jn(s,t,c);n[c]?n[c].p(d,i):(n[c]=Pn(d),n[c].c(),n[c].m(e.parentNode,e))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(s){s&&R(e),me(n,s)}}}function zs(l){let e;return{c(){e=a("div"),e.textContent="No permissions",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function On(l){let e,t=l[12]+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","pill-perm svelte-l2wu6h")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&16&&t!==(t=s[12]+"")&&Y(n,t)},d(s){s&&R(e)}}}function Pn(l){let e,t,n,s=l[9].code+"",i,c,d,u,p,f=$(l[9].items),m=[];for(let _=0;_<f.length;_+=1)m[_]=On(Rn(l,f,_));return{c(){e=a("article"),t=a("div"),n=a("h3"),i=P(s),c=k(),d=a("div"),u=a("div");for(let _=0;_<m.length;_+=1)m[_].c();p=k(),r(n,"class","svelte-l2wu6h"),r(t,"class","card-header svelte-l2wu6h"),r(u,"class","perm-grid svelte-l2wu6h"),r(d,"class","card-body"),r(e,"class","card employees-card"),se(e,"margin-bottom","12px")},m(_,h){O(_,e,h),o(e,t),o(t,n),o(n,i),o(e,c),o(e,d),o(d,u);for(let E=0;E<m.length;E+=1)m[E]&&m[E].m(u,null);o(e,p)},p(_,h){if(h&16&&s!==(s=_[9].code+"")&&Y(i,s),h&16){f=$(_[9].items);let E;for(E=0;E<f.length;E+=1){const C=Rn(_,f,E);m[E]?m[E].p(C,h):(m[E]=On(C),m[E].c(),m[E].m(u,null))}for(;E<m.length;E+=1)m[E].d(1);m.length=f.length}},d(_){_&&R(e),me(m,_)}}}function Ks(l){let e,t,n,s,i;t=new st({props:{$$slots:{default:[Bs]},$$scope:{ctx:l}}});function c(p,f){return p[2]?Gs:p[3]?Xs:Js}let d=c(l),u=d(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),u.c(),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(p,f){O(p,e,f),Ee(t,e,null),o(e,n),o(e,s),u.m(s,null),i=!0},p(p,[f]){const m={};f&32768&&(m.$$scope={dirty:f,ctx:p}),t.$set(m),d===(d=c(p))&&u?u.p(p,f):(u.d(1),u=d(p),u&&(u.c(),u.m(s,null)))},i(p){i||(be(t.$$.fragment,p),i=!0)},o(p){ve(t.$$.fragment,p),i=!1},d(p){p&&R(e),Se(t),u.d()}}}function Ws(l){const e=new Map;for(const t of l){const n=String(t).split("_")[0]||"GENERAL";e.has(n)||e.set(n,[]),e.get(n).push(t)}return Array.from(e.entries()).map(([t,n])=>({code:t,items:n}))}function Zs(l,e,t){let n,s,i=[],c=[],d=!1,u="",p="";async function f(){t(2,d=!0),t(3,u="");try{const _=await fetch(`${te}/api/me/permissions`,{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch permissions");const h=await _.json();t(1,i=h.roles||[]),t(5,c=h.permissions||[])}catch(_){t(3,u=(_==null?void 0:_.message)||"Failed to fetch permissions")}finally{t(2,d=!1)}}tt(f);function m(){p=this.value,t(0,p)}return l.$$.update=()=>{l.$$.dirty&33&&t(6,n=c.filter(_=>p?String(_).toLowerCase().includes(p.toLowerCase()):!0).sort((_,h)=>String(_).localeCompare(String(h)))),l.$$.dirty&64&&t(4,s=Ws(n))},[p,i,d,u,s,c,n,m]}class $s extends Xe{constructor(e){super(),Je(this,e,Zs,Ks,Re,{})}}function qn(l,e,t){const n=l.slice();return n[21]=e[t],n}function xs(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>Announcements</h1> <p>Informasi dan pengumuman terbaru perusahaan</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function ea(l){let e,t,n,s,i,c,d=$(l[6]),u=[];for(let p=0;p<d.length;p+=1)u[p]=Fn(qn(l,d,p));return{c(){e=a("div"),t=a("button"),t.textContent="+ New Announcement",n=k(),s=a("ul");for(let p=0;p<u.length;p+=1)u[p].c();r(t,"class","btn-primary"),r(e,"class","toolbar-actions"),se(e,"display","flex"),se(e,"justify-content","flex-end"),se(e,"margin-bottom","12px"),r(s,"class","announcement-list")},m(p,f){O(p,e,f),o(e,t),O(p,n,f),O(p,s,f);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(s,null);i||(c=U(t,"click",l[7]),i=!0)},p(p,f){if(f&832){d=$(p[6]);let m;for(m=0;m<d.length;m+=1){const _=qn(p,d,m);u[m]?u[m].p(_,f):(u[m]=Fn(_),u[m].c(),u[m].m(s,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=d.length}},d(p){p&&(R(e),R(n),R(s)),me(u,p),i=!1,c()}}}function ta(l){let e;return{c(){e=a("div"),e.textContent="No announcements found.",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function la(l){let e,t;return{c(){e=a("div"),t=P(l[2]),r(e,"class","state error")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&4&&Y(t,n[2])},d(n){n&&R(e)}}}function na(l){let e;return{c(){e=a("div"),e.textContent="Loading‚Ä¶",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Fn(l){let e,t,n=l[21].title+"",s,i,c,d=l[21].content+"",u,p,f,m=new Date(l[21].created_at).toLocaleString()+"",_,h,E,C,N,D,I,T,g;function L(){return l[14](l[21])}function w(){return l[15](l[21])}return{c(){e=a("li"),t=a("h3"),s=P(n),i=k(),c=a("p"),u=P(d),p=k(),f=a("span"),_=P(m),h=k(),E=a("div"),C=a("button"),C.textContent="Edit",N=k(),D=a("button"),D.textContent="Delete",I=k(),r(t,"class","ann-title"),r(c,"class","ann-content"),r(f,"class","ann-date"),r(C,"class","btn"),r(D,"class","btn danger"),se(D,"margin-left","8px"),se(E,"margin-top","8px"),r(e,"class","ann-item")},m(S,y){O(S,e,y),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),o(e,f),o(f,_),o(e,h),o(e,E),o(E,C),o(E,N),o(E,D),o(e,I),T||(g=[U(C,"click",L),U(D,"click",w)],T=!0)},p(S,y){l=S,y&64&&n!==(n=l[21].title+"")&&Y(s,n),y&64&&d!==(d=l[21].content+"")&&Y(u,d),y&64&&m!==(m=new Date(l[21].created_at).toLocaleString()+"")&&Y(_,m)},d(S){S&&R(e),T=!1,ce(g)}}}function Un(l){let e,t,n,s,i=l[4]?"Edit Announcement":"New Announcement",c,d,u,p,f,m,_,h,E,C,N,D,I,T,g,L,w,S,y;return{c(){e=a("div"),t=a("div"),n=a("header"),s=a("h2"),c=P(i),d=k(),u=a("div"),p=a("div"),f=a("label"),m=P(`Title
            `),_=a("input"),h=k(),E=a("div"),C=a("label"),N=P(`Content
            `),D=a("textarea"),I=k(),T=a("footer"),g=a("button"),g.textContent="Cancel",L=k(),w=a("button"),w.textContent="Save",r(n,"class","modal-header"),r(_,"type","text"),r(_,"class","form-control"),r(p,"class","form-row"),r(D,"rows","4"),r(D,"class","form-control"),r(E,"class","form-row"),r(u,"class","modal-body"),r(g,"class","btn"),r(w,"class","btn-primary"),r(T,"class","modal-footer"),r(t,"class","modal"),r(t,"role","dialog"),r(t,"aria-modal","true"),r(e,"class","modal-overlay")},m(j,A){O(j,e,A),o(e,t),o(t,n),o(n,s),o(s,c),o(t,d),o(t,u),o(u,p),o(p,f),o(f,m),o(f,_),G(_,l[5].title),o(u,h),o(u,E),o(E,C),o(C,N),o(C,D),G(D,l[5].content),o(t,I),o(t,T),o(T,g),o(T,L),o(T,w),S||(y=[U(_,"input",l[16]),U(D,"input",l[17]),U(g,"click",l[18]),U(w,"click",l[10]),U(t,"click",mt(l[12])),U(e,"click",l[19])],S=!0)},p(j,A){A&16&&i!==(i=j[4]?"Edit Announcement":"New Announcement")&&Y(c,i),A&32&&_.value!==j[5].title&&G(_,j[5].title),A&32&&G(D,j[5].content)},d(j){j&&R(e),S=!1,ce(y)}}}function oa(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C,N,D;t=new st({props:{$$slots:{default:[xs]},$$scope:{ctx:l}}});function I(w,S){return w[1]?na:w[2]?la:w[6].length===0?ta:ea}let T=I(l),g=T(l),L=l[3]&&Un(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),i=a("section"),c=a("div"),d=a("div"),d.innerHTML='<h2>Latest Announcements</h2> <p class="muted small">Cari pengumuman berdasarkan judul atau isi.</p>',u=k(),p=a("div"),f=a("input"),m=k(),_=a("article"),g.c(),h=k(),L&&L.c(),E=ot(),r(d,"class","employees-toolbar-text"),r(f,"type","text"),r(f,"class","input-search"),r(f,"placeholder","Search announcements‚Ä¶"),se(f,"margin-bottom","12px"),r(p,"class","employees-toolbar-actions"),r(c,"class","employees-toolbar"),r(_,"class","card employees-card"),r(i,"class","employees-section"),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(w,S){O(w,e,S),Ee(t,e,null),o(e,n),o(e,s),o(s,i),o(i,c),o(c,d),o(c,u),o(c,p),o(p,f),G(f,l[0]),o(i,m),o(i,_),g.m(_,null),O(w,h,S),L&&L.m(w,S),O(w,E,S),C=!0,N||(D=U(f,"input",l[13]),N=!0)},p(w,[S]){const y={};S&16777216&&(y.$$scope={dirty:S,ctx:w}),t.$set(y),S&1&&f.value!==w[0]&&G(f,w[0]),T===(T=I(w))&&g?g.p(w,S):(g.d(1),g=T(w),g&&(g.c(),g.m(_,null))),w[3]?L?L.p(w,S):(L=Un(w),L.c(),L.m(E.parentNode,E)):L&&(L.d(1),L=null)},i(w){C||(be(t.$$.fragment,w),C=!0)},o(w){ve(t.$$.fragment,w),C=!1},d(w){w&&(R(e),R(h),R(E)),Se(t),g.d(),L&&L.d(w),N=!1,D()}}}function sa(l,e,t){let n,s=[],i=!1,c="",d="",u=!1,p=null,f={title:"",content:""};async function m(){t(1,i=!0),t(2,c="");try{const y=await fetch(`${te}/api/announcements`,{credentials:"include"});if(!y.ok)throw new Error("Failed to fetch announcements");const j=await y.json(),A=JSON.parse(localStorage.getItem("announcements_local")||"[]"),F=new Map;[...j,...A].forEach(M=>{const b=M.id||M.local_id,q=F.get(b);(!q||M.updated_at&&(!q.updated_at||M.updated_at>q.updated_at))&&F.set(b,M)}),t(11,s=Array.from(F.values()))}catch(y){t(2,c=(y==null?void 0:y.message)||"Failed to fetch announcements"),t(11,s=JSON.parse(localStorage.getItem("announcements_local")||"[]"))}finally{t(1,i=!1)}}tt(m);function _(){t(4,p=null),t(5,f={title:"",content:""}),t(3,u=!0)}function h(y){t(4,p=y),t(5,f={title:y.title||"",content:y.content||""}),t(3,u=!0)}async function E(y){try{if(!(await fetch(`${te}/api/announcements/${y.id}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("server delete failed");await m()}catch{const F=JSON.parse(localStorage.getItem("announcements_local")||"[]").filter(M=>(M.id||M.local_id)!==(y.id||y.local_id));localStorage.setItem("announcements_local",JSON.stringify(F)),await m()}}async function C(){try{const y=p?"PUT":"POST",j=p?`${te}/api/announcements/${p.id}`:`${te}/api/announcements`;if((await fetch(j,{method:y,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)})).ok)await m(),t(3,u=!1);else{const F=new Date().toISOString(),M=JSON.parse(localStorage.getItem("announcements_local")||"[]");if(p&&p.id){const b=M.findIndex(q=>q.id===p.id||q.local_id===p.id);b>=0?M[b]={...M[b],title:f.title,content:f.content,updated_at:F}:M.push({local_id:`local-${Date.now()}`,title:f.title,content:f.content,created_at:F,updated_at:F})}else M.push({local_id:`local-${Date.now()}`,title:f.title,content:f.content,created_at:F,updated_at:F});localStorage.setItem("announcements_local",JSON.stringify(M)),await m(),t(3,u=!1)}}catch{const j=new Date().toISOString(),A=JSON.parse(localStorage.getItem("announcements_local")||"[]");A.push({local_id:`local-${Date.now()}`,title:f.title,content:f.content,created_at:j,updated_at:j}),localStorage.setItem("announcements_local",JSON.stringify(A)),await m(),t(3,u=!1)}}function N(y){et.call(this,l,y)}function D(){d=this.value,t(0,d)}const I=y=>h(y),T=y=>E(y);function g(){f.title=this.value,t(5,f)}function L(){f.content=this.value,t(5,f)}const w=()=>t(3,u=!1),S=()=>t(3,u=!1);return l.$$.update=()=>{l.$$.dirty&2049&&t(6,n=s.filter(y=>d?(y.title||"").toLowerCase().includes(d.toLowerCase())||(y.content||"").toLowerCase().includes(d.toLowerCase()):!0).sort((y,j)=>new Date(j.created_at)-new Date(y.created_at)))},[d,i,c,u,p,f,n,_,h,E,C,s,N,D,I,T,g,L,w,S]}class aa extends Xe{constructor(e){super(),Je(this,e,sa,oa,Re,{})}}function Hn(l,e,t){const n=l.slice();return n[13]=e[t],n}function Yn(l,e,t){const n=l.slice();return n[16]=e[t],n}function ia(l){let e;return{c(){e=a("div"),e.innerHTML="<h1>Reports</h1> <p>Ringkasan status request karyawan</p>"},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function ra(l){let e,t,n,s,i,c,d,u,p,f,m,_,h,E,C=l[0].total+"",N,D,I,T,g,L,w=l[0].pending+"",S,y,j,A,F,M,b=l[0].approved+"",q,v,B,V,X,J,z=l[0].rejected+"",H,K,x,ye,ne,de,ae,oe,he,le=l[1].working_days+"",ue,Ie,ge,De,Oe,ie,pe=l[1].present+"",Pe,$e,Fe,Le,ze,qe,Ge=l[1].on_time+"",Ve,we,Ue,Be,Te,Z,fe=l[1].late+"",ke,Ke,Qe,We,at,xe,lt,it,rt,Q=$(l[6]),re=[];for(let ee=0;ee<Q.length;ee+=1)re[ee]=Vn(Yn(l,Q,ee));function Me(ee,_e){return ee[5].length===0?da:fa}let He=Me(l),je=He(l);return{c(){e=a("div"),t=a("div"),n=a("label"),n.textContent="Filter Bulan",s=k(),i=a("select");for(let ee=0;ee<re.length;ee+=1)re[ee].c();c=k(),d=a("div"),u=a("button"),u.textContent="Download Excel",p=k(),f=a("div"),m=a("div"),_=a("p"),_.textContent="Total Requests",h=k(),E=a("p"),N=P(C),D=k(),I=a("div"),T=a("p"),T.textContent="Pending",g=k(),L=a("p"),S=P(w),y=k(),j=a("div"),A=a("p"),A.textContent="Approved",F=k(),M=a("p"),q=P(b),v=k(),B=a("div"),V=a("p"),V.textContent="Rejected",X=k(),J=a("p"),H=P(z),K=k(),x=a("h3"),x.textContent="Attendance Summary",ye=k(),ne=a("div"),de=a("div"),ae=a("p"),ae.textContent="Working Days",oe=k(),he=a("p"),ue=P(le),Ie=k(),ge=a("div"),De=a("p"),De.textContent="Present",Oe=k(),ie=a("p"),Pe=P(pe),$e=k(),Fe=a("div"),Le=a("p"),Le.textContent="On Time",ze=k(),qe=a("p"),Ve=P(Ge),we=k(),Ue=a("div"),Be=a("p"),Be.textContent="Late",Te=k(),Z=a("p"),ke=P(fe),Ke=k(),Qe=a("div"),We=a("table"),at=a("thead"),at.innerHTML="<tr><th>ID</th> <th>Employee</th> <th>Type</th> <th>Start</th> <th>End</th> <th>Status</th> <th>Approver</th> <th>Updated</th></tr>",xe=k(),lt=a("tbody"),je.c(),se(n,"font-size","0.85rem"),se(n,"color","var(--text-muted)"),r(i,"class","form-control"),se(i,"margin-left","8px"),se(i,"min-width","180px"),l[4]===void 0&&ft(()=>l[9].call(i)),r(u,"class","btn"),r(e,"class","toolbar"),se(e,"display","flex"),se(e,"justify-content","space-between"),se(e,"align-items","center"),se(e,"margin-bottom","12px"),r(_,"class","report-label svelte-7vlw2o"),r(E,"class","report-value svelte-7vlw2o"),r(m,"class","report-card svelte-7vlw2o"),r(T,"class","report-label svelte-7vlw2o"),r(L,"class","report-value svelte-7vlw2o"),r(I,"class","report-card svelte-7vlw2o"),r(A,"class","report-label svelte-7vlw2o"),r(M,"class","report-value svelte-7vlw2o"),r(j,"class","report-card svelte-7vlw2o"),r(V,"class","report-label svelte-7vlw2o"),r(J,"class","report-value svelte-7vlw2o"),r(B,"class","report-card svelte-7vlw2o"),r(f,"class","report-grid svelte-7vlw2o"),se(x,"margin-top","16px"),r(ae,"class","report-label svelte-7vlw2o"),r(he,"class","report-value svelte-7vlw2o"),r(de,"class","report-card svelte-7vlw2o"),r(De,"class","report-label svelte-7vlw2o"),r(ie,"class","report-value svelte-7vlw2o"),r(ge,"class","report-card svelte-7vlw2o"),r(Le,"class","report-label svelte-7vlw2o"),r(qe,"class","report-value svelte-7vlw2o"),r(Fe,"class","report-card svelte-7vlw2o"),r(Be,"class","report-label svelte-7vlw2o"),r(Z,"class","report-value svelte-7vlw2o"),r(Ue,"class","report-card svelte-7vlw2o"),r(ne,"class","report-grid svelte-7vlw2o"),r(We,"class","employees-table"),r(Qe,"class","table-wrap"),se(Qe,"margin-top","16px")},m(ee,_e){O(ee,e,_e),o(e,t),o(t,n),o(t,s),o(t,i);for(let Ce=0;Ce<re.length;Ce+=1)re[Ce]&&re[Ce].m(i,null);Ze(i,l[4],!0),o(e,c),o(e,d),o(d,u),O(ee,p,_e),O(ee,f,_e),o(f,m),o(m,_),o(m,h),o(m,E),o(E,N),o(f,D),o(f,I),o(I,T),o(I,g),o(I,L),o(L,S),o(f,y),o(f,j),o(j,A),o(j,F),o(j,M),o(M,q),o(f,v),o(f,B),o(B,V),o(B,X),o(B,J),o(J,H),O(ee,K,_e),O(ee,x,_e),O(ee,ye,_e),O(ee,ne,_e),o(ne,de),o(de,ae),o(de,oe),o(de,he),o(he,ue),o(ne,Ie),o(ne,ge),o(ge,De),o(ge,Oe),o(ge,ie),o(ie,Pe),o(ne,$e),o(ne,Fe),o(Fe,Le),o(Fe,ze),o(Fe,qe),o(qe,Ve),o(ne,we),o(ne,Ue),o(Ue,Be),o(Ue,Te),o(Ue,Z),o(Z,ke),O(ee,Ke,_e),O(ee,Qe,_e),o(Qe,We),o(We,at),o(We,xe),o(We,lt),je.m(lt,null),it||(rt=[U(i,"change",l[9]),U(i,"change",l[7]),U(u,"click",l[8])],it=!0)},p(ee,_e){if(_e&64){Q=$(ee[6]);let Ce;for(Ce=0;Ce<Q.length;Ce+=1){const pt=Yn(ee,Q,Ce);re[Ce]?re[Ce].p(pt,_e):(re[Ce]=Vn(pt),re[Ce].c(),re[Ce].m(i,null))}for(;Ce<re.length;Ce+=1)re[Ce].d(1);re.length=Q.length}_e&80&&Ze(i,ee[4]),_e&1&&C!==(C=ee[0].total+"")&&Y(N,C),_e&1&&w!==(w=ee[0].pending+"")&&Y(S,w),_e&1&&b!==(b=ee[0].approved+"")&&Y(q,b),_e&1&&z!==(z=ee[0].rejected+"")&&Y(H,z),_e&2&&le!==(le=ee[1].working_days+"")&&Y(ue,le),_e&2&&pe!==(pe=ee[1].present+"")&&Y(Pe,pe),_e&2&&Ge!==(Ge=ee[1].on_time+"")&&Y(Ve,Ge),_e&2&&fe!==(fe=ee[1].late+"")&&Y(ke,fe),He===(He=Me(ee))&&je?je.p(ee,_e):(je.d(1),je=He(ee),je&&(je.c(),je.m(lt,null)))},d(ee){ee&&(R(e),R(p),R(f),R(K),R(x),R(ye),R(ne),R(Ke),R(Qe)),me(re,ee),je.d(),it=!1,ce(rt)}}}function ca(l){let e,t;return{c(){e=a("div"),t=P(l[3]),r(e,"class","state error")},m(n,s){O(n,e,s),o(e,t)},p(n,s){s&8&&Y(t,n[3])},d(n){n&&R(e)}}}function ua(l){let e;return{c(){e=a("div"),e.textContent="Loading report‚Ä¶",r(e,"class","state muted")},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Vn(l){let e,t=l[16].label+"",n,s;return{c(){e=a("option"),n=P(t),e.__value=s=l[16].value,G(e,e.__value)},m(i,c){O(i,e,c),o(e,n)},p(i,c){c&64&&t!==(t=i[16].label+"")&&Y(n,t),c&64&&s!==(s=i[16].value)&&(e.__value=s,G(e,e.__value))},d(i){i&&R(e)}}}function fa(l){let e,t=$(l[5]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Bn(Hn(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ot()},m(s,i){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(s,i);O(s,e,i)},p(s,i){if(i&32){t=$(s[5]);let c;for(c=0;c<t.length;c+=1){const d=Hn(s,t,c);n[c]?n[c].p(d,i):(n[c]=Bn(d),n[c].c(),n[c].m(e.parentNode,e))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(s){s&&R(e),me(n,s)}}}function da(l){let e;return{c(){e=a("tr"),e.innerHTML='<td colspan="8" style="text-align:center; color:var(--text-muted);">Tidak ada data</td>'},m(t,n){O(t,e,n)},p:W,d(t){t&&R(e)}}}function Bn(l){let e,t,n=l[13].id+"",s,i,c,d=l[13].user_name+"",u,p,f,m=l[13].type+"",_,h,E,C=new Date(l[13].start_date).toLocaleDateString()+"",N,D,I,T=new Date(l[13].end_date).toLocaleDateString()+"",g,L,w,S=l[13].status+"",y,j,A,F=l[13].approver_name+"",M,b,q,v=new Date(l[13].updated_at).toLocaleString()+"",B,V;return{c(){e=a("tr"),t=a("td"),s=P(n),i=k(),c=a("td"),u=P(d),p=k(),f=a("td"),_=P(m),h=k(),E=a("td"),N=P(C),D=k(),I=a("td"),g=P(T),L=k(),w=a("td"),y=P(S),j=k(),A=a("td"),M=P(F),b=k(),q=a("td"),B=P(v),V=k()},m(X,J){O(X,e,J),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),o(e,f),o(f,_),o(e,h),o(e,E),o(E,N),o(e,D),o(e,I),o(I,g),o(e,L),o(e,w),o(w,y),o(e,j),o(e,A),o(A,M),o(e,b),o(e,q),o(q,B),o(e,V)},p(X,J){J&32&&n!==(n=X[13].id+"")&&Y(s,n),J&32&&d!==(d=X[13].user_name+"")&&Y(u,d),J&32&&m!==(m=X[13].type+"")&&Y(_,m),J&32&&C!==(C=new Date(X[13].start_date).toLocaleDateString()+"")&&Y(N,C),J&32&&T!==(T=new Date(X[13].end_date).toLocaleDateString()+"")&&Y(g,T),J&32&&S!==(S=X[13].status+"")&&Y(y,S),J&32&&F!==(F=X[13].approver_name+"")&&Y(M,F),J&32&&v!==(v=new Date(X[13].updated_at).toLocaleString()+"")&&Y(B,v)},d(X){X&&R(e)}}}function pa(l){let e,t,n,s,i,c;t=new st({props:{$$slots:{default:[ia]},$$scope:{ctx:l}}});function d(f,m){return f[2]?ua:f[3]?ca:ra}let u=d(l),p=u(l);return{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("div"),i=a("article"),p.c(),r(i,"class","card"),r(s,"class","page-content"),r(e,"class","page-wrapper")},m(f,m){O(f,e,m),Ee(t,e,null),o(e,n),o(e,s),o(s,i),p.m(i,null),c=!0},p(f,[m]){const _={};m&524288&&(_.$$scope={dirty:m,ctx:f}),t.$set(_),u===(u=d(f))&&p?p.p(f,m):(p.d(1),p=u(f),p&&(p.c(),p.m(i,null)))},i(f){c||(be(t.$$.fragment,f),c=!0)},o(f){ve(t.$$.fragment,f),c=!1},d(f){f&&R(e),Se(t),p.d()}}}function _a(l){const e=[],t=new Date;for(let n=0;n<l;n++){const s=new Date(t.getFullYear(),t.getMonth()-n,1),i=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`,c=s.toLocaleDateString("id-ID",{month:"long",year:"numeric"});e.push({value:i,label:c})}return e}function ma(l,e,t){let n={total:0,pending:0,approved:0,rejected:0},s={present:0,on_time:0,late:0,absent:0,working_days:0},i=!1,c="",d=new Date().toISOString().slice(0,7),u=[],p=[];async function f(){t(2,i=!0),t(3,c="");try{const N=await fetch(`${te}/api/requests/summary?month=${encodeURIComponent(d)}`,{credentials:"include"});if(N.ok){const D=await N.json();t(0,n={total:Number(D.total||0),pending:Number(D.pending||0),approved:Number(D.approved||0),rejected:Number(D.rejected||0)});const[I,T]=d.split("-"),g=`${I}-${T}-01`,L=new Date(Number(I),Number(T),1),w=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}-01`,S=await fetch(`${te}/api/attendance/summary?from=${encodeURIComponent(g)}&to=${encodeURIComponent(w)}`,{credentials:"include"});if(S.ok){const y=await S.json();t(1,s={present:Number(y.present||0),on_time:Number(y.on_time||0),late:Number(y.late||0),absent:Number(y.absent||0),working_days:Number(y.working_days||0)})}}else t(3,c="Failed to load summary")}catch(N){t(3,c=(N==null?void 0:N.message)||"Failed to load summary")}finally{t(2,i=!1)}}async function m(){try{const N=await fetch(`${te}/api/requests/processed?month=${encodeURIComponent(d)}`,{credentials:"include"});if(N.ok){const D=await N.json();t(5,u=Array.isArray(D)?D:[])}else t(5,u=[])}catch{t(5,u=[])}}let _=!1;async function h(N){var I;N&&typeof N.stopPropagation=="function"&&N.stopPropagation(),N&&typeof N.preventDefault=="function"&&N.preventDefault();const D=((I=N==null?void 0:N.target)==null?void 0:I.value)||d;if(!_){_=!0,t(4,d=D);try{await f(),await m();const T=document.querySelector(".sidebar");T&&(T.style.pointerEvents="auto");const g=document.querySelector(".logout-modal-backdrop");g&&g.remove(),document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()}finally{_=!1}}}async function E(){const N=`${te}/api/requests/processed/export?month=${encodeURIComponent(d)}`,D=document.createElement("a");D.href=N,D.download=`requests_${d}.xlsx`,document.body.appendChild(D),D.click(),document.body.removeChild(D)}tt(async()=>{t(6,p=_a(12)),await Promise.all([f(),m()])});function C(){d=Lt(this),t(4,d),t(6,p)}return[n,s,i,c,d,u,p,h,E,C]}class ha extends Xe{constructor(e){super(),Je(this,e,ma,pa,Re,{})}}function Jn(l,e,t){const n=l.slice();return n[19]=e[t],n}function Xn(l,e,t){const n=l.slice();return n[22]=e[t],n}function Gn(l){let e,t,n,s=(l[1].name||"Employee")+"",i,c,d,u,p=(l[1].email||"")+"",f,m,_,h=l[1].roles&&l[1].roles.length>0&&Qn(l);return{c(){e=a("div"),t=a("p"),n=P("Hello, "),i=P(s),c=P("!"),d=k(),u=a("p"),f=P(p),m=k(),_=a("p"),h&&h.c(),r(t,"class","sidebar-user-hi"),r(u,"class","sidebar-user-email"),r(_,"class","sidebar-user-role"),r(e,"class","sidebar-user")},m(E,C){O(E,e,C),o(e,t),o(t,n),o(t,i),o(t,c),o(e,d),o(e,u),o(u,f),o(e,m),o(e,_),h&&h.m(_,null)},p(E,C){C&2&&s!==(s=(E[1].name||"Employee")+"")&&Y(i,s),C&2&&p!==(p=(E[1].email||"")+"")&&Y(f,p),E[1].roles&&E[1].roles.length>0?h?h.p(E,C):(h=Qn(E),h.c(),h.m(_,null)):h&&(h.d(1),h=null)},d(E){E&&R(e),h&&h.d()}}}function Qn(l){let e,t=l[1].roles[0]+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","role-badge")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&2&&t!==(t=s[1].roles[0]+"")&&Y(n,t)},d(s){s&&R(e)}}}function ba(l){let e,t,n=l[7](l[19].icon)+"",s,i,c,d=l[19].name+"",u,p,f,m,_,h=l[19].code==="INBOX"&&l[4]>0&&zn(l);function E(){return l[11](l[19])}return{c(){e=a("button"),t=a("span"),s=P(n),i=k(),c=a("span"),u=P(d),p=k(),h&&h.c(),f=k(),r(t,"class","nav-icon"),r(c,"class","nav-label"),r(e,"class","nav-item"),ut(e,"nav-item-active",l[0].toLowerCase()===l[19].code.toLowerCase())},m(C,N){O(C,e,N),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),h&&h.m(e,null),o(e,f),m||(_=U(e,"click",E),m=!0)},p(C,N){l=C,N&4&&n!==(n=l[7](l[19].icon)+"")&&Y(s,n),N&4&&d!==(d=l[19].name+"")&&Y(u,d),l[19].code==="INBOX"&&l[4]>0?h?h.p(l,N):(h=zn(l),h.c(),h.m(e,f)):h&&(h.d(1),h=null),N&5&&ut(e,"nav-item-active",l[0].toLowerCase()===l[19].code.toLowerCase())},d(C){C&&R(e),h&&h.d(),m=!1,_()}}}function va(l){let e,t,n,s=l[7](l[19].icon)+"",i,c,d,u=l[19].name+"",p,f,m,_=l[3][l[19].code]?"‚ñº":"‚ñ∂",h,E,C,N,D;function I(){return l[9](l[19])}let T=l[3][l[19].code]&&Kn(l);return{c(){e=a("div"),t=a("button"),n=a("span"),i=P(s),c=k(),d=a("span"),p=P(u),f=k(),m=a("span"),h=P(_),E=k(),T&&T.c(),C=k(),r(n,"class","nav-icon"),r(d,"class","nav-label"),r(m,"class","nav-arrow"),r(t,"class","nav-item nav-parent"),ut(t,"expanded",l[3][l[19].code]),r(e,"class","nav-group")},m(g,L){O(g,e,L),o(e,t),o(t,n),o(n,i),o(t,c),o(t,d),o(d,p),o(t,f),o(t,m),o(m,h),o(e,E),T&&T.m(e,null),o(e,C),N||(D=U(t,"click",I),N=!0)},p(g,L){l=g,L&4&&s!==(s=l[7](l[19].icon)+"")&&Y(i,s),L&4&&u!==(u=l[19].name+"")&&Y(p,u),L&12&&_!==(_=l[3][l[19].code]?"‚ñº":"‚ñ∂")&&Y(h,_),L&12&&ut(t,"expanded",l[3][l[19].code]),l[3][l[19].code]?T?T.p(l,L):(T=Kn(l),T.c(),T.m(e,C)):T&&(T.d(1),T=null)},d(g){g&&R(e),T&&T.d(),N=!1,D()}}}function zn(l){let e,t=(l[4]>99?"99+":l[4])+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","nav-badge")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&16&&t!==(t=(s[4]>99?"99+":s[4])+"")&&Y(n,t)},d(s){s&&R(e)}}}function Kn(l){let e,t=$(l[19].children),n=[];for(let s=0;s<t.length;s+=1)n[s]=Zn(Xn(l,t,s));return{c(){e=a("div");for(let s=0;s<n.length;s+=1)n[s].c();r(e,"class","nav-children")},m(s,i){O(s,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(s,i){if(i&213){t=$(s[19].children);let c;for(c=0;c<t.length;c+=1){const d=Xn(s,t,c);n[c]?n[c].p(d,i):(n[c]=Zn(d),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(s){s&&R(e),me(n,s)}}}function Wn(l){let e,t=(l[4]>99?"99+":l[4])+"",n;return{c(){e=a("span"),n=P(t),r(e,"class","nav-badge")},m(s,i){O(s,e,i),o(e,n)},p(s,i){i&16&&t!==(t=(s[4]>99?"99+":s[4])+"")&&Y(n,t)},d(s){s&&R(e)}}}function Zn(l){let e,t,n=l[7](l[22].icon)+"",s,i,c,d=l[22].name+"",u,p,f,m,_,h=l[22].code==="INBOX"&&l[4]>0&&Wn(l);function E(){return l[10](l[22])}return{c(){e=a("button"),t=a("span"),s=P(n),i=k(),c=a("span"),u=P(d),p=k(),h&&h.c(),f=k(),r(t,"class","nav-icon"),r(c,"class","nav-label"),r(e,"class","nav-item nav-child"),ut(e,"nav-item-active",l[0].toLowerCase()===l[22].code.toLowerCase())},m(C,N){O(C,e,N),o(e,t),o(t,s),o(e,i),o(e,c),o(c,u),o(e,p),h&&h.m(e,null),o(e,f),m||(_=U(e,"click",E),m=!0)},p(C,N){l=C,N&4&&n!==(n=l[7](l[22].icon)+"")&&Y(s,n),N&4&&d!==(d=l[22].name+"")&&Y(u,d),l[22].code==="INBOX"&&l[4]>0?h?h.p(l,N):(h=Wn(l),h.c(),h.m(e,f)):h&&(h.d(1),h=null),N&5&&ut(e,"nav-item-active",l[0].toLowerCase()===l[22].code.toLowerCase())},d(C){C&&R(e),h&&h.d(),m=!1,_()}}}function $n(l){let e;function t(i,c){if(i[19].children&&i[19].children.length>0)return va;if(i[19].path)return ba}let n=t(l),s=n&&n(l);return{c(){s&&s.c(),e=ot()},m(i,c){s&&s.m(i,c),O(i,e,c)},p(i,c){n===(n=t(i))&&s?s.p(i,c):(s&&s.d(1),s=n&&n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&R(e),s&&s.d(i)}}}function ga(l){let e,t,n,s,i,c,d,u=l[1]&&Gn(l),p=$(l[2]),f=[];for(let m=0;m<p.length;m+=1)f[m]=$n(Jn(l,p,m));return{c(){e=a("aside"),t=a("div"),t.innerHTML='<div class="sidebar-logo"><span class="logo-dot"></span> <span class="logo-text">Mitrasoft-HR</span></div> <p class="sidebar-company">PT Surya Pratama Keramindo</p>',n=k(),u&&u.c(),s=k(),i=a("nav");for(let m=0;m<f.length;m+=1)f[m].c();c=k(),d=a("div"),d.innerHTML='<p class="sidebar-footnote">v0.2 ‚Ä¢ Mitrasoft-HR</p>',r(t,"class","sidebar-header"),r(i,"class","sidebar-nav"),r(d,"class","sidebar-footer"),r(e,"class","sidebar")},m(m,_){O(m,e,_),o(e,t),o(e,n),u&&u.m(e,null),o(e,s),o(e,i);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(i,null);o(e,c),o(e,d)},p(m,[_]){if(m[1]?u?u.p(m,_):(u=Gn(m),u.c(),u.m(e,s)):u&&(u.d(1),u=null),_&253){p=$(m[2]);let h;for(h=0;h<p.length;h+=1){const E=Jn(m,p,h);f[h]?f[h].p(E,_):(f[h]=$n(E),f[h].c(),f[h].m(i,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=p.length}},i:W,o:W,d(m){m&&R(e),u&&u.d(),me(f,m)}}}function ka(l,e,t){const n=Nt();let{activePage:s="dashboard"}=e,i=[],c=[],d={},u=null,p=0;It.subscribe(g=>t(8,i=g)),Yt.subscribe(g=>g),nt.subscribe(g=>t(1,u=g));async function f(){try{const g=await fetch(`${te}/api/me/menus`,{credentials:"include"});if(g.ok){const L=await g.json();It.set(L||[])}}catch(g){console.error("Failed to load menus:",g)}}async function m(){try{const g=await fetch(`${te}/api/inbox`,{credentials:"include"});if(g.ok){const L=await g.json();Array.isArray(L)&&t(4,p=L.filter(w=>!w.is_read).length)}}catch(g){console.error("Failed to load unread count",g)}}let _;tt(()=>{f(),m(),_=setInterval(m,3e4)}),bo(()=>{_&&clearInterval(_)});function h(g){t(3,d[g]=!d[g],d),t(3,d)}function E(g,L){try{const w={ADMIN_USERS:"USER_MANAGEMENT",USER_MGMT:"USER_MANAGEMENT",ADMIN_PERMISSIONS:"PERMISSIONS",PERMISSION_MGMT:"PERMISSIONS",REQUESTS_HISTORY:"MY_REQUESTS",APPROVALS:"APPROVALS",MY_PROFILE:"MY_PROFILE",DASHBOARD:"DASHBOARD",EMPLOYEES:"EMPLOYEES",INBOX:"INBOX"},S={"/user-management":"USER_MANAGEMENT","/permissions":"PERMISSIONS","/admin/users":"USER_MANAGEMENT","/admin/permissions":"PERMISSIONS","/requests/history":"MY_REQUESTS","/approvals":"APPROVALS","/profile":"MY_PROFILE","/dashboard":"DASHBOARD","/employees":"EMPLOYEES","/inbox":"INBOX"};let y=null;if(L){const j=String(L).toUpperCase();y=w[j]||j}else g&&(y=S[g]||g.replace(/^\//,"").replace(/\//g,"-").toUpperCase().replace("-","_"));y&&(Dt.set(y),g&&n("navigate",g),y==="INBOX"&&setTimeout(m,1e3))}catch(w){console.error("Navigation error:",w)}}const C={home:"üè†",user:"üë§",mail:"üìß",briefcase:"üíº",calendar:"üìÖ","log-out":"üö™","file-text":"üìÑ",clock:"‚è∞",list:"üìã",users:"üë•","check-circle":"‚úÖ",megaphone:"üì¢","bar-chart":"üìä",settings:"‚öôÔ∏è","user-plus":"‚ûï",shield:"üõ°Ô∏è"};function N(g){return C[g]||"üìÅ"}const D=g=>h(g.code),I=g=>E(g.path,g.code),T=g=>E(g.path,g.code);return l.$$set=g=>{"activePage"in g&&t(0,s=g.activePage)},l.$$.update=()=>{if(l.$$.dirty&258){const g=H=>String(H||"").toUpperCase(),L=H=>{const K=g(H.code),x=g(H.name);return K==="ADMINISTRATION"||K==="ADMIN"||x==="ADMINISTRATION"},w=(i||[]).find(H=>g(H.code)==="SELF_SERVICE"),S=(i||[]).find(H=>g(H.code)==="REQUESTS"),y=(i||[]).filter(H=>g(H.code)!=="REQUESTS"&&g(H.code)!=="SELF_SERVICE"),j=Array.isArray(w==null?void 0:w.children)?w.children:[],A=Array.isArray(S==null?void 0:S.children)?S.children:[],F=new Map;for(const H of[...j,...A])F.set(H.code,H);const M=(A||[]).find(H=>g(H.code)==="MY_REQUESTS")||{code:"MY_REQUESTS",name:"My Requests",icon:"list",path:"/requests/history"},b=y.find(H=>g(H.code)==="APPROVALS"),q=b?{code:b.code,name:b.name,icon:b.icon,path:b.path}:{code:"APPROVALS",name:"Approvals",icon:"check-circle",path:"/approvals"},v=Array.isArray(u==null?void 0:u.roles)&&u.roles.map(H=>String(H).toUpperCase()).some(H=>["ADMIN","IT","HRD","IT_ADMIN","HR_ADMIN"].includes(H)),B=w?{...w,children:v?[M,q]:[M]}:{code:"SELF_SERVICE",name:"Self-Service",icon:"briefcase",children:v?[M,q]:[M]},V=y.find(L),X=y.filter(H=>{const K=g(H.code),x=L(H);return x&&!v||x&&v?!1:K!=="APPROVALS"}),J=v?V||{code:"ADMINISTRATION",name:"Administration",icon:"settings",children:[{code:"USER_MANAGEMENT",name:"User Management",icon:"user-plus",path:"/user-management"},{code:"PERMISSIONS",name:"Permissions",icon:"shield",path:"/permissions"}]}:null,z=X.findIndex(H=>g(H.code)==="EMPLOYEES");z>=0?t(2,c=[...X.slice(0,z+1),B,...J?[J]:[],...X.slice(z+1)]):t(2,c=[...X,B,...J?[J]:[]])}},[s,u,c,d,p,h,E,N,i,D,I,T]}class ya extends Xe{constructor(e){super(),Je(this,e,ka,ga,Re,{activePage:0})}}function wa(l){let e,t,n,s,i,c,d,u;t=new ya({props:{activePage:l[1]}}),t.$on("logout",l[3]),t.$on("navigate",Pa);const p=[ja,Ta,Na,La,Ia,Ma,Da,Aa,Sa,Ea],f=[];function m(_,h){return h&2&&(i=null),_[1]==="dashboard"||_[1]==="DASHBOARD"?0:_[1]==="employees"||_[1]==="EMPLOYEES"?1:_[1]==="MY_PROFILE"||_[1]==="profile"?2:_[1]==="inbox"||_[1]==="INBOX"?3:_[1]==="USER_MANAGEMENT"||_[1]==="user-management"?4:_[1]==="PERMISSIONS"||_[1]==="permissions"?5:_[1]==="ANNOUNCEMENTS"||_[1]==="announcements"?6:_[1]==="REPORTS"||_[1]==="reports"?7:(i==null&&(i=!!["SELF_SERVICE","APPROVALS","MY_REQUESTS","LEAVE_REQUEST","RESIGN_REQUEST","OVERTIME_REQ","EXIT_CLEARANCE","MEDICAL_CLAIM_REQ","ASSESSMENT"].includes(_[1])),i?8:9)}return c=m(l,-1),d=f[c]=p[c](l),{c(){e=a("div"),Ae(t.$$.fragment),n=k(),s=a("main"),d.c(),r(s,"class","app-main"),r(e,"class","app-layout")},m(_,h){O(_,e,h),Ee(t,e,null),o(e,n),o(e,s),f[c].m(s,null),u=!0},p(_,h){const E={};h&2&&(E.activePage=_[1]),t.$set(E);let C=c;c=m(_,h),c===C?f[c].p(_,h):(oo(),ve(f[C],1,1,()=>{f[C]=null}),so(),d=f[c],d?d.p(_,h):(d=f[c]=p[c](_),d.c()),be(d,1),d.m(s,null))},i(_){u||(be(t.$$.fragment,_),be(d),u=!0)},o(_){ve(t.$$.fragment,_),ve(d),u=!1},d(_){_&&R(e),Se(t),f[c].d()}}}function Ca(l){let e,t;return e=new Io({}),e.$on("loggedIn",l[2]),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Ea(l){let e,t,n,s,i,c,d,u,p,f;return{c(){e=a("div"),t=a("h1"),t.textContent="üöß Coming Soon",n=k(),s=a("p"),i=P("Halaman "),c=a("strong"),d=P(l[1]),u=P(" sedang dalam pengembangan."),p=k(),f=a("p"),f.textContent="Fitur ini akan tersedia di update selanjutnya.",r(f,"class","muted"),r(e,"class","coming-soon")},m(m,_){O(m,e,_),o(e,t),o(e,n),o(e,s),o(s,i),o(s,c),o(c,d),o(s,u),o(e,p),o(e,f)},p(m,_){_&2&&Y(d,m[1])},i:W,o:W,d(m){m&&R(e)}}}function Sa(l){let e,t;return e=new As({props:{page:l[1]}}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p(n,s){const i={};s&2&&(i.page=n[1]),e.$set(i)},i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Aa(l){let e,t;return e=new ha({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Da(l){let e,t;return e=new aa({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Ma(l){let e,t;return e=new $s({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Ia(l){let e,t;return e=new Vs({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function La(l){let e,t;return e=new Os({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Na(l){let e,t;return e=new us({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Ta(l){let e,t;return e=new xo({props:{page:l[1]}}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p(n,s){const i={};s&2&&(i.page=n[1]),e.$set(i)},i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function ja(l){let e,t;return e=new Fo({}),{c(){Ae(e.$$.fragment)},m(n,s){Ee(e,n,s),t=!0},p:W,i(n){t||(be(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Ra(l){let e,t,n,s;const i=[Ca,wa],c=[];function d(u,p){return u[0]?1:0}return e=d(l),t=c[e]=i[e](l),{c(){t.c(),n=ot()},m(u,p){c[e].m(u,p),O(u,n,p),s=!0},p(u,[p]){let f=e;e=d(u),e===f?c[e].p(u,p):(oo(),ve(c[f],1,1,()=>{c[f]=null}),so(),t=c[e],t?t.p(u,p):(t=c[e]=i[e](u),t.c()),be(t,1),t.m(n.parentNode,n))},i(u){s||(be(t),s=!0)},o(u){ve(t),s=!1},d(u){u&&R(n),c[e].d(u)}}}function Oa(){const l=window.location.pathname;return l==="/"||l==="/dashboard"?"DASHBOARD":l==="/profile"?"MY_PROFILE":l==="/inbox"?"INBOX":l==="/employees"?"EMPLOYEES":l.length>1?l.replace(/^\//,"").replace(/\//g,"-").toUpperCase().replace("-","_"):"DASHBOARD"}function Pa(l){const e=l.detail;try{typeof e=="string"&&window.history.replaceState({},"",e)}catch(t){console.error("Navigation side-effect error:",t)}}function qa(l,e,t){let n=null,s=Oa();nt.subscribe(u=>t(0,n=u)),Dt.subscribe(u=>t(1,s=u));async function i(u){const p=u.detail;nt.set(p),Dt.set("DASHBOARD"),await c()}async function c(){try{const u=await fetch(`${te}/api/me/permissions`,{credentials:"include"});if(u.ok){const f=await u.json();Yt.set(f.permissions||[])}const p=await fetch(`${te}/api/me/menus`,{credentials:"include"});if(p.ok){const f=await p.json();It.set(f||[])}}catch(u){console.error("Failed to load user data:",u)}}function d(){nt.set(null),It.set([]),Yt.set([]),Dt.set("DASHBOARD")}return[n,s,i,d]}class Fa extends Xe{constructor(e){super(),Je(this,e,qa,Ra,Re,{})}}new Fa({target:document.getElementById("app")});
