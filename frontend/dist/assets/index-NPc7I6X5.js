var Kl=Object.defineProperty;var Zl=(l,e,t)=>e in l?Kl(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var qt=(l,e,t)=>Zl(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function K(){}function Wl(l,e){for(const t in e)l[t]=e[t];return l}function Vl(l){return l()}function xt(){return Object.create(null)}function re(l){l.forEach(Vl)}function Ul(l){return typeof l=="function"}function Ae(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let ht;function el(l,e){return l===e?!0:(ht||(ht=document.createElement("a")),ht.href=e,l===ht.href)}function $l(l){return Object.keys(l).length===0}function xl(l,e,t,s){if(l){const o=Bl(l,e,t,s);return l[0](o)}}function Bl(l,e,t,s){return l[1]&&s?Wl(t.ctx.slice(),l[1](s(e))):t.ctx}function en(l,e,t,s){return l[2],e.dirty}function tn(l,e,t,s,o,a){if(o){const r=Bl(e,t,s,a);l.p(r,o)}}function ln(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function n(l,e){l.appendChild(e)}function q(l,e,t){l.insertBefore(e,t||null)}function N(l){l.parentNode&&l.parentNode.removeChild(l)}function Ne(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function i(l){return document.createElement(l)}function j(l){return document.createTextNode(l)}function g(){return j(" ")}function ze(){return j("")}function V(l,e,t,s){return l.addEventListener(e,t,s),()=>l.removeEventListener(e,t,s)}function Yl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function Ql(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function u(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function nn(l){return Array.from(l.childNodes)}function H(l,e){e=""+e,l.data!==e&&(l.data=e)}function B(l,e){l.value=e??""}function De(l,e,t){for(let s=0;s<l.options.length;s+=1){const o=l.options[s];if(o.__value===e){o.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function yt(l){const e=l.querySelector(":checked");return e&&e.__value}function Pe(l,e,t){l.classList.toggle(e,!!t)}function sn(l,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:s})}let ot;function nt(l){ot=l}function Bt(){if(!ot)throw new Error("Function called outside component initialization");return ot}function Ke(l){Bt().$$.on_mount.push(l)}function on(l){Bt().$$.on_destroy.push(l)}function at(){const l=Bt();return(e,t,{cancelable:s=!1}={})=>{const o=l.$$.callbacks[e];if(o){const a=sn(e,t,{cancelable:s});return o.slice().forEach(r=>{r.call(l,a)}),!a.defaultPrevented}return!0}}function Jl(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const Xe=[],vt=[];let Ge=[];const Ht=[],an=Promise.resolve();let Vt=!1;function rn(){Vt||(Vt=!0,an.then(Xl))}function He(l){Ge.push(l)}function tl(l){Ht.push(l)}const Ft=new Set;let Qe=0;function Xl(){if(Qe!==0)return;const l=ot;do{try{for(;Qe<Xe.length;){const e=Xe[Qe];Qe++,nt(e),cn(e.$$)}}catch(e){throw Xe.length=0,Qe=0,e}for(nt(null),Xe.length=0,Qe=0;vt.length;)vt.pop()();for(let e=0;e<Ge.length;e+=1){const t=Ge[e];Ft.has(t)||(Ft.add(t),t())}Ge.length=0}while(Xe.length);for(;Ht.length;)Ht.pop()();Vt=!1,Ft.clear(),nt(l)}function cn(l){if(l.fragment!==null){l.update(),re(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(He)}}function un(l){const e=[],t=[];Ge.forEach(s=>l.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Ge=e}const gt=new Set;let Fe;function Gl(){Fe={r:0,c:[],p:Fe}}function zl(){Fe.r||re(Fe.c),Fe=Fe.p}function ae(l,e){l&&l.i&&(gt.delete(l),l.i(e))}function de(l,e,t,s){if(l&&l.o){if(gt.has(l))return;gt.add(l),Fe.c.push(()=>{gt.delete(l),s&&(t&&l.d(1),s())}),l.o(e)}else s&&s()}function he(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ll(l,e,t){const s=l.$$.props[e];s!==void 0&&(l.$$.bound[s]=t,t(l.$$.ctx[s]))}function ke(l){l&&l.c()}function ge(l,e,t){const{fragment:s,after_update:o}=l.$$;s&&s.m(e,t),He(()=>{const a=l.$$.on_mount.map(Vl).filter(Ul);l.$$.on_destroy?l.$$.on_destroy.push(...a):re(a),l.$$.on_mount=[]}),o.forEach(He)}function ve(l,e){const t=l.$$;t.fragment!==null&&(un(t.after_update),re(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function fn(l,e){l.$$.dirty[0]===-1&&(Xe.push(l),rn(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Te(l,e,t,s,o,a,r=null,p=[-1]){const c=ot;nt(l);const f=l.$$={fragment:null,ctx:[],props:a,update:K,not_equal:o,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:xt(),dirty:p,skip_bound:!1,root:e.target||c.$$.root};r&&r(f.root);let d=!1;if(f.ctx=t?t(l,e.props||{},(m,_,...h)=>{const y=h.length?h[0]:_;return f.ctx&&o(f.ctx[m],f.ctx[m]=y)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](y),d&&fn(l,m)),_}):[],f.update(),d=!0,re(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const m=nn(e.target);f.fragment&&f.fragment.l(m),m.forEach(N)}else f.fragment&&f.fragment.c();e.intro&&ae(l.$$.fragment),ge(l,e.target,e.anchor),Xl()}nt(c)}class Me{constructor(){qt(this,"$$");qt(this,"$$set")}$destroy(){ve(this,1),this.$destroy=K}$on(e,t){if(!Ul(t))return K;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!$l(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const dn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dn);const le=`http://${window.location.hostname}:8080`,Je=[];function rt(l,e=K){let t;const s=new Set;function o(p){if(Ae(l,p)&&(l=p,t)){const c=!Je.length;for(const f of s)f[1](),Je.push(f,l);if(c){for(let f=0;f<Je.length;f+=2)Je[f][0](Je[f+1]);Je.length=0}}}function a(p){o(p(l))}function r(p,c=K){const f=[p,c];return s.add(f),s.size===1&&(t=e(o,a)||K),p(l),()=>{s.delete(f),s.size===0&&t&&(t(),t=null)}}return{set:o,update:a,subscribe:r}}const Oe=rt(null),it=rt([]),kt=rt([]),st=rt("dashboard"),pn=localStorage.getItem("theme")||"dark",Ut=rt(pn);Ut.subscribe(l=>{localStorage.setItem("theme",l),typeof document<"u"&&document.documentElement.setAttribute("data-theme",l)});function nl(l){let e,t;return{c(){e=i("div"),t=j(l[2]),u(e,"class","login-alert")},m(s,o){q(s,e,o),n(e,t)},p(s,o){o&4&&H(t,s[2])},d(s){s&&N(e)}}}function _n(l){let e;return{c(){e=j("Login")},m(t,s){q(t,e,s)},d(t){t&&N(e)}}}function mn(l){let e;return{c(){e=j("Sedang masuk...")},m(t,s){q(t,e,s)},d(t){t&&N(e)}}}function hn(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C,k,S,D,A,T,I,R,v=l[2]&&nl(l);function O(Y,J){return Y[3]?mn:_n}let F=O(l),G=F(l);return{c(){e=i("div"),t=i("div"),s=i("div"),s.innerHTML='<div class="brand-dot"></div> <span class="brand-name">HR Portal</span> <span class="brand-tag">Employee Experience</span>',o=g(),a=i("div"),r=i("h1"),r.textContent="Employee Portal Login",p=g(),c=i("p"),c.textContent="Masuk untuk mengelola kehadiran, cuti, dan aktivitas karyawan.",f=g(),v&&v.c(),d=g(),m=i("form"),_=i("label"),h=i("span"),h.textContent="Email",y=g(),w=i("input"),E=g(),M=i("label"),P=i("span"),P.textContent="Password",L=g(),b=i("input"),C=g(),k=i("button"),G.c(),S=g(),D=i("p"),D.textContent="PT Mitrasoft ‚Ä¢ Secure access & audit ready",A=g(),T=i("div"),T.innerHTML='<div class="orb orb-1"></div> <div class="orb orb-2"></div> <div class="login-stats-card"><p class="stats-kicker">Realtime Overview</p> <p class="stats-title">Kehadiran &amp; Aktivitas Karyawan</p> <div class="stats-row"><div><p class="stats-label">On Time</p> <p class="stats-value">92%</p></div> <div><p class="stats-label">Overtime</p> <p class="stats-value">18</p></div> <div><p class="stats-label">Leave Today</p> <p class="stats-value">6</p></div></div></div>',u(s,"class","login-brand"),u(r,"class","login-title"),u(c,"class","login-subtitle"),u(h,"class","field-label"),u(w,"type","email"),w.required=!0,u(w,"placeholder","you@example.com"),u(_,"class","field"),u(P,"class","field-label"),u(b,"type","password"),b.required=!0,u(b,"placeholder","‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"),u(M,"class","field"),u(k,"class","btn-primary"),k.disabled=l[3],u(m,"class","login-form"),u(D,"class","login-footnote"),u(a,"class","login-card"),u(t,"class","login-panel"),u(T,"class","login-illustration"),u(e,"class","login-screen")},m(Y,J){q(Y,e,J),n(e,t),n(t,s),n(t,o),n(t,a),n(a,r),n(a,p),n(a,c),n(a,f),v&&v.m(a,null),n(a,d),n(a,m),n(m,_),n(_,h),n(_,y),n(_,w),B(w,l[0]),n(m,E),n(m,M),n(M,P),n(M,L),n(M,b),B(b,l[1]),n(m,C),n(m,k),G.m(k,null),n(a,S),n(a,D),n(e,A),n(e,T),I||(R=[V(w,"input",l[5]),V(b,"input",l[6]),V(m,"submit",Yl(l[4]))],I=!0)},p(Y,[J]){Y[2]?v?v.p(Y,J):(v=nl(Y),v.c(),v.m(a,d)):v&&(v.d(1),v=null),J&1&&w.value!==Y[0]&&B(w,Y[0]),J&2&&b.value!==Y[1]&&B(b,Y[1]),F!==(F=O(Y))&&(G.d(1),G=F(Y),G&&(G.c(),G.m(k,null))),J&8&&(k.disabled=Y[3])},i:K,o:K,d(Y){Y&&N(e),v&&v.d(),G.d(),I=!1,re(R)}}}function bn(l,e,t){const s=at();let o="",a="",r="",p=!1;async function c(){t(2,r=""),t(3,p=!0);try{const m=await fetch(`${le}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:o,password:a})});if(!m.ok){let h="Login failed";try{const y=await m.json();y&&y.message&&(h=y.message)}catch{}throw new Error(h)}const _=await m.json();s("loggedIn",_)}catch(m){t(2,r=m.message||"Login failed")}finally{t(3,p=!1)}}function f(){o=this.value,t(0,o)}function d(){a=this.value,t(1,a)}return[o,a,r,p,c,f,d]}class gn extends Me{constructor(e){super(),Te(this,e,bn,hn,Ae,{})}}function sl(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y;return{c(){e=i("div"),t=i("div"),s=i("div"),s.textContent="üö™",o=g(),a=i("h3"),a.textContent="Logout Confirmation",r=g(),p=i("p"),p.textContent="Are you sure you want to end your secure session?",c=g(),f=i("div"),d=i("button"),d.textContent="Cancel",m=g(),_=i("button"),_.textContent="Yes, Logout",u(s,"class","logout-icon-wrapper svelte-1d5lxt2"),u(a,"class","svelte-1d5lxt2"),u(p,"class","svelte-1d5lxt2"),u(d,"class","btn-cancel svelte-1d5lxt2"),u(_,"class","btn-confirm-logout svelte-1d5lxt2"),u(f,"class","logout-actions svelte-1d5lxt2"),u(t,"class","logout-modal svelte-1d5lxt2"),u(e,"class","logout-modal-backdrop svelte-1d5lxt2")},m(w,E){q(w,e,E),n(e,t),n(t,s),n(t,o),n(t,a),n(t,r),n(t,p),n(t,c),n(t,f),n(f,d),n(f,m),n(f,_),h||(y=[V(d,"click",l[4]),V(_,"click",l[5])],h=!0)},p:K,d(w){w&&N(e),h=!1,re(y)}}}function vn(l){let e,t,s,o,a,r,p,c=l[0]==="dark"?"‚òÄÔ∏è":"üåô",f,d,m,_,h,y,w,E,M;const P=l[7].default,L=xl(P,l,l[6],null);let b=l[1]&&sl(l);return{c(){e=i("header"),t=i("div"),L&&L.c(),s=g(),o=i("div"),a=i("div"),a.innerHTML='<span class="pill-dot svelte-1d5lxt2"></span> <span>Secure Session</span>',r=g(),p=i("button"),f=j(c),m=g(),_=i("button"),_.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line></svg>',h=g(),b&&b.c(),y=ze(),u(t,"class","header-content svelte-1d5lxt2"),u(a,"class","header-pill svelte-1d5lxt2"),u(p,"class","btn-icon svelte-1d5lxt2"),u(p,"title",d=l[0]==="dark"?"Switch to Light Mode":"Switch to Dark Mode"),u(_,"class","btn-icon btn-logout-icon svelte-1d5lxt2"),u(_,"title","Logout"),u(o,"class","header-actions svelte-1d5lxt2"),u(e,"class","main-header svelte-1d5lxt2")},m(C,k){q(C,e,k),n(e,t),L&&L.m(t,null),n(e,s),n(e,o),n(o,a),n(o,r),n(o,p),n(p,f),n(o,m),n(o,_),q(C,h,k),b&&b.m(C,k),q(C,y,k),w=!0,E||(M=[V(p,"click",l[2]),V(_,"click",l[3])],E=!0)},p(C,[k]){L&&L.p&&(!w||k&64)&&tn(L,P,C,C[6],w?en(P,C[6],k,null):ln(C[6]),null),(!w||k&1)&&c!==(c=C[0]==="dark"?"‚òÄÔ∏è":"üåô")&&H(f,c),(!w||k&1&&d!==(d=C[0]==="dark"?"Switch to Light Mode":"Switch to Dark Mode"))&&u(p,"title",d),C[1]?b?b.p(C,k):(b=sl(C),b.c(),b.m(y.parentNode,y)):b&&(b.d(1),b=null)},i(C){w||(ae(L,C),w=!0)},o(C){de(L,C),w=!1},d(C){C&&(N(e),N(h),N(y)),L&&L.d(C),b&&b.d(C),E=!1,re(M)}}}function kn(l,e,t){let{$$slots:s={},$$scope:o}=e;const a=at();let r="dark";Ut.subscribe(_=>t(0,r=_));function p(){Ut.set(r==="dark"?"light":"dark")}let c=!1;function f(){t(1,c=!0)}function d(){t(1,c=!1)}async function m(){t(1,c=!1);try{await fetch(`${le}/api/auth/logout`,{method:"POST",credentials:"include"})}catch(_){console.error("Logout failed",_)}finally{Oe.set(null),it.set([]),kt.set([]),st.set("DASHBOARD"),a("logout")}}return l.$$set=_=>{"$$scope"in _&&t(6,o=_.$$scope)},[r,c,p,f,d,m,o,s]}class ct extends Me{constructor(e){super(),Te(this,e,kn,vn,Ae,{})}}function ol(l,e,t){const s=l.slice();return s[7]=e[t],s}function yn(l){let e,t,s,o;return{c(){e=i("div"),t=i("h1"),t.textContent="Dashboard",s=g(),o=i("p"),o.textContent=`Have a good day, ${l[2]()}!`},m(a,r){q(a,e,r),n(e,t),n(e,s),n(e,o)},p:K,d(a){a&&N(e)}}}function wn(l){let e,t=he(l[0]),s=[];for(let o=0;o<t.length;o+=1)s[o]=il(ol(l,t,o));return{c(){e=i("ul");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","announcement-list svelte-cub97x")},m(o,a){q(o,e,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(o,a){if(a&1){t=he(o[0]);let r;for(r=0;r<t.length;r+=1){const p=ol(o,t,r);s[r]?s[r].p(p,a):(s[r]=il(p),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(o){o&&N(e),Ne(s,o)}}}function Cn(l){let e;return{c(){e=i("div"),e.textContent="No active announcements",u(e,"class","widget-empty svelte-cub97x")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function En(l){let e;return{c(){e=i("div"),e.textContent="Loading...",u(e,"class","widget-loading svelte-cub97x")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function il(l){let e,t,s=l[7].title+"",o,a,r,p=l[7].content+"",c,f,d,m=new Date(l[7].created_at).toLocaleDateString()+"",_,h;return{c(){e=i("li"),t=i("h3"),o=j(s),a=g(),r=i("p"),c=j(p),f=g(),d=i("span"),_=j(m),h=g(),u(t,"class","ann-title svelte-cub97x"),u(r,"class","ann-content svelte-cub97x"),u(d,"class","ann-date svelte-cub97x"),u(e,"class","ann-item svelte-cub97x")},m(y,w){q(y,e,w),n(e,t),n(t,o),n(e,a),n(e,r),n(r,c),n(e,f),n(e,d),n(d,_),n(e,h)},p(y,w){w&1&&s!==(s=y[7].title+"")&&H(o,s),w&1&&p!==(p=y[7].content+"")&&H(c,p),w&1&&m!==(m=new Date(y[7].created_at).toLocaleDateString()+"")&&H(_,m)},d(y){y&&N(e)}}}function Sn(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C,k,S,D,A,T,I,R,v,O,F,G;t=new ct({props:{$$slots:{default:[yn]},$$scope:{ctx:l}}});function Y(Q,z){return Q[1]?En:Q[0].length===0?Cn:wn}let J=Y(l),U=J(l);return{c(){e=i("div"),ke(t.$$.fragment),s=g(),o=i("div"),a=i("div"),r=i("div"),p=i("section"),c=i("article"),f=i("h2"),f.textContent="Your Profile",d=g(),m=i("dl"),_=i("div"),h=i("dt"),h.textContent="Email",y=g(),w=i("dd"),w.textContent=`${l[3]()}`,E=g(),M=i("div"),P=i("dt"),P.textContent="Roles",L=g(),b=i("dd"),b.textContent=`${l[4]()}`,C=g(),k=i("article"),k.innerHTML=`<h2>Attendance</h2> <p class="muted">Summary kehadiran akan ditampilkan di sini. Grafik on-time, late,
              dan absence.</p>`,S=g(),D=i("article"),D.innerHTML='<h2>Leave Balance</h2> <p class="muted">Annual leave, sick leave, dan sisa cuti akan ditampilkan di sini.</p>',A=g(),T=i("aside"),I=i("article"),R=i("div"),R.innerHTML='<h2 class="svelte-cub97x">üì¢ Announcements</h2>',v=g(),U.c(),O=g(),F=i("article"),F.innerHTML='<h2>My Requests</h2> <p class="muted">Status pengajuan cuti, lembur, dan request lainnya.</p>',u(m,"class","data-list"),u(c,"class","card"),u(k,"class","card"),u(D,"class","card"),u(p,"class","cards-grid"),u(r,"class","main-column"),u(R,"class","widget-header svelte-cub97x"),u(I,"class","card announcement-widget svelte-cub97x"),u(F,"class","card"),u(T,"class","sidebar-column"),u(a,"class","dashboard-grid svelte-cub97x"),u(o,"class","page-content"),u(e,"class","page-wrapper")},m(Q,z){q(Q,e,z),ge(t,e,null),n(e,s),n(e,o),n(o,a),n(a,r),n(r,p),n(p,c),n(c,f),n(c,d),n(c,m),n(m,_),n(_,h),n(_,y),n(_,w),n(_,E),n(m,M),n(M,P),n(M,L),n(M,b),n(p,C),n(p,k),n(p,S),n(p,D),n(a,A),n(a,T),n(T,I),n(I,R),n(I,v),U.m(I,null),n(T,O),n(T,F),G=!0},p(Q,[z]){const $={};z&1024&&($.$$scope={dirty:z,ctx:Q}),t.$set($),J===(J=Y(Q))&&U?U.p(Q,z):(U.d(1),U=J(Q),U&&(U.c(),U.m(I,null)))},i(Q){G||(ae(t.$$.fragment,Q),G=!0)},o(Q){de(t.$$.fragment,Q),G=!1},d(Q){Q&&N(e),ve(t),U.d()}}}function Ln(l,e,t){let s=null;Oe.subscribe(d=>s=d);let o=[],a=!0;Ke(r);async function r(){t(1,a=!0);try{const d=await fetch(`${le}/api/announcements`,{credentials:"include"});d.ok&&t(0,o=await d.json())}catch(d){console.error("Failed to load announcements",d)}finally{t(1,a=!1)}}return[o,a,()=>(s==null?void 0:s.name)||"Employee",()=>(s==null?void 0:s.email)||"",()=>Array.isArray(s==null?void 0:s.roles)&&s.roles.length?s.roles.join(", "):"-"]}class An extends Me{constructor(e){super(),Te(this,e,Ln,Sn,Ae,{})}}function al(l,e,t){const s=l.slice();return s[20]=e[t],s}function rl(l){let e,t,s,o,a=l[1]==="edit"?"Edit Employee":"Add Employee",r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C,k,S,D,A,T,I,R,v,O,F,G,Y,J,U,Q,z,$,ne,ee,Z,x,te,ie,pe,ye,_e,Se,we,je,Le,W,ce,Ze,Ce,Ie,qe,We,Ee=he(l[5]),ue=[];for(let X=0;X<Ee.length;X+=1)ue[X]=cl(al(l,Ee,X));function $e(X,oe){return X[2]?Mn:Tn}let Re=$e(l),be=Re(l);return{c(){e=i("div"),t=i("div"),s=i("header"),o=i("h2"),r=j(a),p=g(),c=i("div"),f=i("div"),d=i("label"),m=j(`Department
                        `),_=i("select"),h=i("option"),h.textContent="-- Pilih Department --";for(let X=0;X<ue.length;X+=1)ue[X].c();E=g(),M=i("div"),P=i("label"),L=j(`Employee Code
                        `),b=i("input"),S=g(),D=i("label"),A=j(`Name
                        `),T=i("input"),I=g(),R=i("div"),v=i("label"),O=j(`Email
                        `),F=i("input"),G=g(),Y=i("div"),J=i("label"),U=j(`Job Title
                        `),Q=i("input"),z=g(),$=i("label"),ne=j(`Branch
                        `),ee=i("input"),Z=g(),x=i("div"),te=i("label"),ie=j(`Status
                        `),pe=i("select"),ye=i("option"),ye.textContent="ACTIVE",_e=i("option"),_e.textContent="INACTIVE",Se=g(),we=i("p"),we.innerHTML=`Untuk karyawan baru, password default di backend sekarang:
                    <code>changeme123</code> (bisa kamu ganti mekanismenya nanti).`,je=g(),Le=i("footer"),W=i("button"),ce=j("Cancel"),Ze=g(),Ce=i("button"),be.c(),u(s,"class","modal-header"),h.__value="",B(h,h.__value),_.disabled=w=l[1]==="edit",u(f,"class","form-row"),b.readOnly=C=l[1]==="create",u(b,"placeholder",k=l[4]?"Generating...":l[1]==="create"?"Pilih department dulu":""),Pe(b,"readonly-input",l[1]==="create"),u(M,"class","form-row"),u(F,"type","email"),u(R,"class","form-row"),u(Y,"class","form-row"),ye.__value="ACTIVE",B(ye,ye.__value),_e.__value="INACTIVE",B(_e,_e.__value),l[3].status===void 0&&He(()=>l[17].call(pe)),u(x,"class","form-row"),u(we,"class","muted small"),u(c,"class","modal-body"),u(W,"type","button"),u(W,"class","btn-secondary"),W.disabled=l[2],u(Ce,"type","button"),u(Ce,"class","btn-primary"),Ce.disabled=Ie=l[2]||l[1]==="create"&&!l[3].employee_code,u(Le,"class","modal-footer"),u(t,"class","modal"),u(e,"class","modal-backdrop")},m(X,oe){q(X,e,oe),n(e,t),n(t,s),n(s,o),n(o,r),n(t,p),n(t,c),n(c,f),n(f,d),n(d,m),n(d,_),n(_,h);for(let se=0;se<ue.length;se+=1)ue[se]&&ue[se].m(_,null);De(_,l[3].department),n(c,E),n(c,M),n(M,P),n(P,L),n(P,b),B(b,l[3].employee_code),n(M,S),n(M,D),n(D,A),n(D,T),B(T,l[3].name),n(c,I),n(c,R),n(R,v),n(v,O),n(v,F),B(F,l[3].email),n(c,G),n(c,Y),n(Y,J),n(J,U),n(J,Q),B(Q,l[3].job_title),n(Y,z),n(Y,$),n($,ne),n($,ee),B(ee,l[3].branch),n(c,Z),n(c,x),n(x,te),n(te,ie),n(te,pe),n(pe,ye),n(pe,_e),De(pe,l[3].status,!0),n(c,Se),n(c,we),n(t,je),n(t,Le),n(Le,W),n(W,ce),n(Le,Ze),n(Le,Ce),be.m(Ce,null),qe||(We=[V(_,"change",l[6]),V(b,"input",l[12]),V(T,"input",l[13]),V(F,"input",l[14]),V(Q,"input",l[15]),V(ee,"input",l[16]),V(pe,"change",l[17]),V(W,"click",l[7]),V(Ce,"click",Yl(l[8])),V(t,"click",Ql(l[11])),V(e,"click",l[7])],qe=!0)},p(X,oe){if(oe&2&&a!==(a=X[1]==="edit"?"Edit Employee":"Add Employee")&&H(r,a),oe&32){Ee=he(X[5]);let se;for(se=0;se<Ee.length;se+=1){const Ve=al(X,Ee,se);ue[se]?ue[se].p(Ve,oe):(ue[se]=cl(Ve),ue[se].c(),ue[se].m(_,null))}for(;se<ue.length;se+=1)ue[se].d(1);ue.length=Ee.length}oe&40&&y!==(y=X[3].department)&&De(_,X[3].department),oe&2&&w!==(w=X[1]==="edit")&&(_.disabled=w),oe&2&&C!==(C=X[1]==="create")&&(b.readOnly=C),oe&18&&k!==(k=X[4]?"Generating...":X[1]==="create"?"Pilih department dulu":"")&&u(b,"placeholder",k),oe&40&&b.value!==X[3].employee_code&&B(b,X[3].employee_code),oe&2&&Pe(b,"readonly-input",X[1]==="create"),oe&40&&T.value!==X[3].name&&B(T,X[3].name),oe&40&&F.value!==X[3].email&&B(F,X[3].email),oe&40&&Q.value!==X[3].job_title&&B(Q,X[3].job_title),oe&40&&ee.value!==X[3].branch&&B(ee,X[3].branch),oe&40&&De(pe,X[3].status),oe&4&&(W.disabled=X[2]),Re===(Re=$e(X))&&be?be.p(X,oe):(be.d(1),be=Re(X),be&&(be.c(),be.m(Ce,null))),oe&46&&Ie!==(Ie=X[2]||X[1]==="create"&&!X[3].employee_code)&&(Ce.disabled=Ie)},d(X){X&&N(e),Ne(ue,X),be.d(),qe=!1,re(We)}}}function cl(l){let e,t=l[20].code+"",s,o,a=l[20].name+"",r;return{c(){e=i("option"),s=j(t),o=j(" - "),r=j(a),e.__value=l[20].code,B(e,e.__value)},m(p,c){q(p,e,c),n(e,s),n(e,o),n(e,r)},p:K,d(p){p&&N(e)}}}function Tn(l){let e=l[1]==="edit"?"Update":"Save",t;return{c(){t=j(e)},m(s,o){q(s,t,o)},p(s,o){o&2&&e!==(e=s[1]==="edit"?"Update":"Save")&&H(t,e)},d(s){s&&N(t)}}}function Mn(l){let e=l[1]==="edit"?"Updating‚Ä¶":"Saving‚Ä¶",t;return{c(){t=j(e)},m(s,o){q(s,t,o)},p(s,o){o&2&&e!==(e=s[1]==="edit"?"Updating‚Ä¶":"Saving‚Ä¶")&&H(t,e)},d(s){s&&N(t)}}}function jn(l){let e,t=l[0]&&rl(l);return{c(){t&&t.c(),e=ze()},m(s,o){t&&t.m(s,o),q(s,e,o)},p(s,[o]){s[0]?t?t.p(s,o):(t=rl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:K,o:K,d(s){s&&N(e),t&&t.d(s)}}}function Dn(l,e,t){const s=at();let{open:o=!1}=e,{mode:a="create"}=e,{employee:r=null}=e,{saving:p=!1}=e;const c=[{code:"ADM",name:"Administrasi"},{code:"IT",name:"Information Technology"},{code:"ACC",name:"Accounting"},{code:"TAX",name:"Pajak"},{code:"FIN",name:"Finance"},{code:"HR",name:"Human Resources"},{code:"MKT",name:"Marketing"},{code:"OPS",name:"Operations"}],f={employee_code:"",name:"",email:"",branch:"",job_title:"",status:"ACTIVE",department:""};let d={...f},m=!1,_=!1;async function h(S){const D=S.target.value;if(t(3,d.department=D,d),a==="create"&&D){t(4,m=!0);try{const A=await fetch(`${le}/api/employees/next-code?department=${encodeURIComponent(D)}`,{credentials:"include"});if(A.ok){const T=await A.json();t(3,d.employee_code=T.employee_code||"",d)}else console.error("Failed to fetch next code")}catch(A){console.error("Error fetching next code:",A)}finally{t(4,m=!1)}}}function y(){s("close")}function w(){s("submit",{mode:a,id:(r==null?void 0:r.id)??null,form:d})}function E(S){Jl.call(this,l,S)}function M(){d.employee_code=this.value,t(3,d),t(0,o),t(10,_),t(1,a),t(9,r),t(5,c)}function P(){d.name=this.value,t(3,d),t(0,o),t(10,_),t(1,a),t(9,r),t(5,c)}function L(){d.email=this.value,t(3,d),t(0,o),t(10,_),t(1,a),t(9,r),t(5,c)}function b(){d.job_title=this.value,t(3,d),t(0,o),t(10,_),t(1,a),t(9,r),t(5,c)}function C(){d.branch=this.value,t(3,d),t(0,o),t(10,_),t(1,a),t(9,r),t(5,c)}function k(){d.status=yt(this),t(3,d),t(0,o),t(10,_),t(1,a),t(9,r),t(5,c)}return l.$$set=S=>{"open"in S&&t(0,o=S.open),"mode"in S&&t(1,a=S.mode),"employee"in S&&t(9,r=S.employee),"saving"in S&&t(2,p=S.saving)},l.$$.update=()=>{l.$$.dirty&1539&&(o&&!_&&(t(10,_=!0),a==="edit"&&r?t(3,d={employee_code:r.employee_code??"",name:r.name??"",email:r.email??"",branch:r.branch??"",job_title:r.job_title??"",status:r.status??"ACTIVE",department:r.department??""}):t(3,d={...f})),!o&&_&&(t(10,_=!1),t(3,d={...f})))},[o,a,p,d,m,c,h,y,w,r,_,E,M,P,L,b,C,k]}class In extends Me{constructor(e){super(),Te(this,e,Dn,jn,Ae,{open:0,mode:1,employee:9,saving:2})}}function ul(l,e,t){const s=l.slice();return s[20]=e[t],s}function On(l){let e;return{c(){e=i("div"),e.innerHTML="<h1>Employees</h1> <p>Manage employee profiles, roles, dan status keaktifan.</p>"},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Rn(l){let e,t,s,o,a,r=he(l[7]),p=[];for(let c=0;c<r.length;c+=1)p[c]=fl(ul(l,r,c));return{c(){e=i("div"),t=i("table"),s=i("thead"),s.innerHTML='<tr><th>Code</th> <th>Name</th> <th>Email</th> <th>Department</th> <th>Job Title</th> <th>Branch</th> <th>Status</th> <th style="width: 1%"></th></tr>',o=g(),a=i("tbody");for(let c=0;c<p.length;c+=1)p[c].c();u(t,"class","employees-table"),u(e,"class","employees-table-wrapper")},m(c,f){q(c,e,f),n(e,t),n(t,s),n(t,o),n(t,a);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(a,null)},p(c,f){if(f&1664){r=he(c[7]);let d;for(d=0;d<r.length;d+=1){const m=ul(c,r,d);p[d]?p[d].p(m,f):(p[d]=fl(m),p[d].c(),p[d].m(a,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=r.length}},d(c){c&&N(e),Ne(p,c)}}}function Pn(l){let e;return{c(){e=i("div"),e.textContent="Tidak ada data karyawan yang cocok dengan pencarian.",u(e,"class","state muted")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Nn(l){let e,t;return{c(){e=i("div"),t=j(l[2]),u(e,"class","state error")},m(s,o){q(s,e,o),n(e,t)},p(s,o){o&4&&H(t,s[2])},d(s){s&&N(e)}}}function qn(l){let e;return{c(){e=i("div"),e.textContent="Loading employees‚Ä¶",u(e,"class","state muted")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Fn(l){let e;return{c(){e=j("-")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Hn(l){let e,t=l[20].department+"",s;return{c(){e=i("span"),s=j(t),u(e,"class","dept-badge svelte-1wq7lbd")},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&128&&t!==(t=o[20].department+"")&&H(s,t)},d(o){o&&N(e)}}}function fl(l){let e,t,s=l[20].employee_code+"",o,a,r,p=l[20].name+"",c,f,d,m=l[20].email+"",_,h,y,w,E,M=l[20].job_title+"",P,L,b,C=l[20].branch+"",k,S,D,A,T=l[20].status==="ACTIVE"?"Active":"Inactive",I,R,v,O,F,G,Y,J,U,Q;function z(x,te){return x[20].department?Hn:Fn}let $=z(l),ne=$(l);function ee(){return l[16](l[20])}function Z(){return l[17](l[20])}return{c(){e=i("tr"),t=i("td"),o=j(s),a=g(),r=i("td"),c=j(p),f=g(),d=i("td"),_=j(m),h=g(),y=i("td"),ne.c(),w=g(),E=i("td"),P=j(M),L=g(),b=i("td"),k=j(C),S=g(),D=i("td"),A=i("span"),I=j(T),v=g(),O=i("td"),F=i("button"),F.textContent="Edit",G=g(),Y=i("button"),Y.textContent="Delete",J=g(),u(t,"class","mono"),u(d,"class","email-cell"),u(A,"class",R="pill-status "+(l[20].status==="ACTIVE"?"pill-status-active":"pill-status-inactive")),u(F,"type","button"),u(F,"class","table-action-btn btn-edit"),u(Y,"type","button"),u(Y,"class","table-action-btn btn-delete"),u(O,"class","actions")},m(x,te){q(x,e,te),n(e,t),n(t,o),n(e,a),n(e,r),n(r,c),n(e,f),n(e,d),n(d,_),n(e,h),n(e,y),ne.m(y,null),n(e,w),n(e,E),n(E,P),n(e,L),n(e,b),n(b,k),n(e,S),n(e,D),n(D,A),n(A,I),n(e,v),n(e,O),n(O,F),n(O,G),n(O,Y),n(e,J),U||(Q=[V(F,"click",ee),V(Y,"click",Z)],U=!0)},p(x,te){l=x,te&128&&s!==(s=l[20].employee_code+"")&&H(o,s),te&128&&p!==(p=l[20].name+"")&&H(c,p),te&128&&m!==(m=l[20].email+"")&&H(_,m),$===($=z(l))&&ne?ne.p(l,te):(ne.d(1),ne=$(l),ne&&(ne.c(),ne.m(y,null))),te&128&&M!==(M=l[20].job_title+"")&&H(P,M),te&128&&C!==(C=l[20].branch+"")&&H(k,C),te&128&&T!==(T=l[20].status==="ACTIVE"?"Active":"Inactive")&&H(I,T),te&128&&R!==(R="pill-status "+(l[20].status==="ACTIVE"?"pill-status-active":"pill-status-inactive"))&&u(A,"class",R)},d(x){x&&N(e),ne.d(),U=!1,re(Q)}}}function Vn(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L;t=new ct({props:{$$slots:{default:[On]},$$scope:{ctx:l}}});function b(S,D){return S[1]?qn:S[2]?Nn:S[7].length===0?Pn:Rn}let C=b(l),k=C(l);return E=new In({props:{open:l[3],mode:l[4],employee:l[5],saving:l[6]}}),E.$on("close",l[11]),E.$on("submit",l[12]),{c(){e=i("div"),ke(t.$$.fragment),s=g(),o=i("div"),a=i("section"),r=i("div"),p=i("div"),p.innerHTML='<h2>Employees list</h2> <p class="muted small">Data karyawan aktif &amp; non-aktif.</p>',c=g(),f=i("div"),d=i("input"),m=g(),_=i("button"),_.textContent="+ Add Employee",h=g(),y=i("article"),k.c(),w=g(),ke(E.$$.fragment),u(p,"class","employees-toolbar-text"),u(d,"type","text"),u(d,"class","input-search"),u(d,"placeholder","Search name, email, or code‚Ä¶"),u(_,"type","button"),u(_,"class","btn-primary"),u(f,"class","employees-toolbar-actions"),u(r,"class","employees-toolbar"),u(y,"class","card employees-card"),u(a,"class","employees-section"),u(o,"class","page-content"),u(e,"class","page-wrapper")},m(S,D){q(S,e,D),ge(t,e,null),n(e,s),n(e,o),n(o,a),n(a,r),n(r,p),n(r,c),n(r,f),n(f,d),B(d,l[0]),n(f,m),n(f,_),n(a,h),n(a,y),k.m(y,null),n(o,w),ge(E,o,null),M=!0,P||(L=[V(d,"input",l[15]),V(_,"click",l[8])],P=!0)},p(S,[D]){const A={};D&8388608&&(A.$$scope={dirty:D,ctx:S}),t.$set(A),D&1&&d.value!==S[0]&&B(d,S[0]),C===(C=b(S))&&k?k.p(S,D):(k.d(1),k=C(S),k&&(k.c(),k.m(y,null)));const T={};D&8&&(T.open=S[3]),D&16&&(T.mode=S[4]),D&32&&(T.employee=S[5]),D&64&&(T.saving=S[6]),E.$set(T)},i(S){M||(ae(t.$$.fragment,S),ae(E.$$.fragment,S),M=!0)},o(S){de(t.$$.fragment,S),de(E.$$.fragment,S),M=!1},d(S){S&&N(e),ve(t),k.d(),ve(E),P=!1,re(L)}}}function Un(l,e,t){let s,{page:o="employees"}=e;Oe.subscribe(k=>k);let a=[],r=!0,p="",c="",f=!1,d="create",m=null,_=!1;async function h(){t(1,r=!0),t(2,p="");try{const k=await fetch(`${le}/api/employees`,{credentials:"include"});if(!k.ok){const D=await k.json().catch(()=>({}));throw new Error(D.message||"Failed to fetch employees")}const S=await k.json();t(14,a=Array.isArray(S)?S:[])}catch(k){console.error(k),t(2,p=(k==null?void 0:k.message)||"Failed to fetch employees"),t(14,a=[])}finally{t(1,r=!1)}}Ke(h);function y(){t(4,d="create"),t(5,m=null),t(3,f=!0)}function w(k){t(4,d="edit"),t(5,m=k),t(3,f=!0)}async function E(k){if(confirm("Delete this employee?"))try{const S=await fetch(`${le}/api/employees/${k}`,{method:"DELETE",credentials:"include"});if(!S.ok){const D=await S.json().catch(()=>({}));throw new Error(D.message||"Failed to delete employee")}await h()}catch(S){alert((S==null?void 0:S.message)||"Failed to delete employee")}}function M(){t(3,f=!1),t(5,m=null)}async function P(k){const{mode:S,id:D,form:A}=k.detail,T=S==="create"?`${le}/api/employees`:`${le}/api/employees/${D}`,I=S==="create"?"POST":"PUT";try{t(6,_=!0);const R=await fetch(T,{method:I,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(A)});if(!R.ok){const v=await R.json().catch(()=>({}));throw new Error(v.message||"Failed to save employee")}t(3,f=!1),t(5,m=null),await h()}catch(R){alert((R==null?void 0:R.message)||"Failed to save employee")}finally{t(6,_=!1)}}function L(){c=this.value,t(0,c)}const b=k=>w(k),C=k=>E(k.id);return l.$$set=k=>{"page"in k&&t(13,o=k.page)},l.$$.update=()=>{l.$$.dirty&16385&&t(7,s=a.filter(k=>{const S=c.toLowerCase().trim();return S?(k.name||"").toLowerCase().includes(S)||(k.email||"").toLowerCase().includes(S)||(k.employee_code||"").toLowerCase().includes(S)||(k.branch||"").toLowerCase().includes(S):!0}))},[c,r,p,f,d,m,_,s,y,w,E,M,P,o,a,L,b,C]}class Bn extends Me{constructor(e){super(),Te(this,e,Un,Vn,Ae,{page:13})}}function Yn(l){let e;return{c(){e=i("div"),e.innerHTML="<h1>My Profile</h1> <p>View and update your personal information</p>"},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Qn(l){let e,t,s,o,a,r,p=l[0].name+"",c,f,d,m=(l[0].job_title||"-")+"",_,h,y,w,E,M=l[0].employee_code+"",P,L,b,C;function k(O,F){return O[0].photo_url?zn:Gn}let S=k(l),D=S(l),A=l[0].department&&dl(l),T=!l[3]&&pl(l);function I(O,F){return O[3]?Zn:Kn}let R=I(l),v=R(l);return{c(){e=i("div"),t=i("div"),s=i("div"),D.c(),o=g(),a=i("div"),r=i("h2"),c=j(p),f=g(),d=i("p"),_=j(m),h=g(),y=i("p"),A&&A.c(),w=g(),E=i("span"),P=j(M),L=g(),b=i("div"),T&&T.c(),C=g(),v.c(),u(s,"class","profile-avatar"),u(d,"class","job-title"),u(E,"class","emp-code"),u(y,"class","dept-info"),u(a,"class","profile-header-info"),u(b,"class","profile-actions"),u(t,"class","profile-header-card"),u(e,"class","profile-container")},m(O,F){q(O,e,F),n(e,t),n(t,s),D.m(s,null),n(t,o),n(t,a),n(a,r),n(r,c),n(a,f),n(a,d),n(d,_),n(a,h),n(a,y),A&&A.m(y,null),n(y,w),n(y,E),n(E,P),n(t,L),n(t,b),T&&T.m(b,null),n(e,C),v.m(e,null)},p(O,F){S===(S=k(O))&&D?D.p(O,F):(D.d(1),D=S(O),D&&(D.c(),D.m(s,null))),F&1&&p!==(p=O[0].name+"")&&H(c,p),F&1&&m!==(m=(O[0].job_title||"-")+"")&&H(_,m),O[0].department?A?A.p(O,F):(A=dl(O),A.c(),A.m(y,w)):A&&(A.d(1),A=null),F&1&&M!==(M=O[0].employee_code+"")&&H(P,M),O[3]?T&&(T.d(1),T=null):T?T.p(O,F):(T=pl(O),T.c(),T.m(b,null)),R===(R=I(O))&&v?v.p(O,F):(v.d(1),v=R(O),v&&(v.c(),v.m(e,null)))},d(O){O&&N(e),D.d(),A&&A.d(),T&&T.d(),v.d()}}}function Jn(l){let e,t;return{c(){e=i("div"),t=j(l[4]),u(e,"class","error-state")},m(s,o){q(s,e,o),n(e,t)},p(s,o){o&16&&H(t,s[4])},d(s){s&&N(e)}}}function Xn(l){let e;return{c(){e=i("div"),e.textContent="Loading profile...",u(e,"class","loading-state")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Gn(l){let e,t=(l[0].name?l[0].name.charAt(0).toUpperCase():"?")+"",s;return{c(){e=i("span"),s=j(t),u(e,"class","avatar-initials")},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&1&&t!==(t=(o[0].name?o[0].name.charAt(0).toUpperCase():"?")+"")&&H(s,t)},d(o){o&&N(e)}}}function zn(l){let e,t,s;return{c(){e=i("img"),el(e.src,t=l[0].photo_url)||u(e,"src",t),u(e,"alt",s=l[0].name)},m(o,a){q(o,e,a)},p(o,a){a&1&&!el(e.src,t=o[0].photo_url)&&u(e,"src",t),a&1&&s!==(s=o[0].name)&&u(e,"alt",s)},d(o){o&&N(e)}}}function dl(l){let e,t=l[0].department+"",s;return{c(){e=i("span"),s=j(t),u(e,"class","dept-badge")},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&1&&t!==(t=o[0].department+"")&&H(s,t)},d(o){o&&N(e)}}}function pl(l){let e,t,s;return{c(){e=i("button"),e.textContent="Edit Profile",u(e,"class","btn-primary")},m(o,a){q(o,e,a),t||(s=V(e,"click",l[6]),t=!0)},p:K,d(o){o&&N(e),t=!1,s()}}}function Kn(l){let e,t,s,o,a,r,p,c,f,d=l[0].email+"",m,_,h,y,w,E,M=(l[0].phone||"-")+"",P,L,b,C,k,S,D=bt(l[0].birth_date)+"",A,T,I,R,v,O,F=l[0].gender==="M"?"Male":l[0].gender==="F"?"Female":"-",G,Y,J,U,Q,z,$=(l[0].address||"-")+"",ne,ee,Z,x,te,ie,pe,ye,_e,Se,we=l[0].employee_code+"",je,Le,W,ce,Ze,Ce,Ie=(l[0].department||"-")+"",qe,We,Ee,ue,$e,Re,be=(l[0].job_title||"-")+"",X,oe,se,Ve,Yt,wt,ut=(l[0].branch||"-")+"",Ct,Qt,Ue,Et,Jt,St,ft=bt(l[0].join_date)+"",Lt,Xt,xe,At,Gt,Tt,et,dt=l[0].status+"",Mt,pt,zt,Be,jt,Kt,tt,Ye,Dt,Zt,It,_t=(l[0].emergency_contact||"-")+"",Ot,Wt,lt,Rt,$t,Pt,mt=(l[0].emergency_phone||"-")+"",Nt;return{c(){e=i("div"),t=i("div"),s=i("h3"),s.textContent="Personal Information",o=g(),a=i("dl"),r=i("div"),p=i("dt"),p.textContent="Email",c=g(),f=i("dd"),m=j(d),_=g(),h=i("div"),y=i("dt"),y.textContent="Phone",w=g(),E=i("dd"),P=j(M),L=g(),b=i("div"),C=i("dt"),C.textContent="Birth Date",k=g(),S=i("dd"),A=j(D),T=g(),I=i("div"),R=i("dt"),R.textContent="Gender",v=g(),O=i("dd"),G=j(F),Y=g(),J=i("div"),U=i("dt"),U.textContent="Address",Q=g(),z=i("dd"),ne=j($),ee=g(),Z=i("div"),x=i("h3"),x.textContent="Employment Information",te=g(),ie=i("dl"),pe=i("div"),ye=i("dt"),ye.textContent="Employee Code",_e=g(),Se=i("dd"),je=j(we),Le=g(),W=i("div"),ce=i("dt"),ce.textContent="Department",Ze=g(),Ce=i("dd"),qe=j(Ie),We=g(),Ee=i("div"),ue=i("dt"),ue.textContent="Job Title",$e=g(),Re=i("dd"),X=j(be),oe=g(),se=i("div"),Ve=i("dt"),Ve.textContent="Branch",Yt=g(),wt=i("dd"),Ct=j(ut),Qt=g(),Ue=i("div"),Et=i("dt"),Et.textContent="Join Date",Jt=g(),St=i("dd"),Lt=j(ft),Xt=g(),xe=i("div"),At=i("dt"),At.textContent="Status",Gt=g(),Tt=i("dd"),et=i("span"),Mt=j(dt),zt=g(),Be=i("div"),jt=i("h3"),jt.textContent="Emergency Contact",Kt=g(),tt=i("dl"),Ye=i("div"),Dt=i("dt"),Dt.textContent="Contact Name",Zt=g(),It=i("dd"),Ot=j(_t),Wt=g(),lt=i("div"),Rt=i("dt"),Rt.textContent="Contact Phone",$t=g(),Pt=i("dd"),Nt=j(mt),u(J,"class","full-width"),u(a,"class","info-list"),u(t,"class","card profile-card"),u(Se,"class","mono"),u(et,"class",pt="status-badge "+(l[0].status==="ACTIVE"?"active":"inactive")),u(ie,"class","info-list"),u(Z,"class","card profile-card"),u(tt,"class","info-list"),u(Be,"class","card profile-card"),u(e,"class","profile-details-grid")},m(fe,me){q(fe,e,me),n(e,t),n(t,s),n(t,o),n(t,a),n(a,r),n(r,p),n(r,c),n(r,f),n(f,m),n(r,_),n(a,h),n(h,y),n(h,w),n(h,E),n(E,P),n(h,L),n(a,b),n(b,C),n(b,k),n(b,S),n(S,A),n(b,T),n(a,I),n(I,R),n(I,v),n(I,O),n(O,G),n(I,Y),n(a,J),n(J,U),n(J,Q),n(J,z),n(z,ne),n(e,ee),n(e,Z),n(Z,x),n(Z,te),n(Z,ie),n(ie,pe),n(pe,ye),n(pe,_e),n(pe,Se),n(Se,je),n(pe,Le),n(ie,W),n(W,ce),n(W,Ze),n(W,Ce),n(Ce,qe),n(W,We),n(ie,Ee),n(Ee,ue),n(Ee,$e),n(Ee,Re),n(Re,X),n(Ee,oe),n(ie,se),n(se,Ve),n(se,Yt),n(se,wt),n(wt,Ct),n(se,Qt),n(ie,Ue),n(Ue,Et),n(Ue,Jt),n(Ue,St),n(St,Lt),n(Ue,Xt),n(ie,xe),n(xe,At),n(xe,Gt),n(xe,Tt),n(Tt,et),n(et,Mt),n(e,zt),n(e,Be),n(Be,jt),n(Be,Kt),n(Be,tt),n(tt,Ye),n(Ye,Dt),n(Ye,Zt),n(Ye,It),n(It,Ot),n(Ye,Wt),n(tt,lt),n(lt,Rt),n(lt,$t),n(lt,Pt),n(Pt,Nt)},p(fe,me){me&1&&d!==(d=fe[0].email+"")&&H(m,d),me&1&&M!==(M=(fe[0].phone||"-")+"")&&H(P,M),me&1&&D!==(D=bt(fe[0].birth_date)+"")&&H(A,D),me&1&&F!==(F=fe[0].gender==="M"?"Male":fe[0].gender==="F"?"Female":"-")&&H(G,F),me&1&&$!==($=(fe[0].address||"-")+"")&&H(ne,$),me&1&&we!==(we=fe[0].employee_code+"")&&H(je,we),me&1&&Ie!==(Ie=(fe[0].department||"-")+"")&&H(qe,Ie),me&1&&be!==(be=(fe[0].job_title||"-")+"")&&H(X,be),me&1&&ut!==(ut=(fe[0].branch||"-")+"")&&H(Ct,ut),me&1&&ft!==(ft=bt(fe[0].join_date)+"")&&H(Lt,ft),me&1&&dt!==(dt=fe[0].status+"")&&H(Mt,dt),me&1&&pt!==(pt="status-badge "+(fe[0].status==="ACTIVE"?"active":"inactive"))&&u(et,"class",pt),me&1&&_t!==(_t=(fe[0].emergency_contact||"-")+"")&&H(Ot,_t),me&1&&mt!==(mt=(fe[0].emergency_phone||"-")+"")&&H(Nt,mt)},d(fe){fe&&N(e)}}}function Zn(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C,k,S,D,A,T,I,R,v,O,F,G,Y,J,U,Q,z,$,ne,ee,Z,x,te,ie,pe,ye,_e,Se=l[2]?"Saving...":"Save Changes",we,je,Le;return{c(){e=i("div"),t=i("h3"),t.textContent="Edit Profile",s=g(),o=i("div"),a=i("label"),r=i("span"),r.textContent="Full Name",p=g(),c=i("input"),f=g(),d=i("label"),m=i("span"),m.textContent="Phone",_=g(),h=i("input"),y=g(),w=i("label"),E=i("span"),E.textContent="Birth Date",M=g(),P=i("input"),L=g(),b=i("label"),C=i("span"),C.textContent="Gender",k=g(),S=i("select"),D=i("option"),D.textContent="Select...",A=i("option"),A.textContent="Male",T=i("option"),T.textContent="Female",I=g(),R=i("label"),v=i("span"),v.textContent="Address",O=g(),F=i("textarea"),G=g(),Y=i("label"),J=i("span"),J.textContent="Emergency Contact Name",U=g(),Q=i("input"),z=g(),$=i("label"),ne=i("span"),ne.textContent="Emergency Contact Phone",ee=g(),Z=i("input"),x=g(),te=i("div"),ie=i("button"),pe=j("Cancel"),ye=g(),_e=i("button"),we=j(Se),u(c,"type","text"),u(h,"type","tel"),u(h,"placeholder","+62..."),u(P,"type","date"),D.__value="",B(D,D.__value),A.__value="M",B(A,A.__value),T.__value="F",B(T,T.__value),l[5].gender===void 0&&He(()=>l[12].call(S)),u(F,"rows","2"),u(R,"class","full-width"),u(Q,"type","text"),u(Z,"type","tel"),u(o,"class","form-grid"),u(ie,"class","btn-secondary"),ie.disabled=l[2],u(_e,"class","btn-primary"),_e.disabled=l[2],u(te,"class","form-actions"),u(e,"class","profile-form card")},m(W,ce){q(W,e,ce),n(e,t),n(e,s),n(e,o),n(o,a),n(a,r),n(a,p),n(a,c),B(c,l[5].name),n(o,f),n(o,d),n(d,m),n(d,_),n(d,h),B(h,l[5].phone),n(o,y),n(o,w),n(w,E),n(w,M),n(w,P),B(P,l[5].birth_date),n(o,L),n(o,b),n(b,C),n(b,k),n(b,S),n(S,D),n(S,A),n(S,T),De(S,l[5].gender,!0),n(o,I),n(o,R),n(R,v),n(R,O),n(R,F),B(F,l[5].address),n(o,G),n(o,Y),n(Y,J),n(Y,U),n(Y,Q),B(Q,l[5].emergency_contact),n(o,z),n(o,$),n($,ne),n($,ee),n($,Z),B(Z,l[5].emergency_phone),n(e,x),n(e,te),n(te,ie),n(ie,pe),n(te,ye),n(te,_e),n(_e,we),je||(Le=[V(c,"input",l[9]),V(h,"input",l[10]),V(P,"input",l[11]),V(S,"change",l[12]),V(F,"input",l[13]),V(Q,"input",l[14]),V(Z,"input",l[15]),V(ie,"click",l[7]),V(_e,"click",l[8])],je=!0)},p(W,ce){ce&32&&c.value!==W[5].name&&B(c,W[5].name),ce&32&&B(h,W[5].phone),ce&32&&B(P,W[5].birth_date),ce&32&&De(S,W[5].gender),ce&32&&B(F,W[5].address),ce&32&&Q.value!==W[5].emergency_contact&&B(Q,W[5].emergency_contact),ce&32&&B(Z,W[5].emergency_phone),ce&4&&(ie.disabled=W[2]),ce&4&&Se!==(Se=W[2]?"Saving...":"Save Changes")&&H(we,Se),ce&4&&(_e.disabled=W[2])},d(W){W&&N(e),je=!1,re(Le)}}}function Wn(l){let e,t,s,o,a;t=new ct({props:{$$slots:{default:[Yn]},$$scope:{ctx:l}}});function r(f,d){if(f[1])return Xn;if(f[4])return Jn;if(f[0])return Qn}let p=r(l),c=p&&p(l);return{c(){e=i("div"),ke(t.$$.fragment),s=g(),o=i("div"),c&&c.c(),u(o,"class","page-content"),u(e,"class","page-wrapper")},m(f,d){q(f,e,d),ge(t,e,null),n(e,s),n(e,o),c&&c.m(o,null),a=!0},p(f,[d]){const m={};d&524288&&(m.$$scope={dirty:d,ctx:f}),t.$set(m),p===(p=r(f))&&c?c.p(f,d):(c&&c.d(1),c=p&&p(f),c&&(c.c(),c.m(o,null)))},i(f){a||(ae(t.$$.fragment,f),a=!0)},o(f){de(t.$$.fragment,f),a=!1},d(f){f&&N(e),ve(t),c&&c.d()}}}function bt(l){return l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-"}function $n(l,e,t){let s=null,o=!0,a=!1,r=!1,p="",c={name:"",phone:"",address:"",birth_date:"",gender:"",emergency_contact:"",emergency_phone:""};Oe.subscribe(C=>C),Ke(f);async function f(){t(1,o=!0),t(4,p="");try{const C=await fetch(`${le}/api/me`,{credentials:"include"});if(!C.ok)throw new Error("Failed to load profile");t(0,s=await C.json()),d()}catch(C){t(4,p=C.message||"Failed to load profile")}finally{t(1,o=!1)}}function d(){s&&t(5,c={name:s.name||"",phone:s.phone||"",address:s.address||"",birth_date:s.birth_date?s.birth_date.split("T")[0]:"",gender:s.gender||"",emergency_contact:s.emergency_contact||"",emergency_phone:s.emergency_phone||""})}function m(){d(),t(3,r=!0)}function _(){t(3,r=!1),d()}async function h(){t(2,a=!0),t(4,p="");try{const C=await fetch(`${le}/api/me`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!C.ok){const k=await C.json().catch(()=>({}));throw new Error(k.message||"Failed to save profile")}t(0,s=await C.json()),Oe.set(s),t(3,r=!1)}catch(C){t(4,p=C.message||"Failed to save profile")}finally{t(2,a=!1)}}function y(){c.name=this.value,t(5,c)}function w(){c.phone=this.value,t(5,c)}function E(){c.birth_date=this.value,t(5,c)}function M(){c.gender=yt(this),t(5,c)}function P(){c.address=this.value,t(5,c)}function L(){c.emergency_contact=this.value,t(5,c)}function b(){c.emergency_phone=this.value,t(5,c)}return[s,o,a,r,p,c,m,_,h,y,w,E,M,P,L,b]}class xn extends Me{constructor(e){super(),Te(this,e,$n,Wn,Ae,{})}}function _l(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C,k,S,D,A,T,I,R,v,O,F,G,Y,J,U,Q=l[5]?"Submitting‚Ä¶":"Submit",z,$,ne,ee=l[6]&&ml(l);return{c(){e=i("div"),t=i("div"),s=i("header"),s.innerHTML="<h2>New Request</h2>",o=g(),a=i("div"),r=i("div"),p=i("label"),c=j(`Type
                        `),f=i("select"),d=i("option"),d.textContent="Leave (Cuti)",m=i("option"),m.textContent="Overtime (Lembur)",_=i("option"),_.textContent="Permit (Izin)",h=i("option"),h.textContent="Exit Clearance",y=i("option"),y.textContent="Medical Claim",w=g(),E=i("div"),M=i("label"),P=j(`Start Date
                        `),L=i("input"),b=g(),C=i("label"),k=j(`End Date
                        `),S=i("input"),D=g(),A=i("div"),T=i("label"),I=j(`Reason
                        `),R=i("textarea"),v=g(),ee&&ee.c(),O=g(),F=i("footer"),G=i("button"),Y=j("Cancel"),J=g(),U=i("button"),z=j(Q),u(s,"class","modal-header"),d.__value="LEAVE",B(d,d.__value),m.__value="OVERTIME",B(m,m.__value),_.__value="PERMIT",B(_,_.__value),h.__value="EXIT_CLEARANCE",B(h,h.__value),y.__value="MEDICAL_CLAIM",B(y,y.__value),u(f,"class","form-control"),l[1]===void 0&&He(()=>l[10].call(f)),u(r,"class","form-row"),u(L,"type","date"),u(L,"class","form-control"),u(S,"type","date"),u(S,"class","form-control"),u(E,"class","form-row"),u(R,"rows","3"),u(R,"class","form-control"),u(A,"class","form-row"),u(a,"class","modal-body"),u(G,"type","button"),u(G,"class","btn"),G.disabled=l[5],u(U,"type","button"),u(U,"class","btn-primary"),U.disabled=l[5],u(F,"class","modal-footer"),u(t,"class","modal"),u(t,"role","dialog"),u(t,"aria-modal","true"),u(e,"class","modal-overlay")},m(Z,x){q(Z,e,x),n(e,t),n(t,s),n(t,o),n(t,a),n(a,r),n(r,p),n(p,c),n(p,f),n(f,d),n(f,m),n(f,_),n(f,h),n(f,y),De(f,l[1],!0),n(a,w),n(a,E),n(E,M),n(M,P),n(M,L),B(L,l[2]),n(E,b),n(E,C),n(C,k),n(C,S),B(S,l[3]),n(a,D),n(a,A),n(A,T),n(T,I),n(T,R),B(R,l[4]),n(a,v),ee&&ee.m(a,null),n(t,O),n(t,F),n(F,G),n(G,Y),n(F,J),n(F,U),n(U,z),$||(ne=[V(f,"change",l[10]),V(L,"input",l[11]),V(S,"input",l[12]),V(R,"input",l[13]),V(G,"click",l[8]),V(U,"click",l[7]),V(t,"click",Ql(l[9])),V(e,"click",l[8])],$=!0)},p(Z,x){x&2&&De(f,Z[1]),x&4&&B(L,Z[2]),x&8&&B(S,Z[3]),x&16&&B(R,Z[4]),Z[6]?ee?ee.p(Z,x):(ee=ml(Z),ee.c(),ee.m(a,null)):ee&&(ee.d(1),ee=null),x&32&&(G.disabled=Z[5]),x&32&&Q!==(Q=Z[5]?"Submitting‚Ä¶":"Submit")&&H(z,Q),x&32&&(U.disabled=Z[5])},d(Z){Z&&N(e),ee&&ee.d(),$=!1,re(ne)}}}function ml(l){let e,t;return{c(){e=i("div"),t=j(l[6]),u(e,"class","alert alert-error")},m(s,o){q(s,e,o),n(e,t)},p(s,o){o&64&&H(t,s[6])},d(s){s&&N(e)}}}function es(l){let e,t=l[0]&&_l(l);return{c(){t&&t.c(),e=ze()},m(s,o){t&&t.m(s,o),q(s,e,o)},p(s,[o]){s[0]?t?t.p(s,o):(t=_l(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:K,o:K,d(s){s&&N(e),t&&t.d(s)}}}function ts(l,e,t){let{isOpen:s=!1}=e,{type:o="LEAVE"}=e;const a=at();let r="",p="",c="",f=!1,d="";async function m(){if(!r||!p||!c){t(6,d="Please fill all fields");return}t(5,f=!0),t(6,d="");try{const L=await fetch(`${le}/api/requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:o,start_date:new Date(r+"T00:00:00Z").toISOString(),end_date:new Date(p+"T23:59:59Z").toISOString(),reason:c})});if(L.ok)a("created"),_();else{const b=await L.json();t(6,d=b.error||"Failed to submit request")}}catch{t(6,d="Network error")}finally{t(5,f=!1)}}function _(){t(1,o="LEAVE"),t(2,r=""),t(3,p=""),t(4,c=""),t(6,d="")}function h(){t(0,s=!1),_()}function y(L){Jl.call(this,l,L)}function w(){o=yt(this),t(1,o)}function E(){r=this.value,t(2,r)}function M(){p=this.value,t(3,p)}function P(){c=this.value,t(4,c)}return l.$$set=L=>{"isOpen"in L&&t(0,s=L.isOpen),"type"in L&&t(1,o=L.type)},[s,o,r,p,c,f,d,m,h,y,w,E,M,P]}class ls extends Me{constructor(e){super(),Te(this,e,ts,es,Ae,{isOpen:0,type:1})}}function hl(l,e,t){const s=l.slice();return s[26]=e[t],s}function ns(l){let e,t,s,o,a;return{c(){e=i("div"),t=i("h1"),s=j(l[5]),o=g(),a=i("p"),a.textContent="Manage leave and overtime requests"},m(r,p){q(r,e,p),n(e,t),n(t,s),n(e,o),n(e,a)},p(r,p){p&32&&H(s,r[5])},d(r){r&&N(e)}}}function bl(l){let e,t,s,o,a,r,p,c,f,d;return{c(){e=i("div"),t=i("button"),t.textContent="+ Request Leave",s=g(),o=i("button"),o.textContent="Overtime Request",a=g(),r=i("button"),r.textContent="Exit Clearance",p=g(),c=i("button"),c.textContent="Medical Claim",u(t,"class","action-btn primary svelte-jw6bs"),u(o,"class","action-btn svelte-jw6bs"),u(r,"class","action-btn svelte-jw6bs"),u(c,"class","action-btn svelte-jw6bs"),u(e,"class","actions svelte-jw6bs")},m(m,_){q(m,e,_),n(e,t),n(e,s),n(e,o),n(e,a),n(e,r),n(e,p),n(e,c),f||(d=[V(t,"click",l[13]),V(o,"click",l[14]),V(r,"click",l[15]),V(c,"click",l[16])],f=!0)},p:K,d(m){m&&N(e),f=!1,re(d)}}}function ss(l){let e;function t(a,r){return a[1].length===0?as:is}let s=t(l),o=s(l);return{c(){e=i("article"),o.c(),u(e,"class","card")},m(a,r){q(a,e,r),o.m(e,null)},p(a,r){s===(s=t(a))&&o?o.p(a,r):(o.d(1),o=s(a),o&&(o.c(),o.m(e,null)))},d(a){a&&N(e),o.d()}}}function os(l){let e;return{c(){e=i("div"),e.textContent="Loading...",u(e,"class","state muted svelte-jw6bs")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function is(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E=l[0]==="approvals"&&gl(),M=l[6]&&vl(),P=he(l[1]),L=[];for(let b=0;b<P.length;b+=1)L[b]=Cl(hl(l,P,b));return{c(){e=i("div"),t=i("table"),s=i("thead"),o=i("tr"),a=i("th"),a.textContent="Type",r=g(),p=i("th"),p.textContent="Dates",c=g(),f=i("th"),f.textContent="Reason",d=g(),E&&E.c(),m=g(),_=i("th"),_.textContent="Status",h=g(),M&&M.c(),y=g(),w=i("tbody");for(let b=0;b<L.length;b+=1)L[b].c();u(t,"class","employees-table"),u(e,"class","employees-table-wrapper")},m(b,C){q(b,e,C),n(e,t),n(t,s),n(s,o),n(o,a),n(o,r),n(o,p),n(o,c),n(o,f),n(o,d),E&&E.m(o,null),n(o,m),n(o,_),n(o,h),M&&M.m(o,null),n(t,y),n(t,w);for(let k=0;k<L.length;k+=1)L[k]&&L[k].m(w,null)},p(b,C){if(b[0]==="approvals"?E||(E=gl(),E.c(),E.m(o,m)):E&&(E.d(1),E=null),b[6]?M||(M=vl(),M.c(),M.m(o,null)):M&&(M.d(1),M=null),C&3267){P=he(b[1]);let k;for(k=0;k<P.length;k+=1){const S=hl(b,P,k);L[k]?L[k].p(S,C):(L[k]=Cl(S),L[k].c(),L[k].m(w,null))}for(;k<L.length;k+=1)L[k].d(1);L.length=P.length}},d(b){b&&N(e),E&&E.d(),M&&M.d(),Ne(L,b)}}}function as(l){let e;return{c(){e=i("div"),e.textContent="No requests found.",u(e,"class","state muted svelte-jw6bs")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function gl(l){let e;return{c(){e=i("th"),e.textContent="Requester"},m(t,s){q(t,e,s)},d(t){t&&N(e)}}}function vl(l){let e;return{c(){e=i("th"),e.textContent="Actions",u(e,"class","text-right")},m(t,s){q(t,e,s)},d(t){t&&N(e)}}}function kl(l){let e,t=(l[26].user_name||"Unknown")+"",s;return{c(){e=i("td"),s=j(t)},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&2&&t!==(t=(o[26].user_name||"Unknown")+"")&&H(s,t)},d(o){o&&N(e)}}}function yl(l){let e,t=l[26].status==="PENDING"&&wl(l);return{c(){e=i("td"),t&&t.c(),u(e,"class","text-right")},m(s,o){q(s,e,o),t&&t.m(e,null)},p(s,o){s[26].status==="PENDING"?t?t.p(s,o):(t=wl(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&N(e),t&&t.d()}}}function wl(l){let e,t,s,o,a;function r(){return l[19](l[26])}function p(){return l[20](l[26])}return{c(){e=i("button"),e.textContent="Approve",t=g(),s=i("button"),s.textContent="Reject",u(e,"class","btn"),u(s,"class","btn btn-danger")},m(c,f){q(c,e,f),q(c,t,f),q(c,s,f),o||(a=[V(e,"click",r),V(s,"click",p)],o=!0)},p(c,f){l=c},d(c){c&&(N(e),N(t),N(s)),o=!1,re(a)}}}function Cl(l){let e,t,s,o=l[26].type+"",a,r,p,c=new Date(l[26].start_date).toLocaleDateString()+"",f,d,m=new Date(l[26].end_date).toLocaleDateString()+"",_,h,y,w=l[26].reason+"",E,M,P,L,b,C,k=l[26].status+"",S,D,A,T,I=l[0]==="approvals"&&kl(l),R=l[6]&&yl(l);return{c(){e=i("tr"),t=i("td"),s=i("span"),a=j(o),r=g(),p=i("td"),f=j(c),d=j(` -
                                            `),_=j(m),h=g(),y=i("td"),E=j(w),P=g(),I&&I.c(),L=g(),b=i("td"),C=i("span"),S=j(k),A=g(),R&&R.c(),T=g(),u(s,"class","type-badge svelte-jw6bs"),u(y,"title",M=l[26].reason),u(C,"class",D="status-badge "+(l[7][l[26].status]||"")+" svelte-jw6bs")},m(v,O){q(v,e,O),n(e,t),n(t,s),n(s,a),n(e,r),n(e,p),n(p,f),n(p,d),n(p,_),n(e,h),n(e,y),n(y,E),n(e,P),I&&I.m(e,null),n(e,L),n(e,b),n(b,C),n(C,S),n(e,A),R&&R.m(e,null),n(e,T)},p(v,O){O&2&&o!==(o=v[26].type+"")&&H(a,o),O&2&&c!==(c=new Date(v[26].start_date).toLocaleDateString()+"")&&H(f,c),O&2&&m!==(m=new Date(v[26].end_date).toLocaleDateString()+"")&&H(_,m),O&2&&w!==(w=v[26].reason+"")&&H(E,w),O&2&&M!==(M=v[26].reason)&&u(y,"title",M),v[0]==="approvals"?I?I.p(v,O):(I=kl(v),I.c(),I.m(e,L)):I&&(I.d(1),I=null),O&2&&k!==(k=v[26].status+"")&&H(S,k),O&2&&D!==(D="status-badge "+(v[7][v[26].status]||"")+" svelte-jw6bs")&&u(C,"class",D),v[6]?R?R.p(v,O):(R=yl(v),R.c(),R.m(e,T)):R&&(R.d(1),R=null)},d(v){v&&N(e),I&&I.d(),R&&R.d()}}}function rs(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C;t=new ct({props:{$$slots:{default:[ns]},$$scope:{ctx:l}}});let k=l[0]==="my_requests"&&bl(l);function S(v,O){return v[4]?os:ss}let D=S(l),A=D(l);function T(v){l[21](v)}function I(v){l[22](v)}let R={};return l[2]!==void 0&&(R.isOpen=l[2]),l[3]!==void 0&&(R.type=l[3]),E=new ls({props:R}),vt.push(()=>ll(E,"isOpen",T)),vt.push(()=>ll(E,"type",I)),E.$on("created",l[9]),{c(){e=i("div"),ke(t.$$.fragment),s=g(),o=i("div"),k&&k.c(),a=g(),r=i("div"),p=i("button"),c=j("My Requests"),d=g(),m=i("button"),_=j("Approvals"),y=g(),A.c(),w=g(),ke(E.$$.fragment),u(p,"class",f="tab-button "+(l[0]==="my_requests"?"active":"")+" svelte-jw6bs"),u(m,"class",h="tab-button "+(l[0]==="approvals"?"active":"")+" svelte-jw6bs"),u(r,"class","tabs svelte-jw6bs"),u(o,"class","page-content"),u(e,"class","page-wrapper")},m(v,O){q(v,e,O),ge(t,e,null),n(e,s),n(e,o),k&&k.m(o,null),n(o,a),n(o,r),n(r,p),n(p,c),n(r,d),n(r,m),n(m,_),n(o,y),A.m(o,null),n(o,w),ge(E,o,null),L=!0,b||(C=[V(p,"click",l[17]),V(m,"click",l[18])],b=!0)},p(v,[O]){const F={};O&536870944&&(F.$$scope={dirty:O,ctx:v}),t.$set(F),v[0]==="my_requests"?k?k.p(v,O):(k=bl(v),k.c(),k.m(o,a)):k&&(k.d(1),k=null),(!L||O&1&&f!==(f="tab-button "+(v[0]==="my_requests"?"active":"")+" svelte-jw6bs"))&&u(p,"class",f),(!L||O&1&&h!==(h="tab-button "+(v[0]==="approvals"?"active":"")+" svelte-jw6bs"))&&u(m,"class",h),D===(D=S(v))&&A?A.p(v,O):(A.d(1),A=D(v),A&&(A.c(),A.m(o,w)));const G={};!M&&O&4&&(M=!0,G.isOpen=v[2],tl(()=>M=!1)),!P&&O&8&&(P=!0,G.type=v[3],tl(()=>P=!1)),E.$set(G)},i(v){L||(ae(t.$$.fragment,v),ae(E.$$.fragment,v),L=!0)},o(v){de(t.$$.fragment,v),de(E.$$.fragment,v),L=!1},d(v){v&&N(e),ve(t),k&&k.d(),A.d(),ve(E),b=!1,re(C)}}}function cs(l,e,t){let s,o,{page:a="MY_REQUESTS"}=e,r="my_requests",p=[],c=!1,f="LEAVE",d=!1,m={roles:[]};const _={PENDING:"status-pending",APPROVED:"status-approved",REJECTED:"status-rejected"};Ke(async()=>{await h()});async function h(){try{const v=await fetch(`${le}/api/me`,{credentials:"include"});v.ok&&(m=await v.json())}catch(v){console.error(v)}}async function y(){t(4,d=!0);const v=r==="my_requests"?`${le}/api/requests/my`:`${le}/api/requests/approvals`;try{const O=await fetch(v,{credentials:"include"});O.ok?t(1,p=await O.json()||[]):t(1,p=[])}catch(O){console.error(O),t(1,p=[])}finally{t(4,d=!1)}}function w(v){t(0,r=v)}function E(){t(2,c=!1),y()}async function M(v){if(confirm("Approve this request?"))try{(await fetch(`${le}/api/requests/${v}/approve`,{method:"POST",credentials:"include"})).ok&&y()}catch(O){console.error(O)}}async function P(v){const O=prompt("Reason for rejection:");if(O)try{(await fetch(`${le}/api/requests/${v}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:O})})).ok&&y()}catch(F){console.error(F)}}const L=()=>{t(3,f="LEAVE"),t(2,c=!0)},b=()=>{t(3,f="OVERTIME"),t(2,c=!0)},C=()=>{t(3,f="EXIT_CLEARANCE"),t(2,c=!0)},k=()=>{t(3,f="MEDICAL_CLAIM"),t(2,c=!0)},S=()=>w("my_requests"),D=()=>w("approvals"),A=v=>M(v.id),T=v=>P(v.id);function I(v){c=v,t(2,c),t(12,a)}function R(v){f=v,t(3,f),t(12,a)}return l.$$set=v=>{"page"in v&&t(12,a=v.page)},l.$$.update=()=>{l.$$.dirty&4096&&(a==="APPROVALS"?t(0,r="approvals"):t(0,r="my_requests"),a==="LEAVE_REQUEST"?(t(3,f="LEAVE"),t(2,c=!0)):a==="OVERTIME_REQ"&&(t(3,f="OVERTIME"),t(2,c=!0))),l.$$.dirty&1&&r&&typeof window<"u"&&y(),l.$$.dirty&1&&t(6,s=r==="approvals"),l.$$.dirty&1&&t(5,o=r==="approvals"?"Approvals":"Request History")},[r,p,c,f,d,o,s,_,w,E,M,P,a,L,b,C,k,S,D,A,T,I,R]}class us extends Me{constructor(e){super(),Te(this,e,cs,rs,Ae,{page:12})}}function El(l,e,t){const s=l.slice();return s[27]=e[t],s}function Sl(l,e,t){const s=l.slice();return s[30]=e[t],s}function fs(l){let e;return{c(){e=i("div"),e.innerHTML="<h1>Inbox</h1> <p>Internal messages and notifications.</p>"},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function ds(l){let e,t=he(l[0]),s=[];for(let o=0;o<t.length;o+=1)s[o]=Ll(Sl(l,t,o));return{c(){e=i("ul");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","message-list")},m(o,a){q(o,e,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(o,a){if(a[0]&261){t=he(o[0]);let r;for(r=0;r<t.length;r+=1){const p=Sl(o,t,r);s[r]?s[r].p(p,a):(s[r]=Ll(p),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(o){o&&N(e),Ne(s,o)}}}function ps(l){let e;return{c(){e=i("div"),e.innerHTML="<p>No messages yet.</p>",u(e,"class","empty-state")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function _s(l){let e;return{c(){e=i("div"),e.textContent="Loading...",u(e,"class","p-4 text-center muted")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function Ll(l){let e,t,s,o=l[30].sender_name+"",a,r,p,c=new Date(l[30].created_at).toLocaleDateString()+"",f,d,m,_=l[30].subject+"",h,y,w,E=l[30].body.substring(0,50)+"",M,P,L,b,C,k;function S(){return l[16](l[30])}function D(...A){return l[17](l[30],...A)}return{c(){var A;e=i("li"),t=i("div"),s=i("span"),a=j(o),r=g(),p=i("span"),f=j(c),d=g(),m=i("div"),h=j(_),y=g(),w=i("div"),M=j(E),P=j("..."),L=g(),u(s,"class","sender"),u(p,"class","date"),u(t,"class","msg-header"),u(m,"class","msg-subject"),u(w,"class","msg-preview"),u(e,"class",b="message-item "+(l[30].is_read?"read":"unread")+" "+(((A=l[2])==null?void 0:A.id)===l[30].id?"active":"")),u(e,"role","button"),u(e,"tabindex","0")},m(A,T){q(A,e,T),n(e,t),n(t,s),n(s,a),n(t,r),n(t,p),n(p,f),n(e,d),n(e,m),n(m,h),n(e,y),n(e,w),n(w,M),n(w,P),n(e,L),C||(k=[V(e,"click",S),V(e,"keydown",D)],C=!0)},p(A,T){var I;l=A,T[0]&1&&o!==(o=l[30].sender_name+"")&&H(a,o),T[0]&1&&c!==(c=new Date(l[30].created_at).toLocaleDateString()+"")&&H(f,c),T[0]&1&&_!==(_=l[30].subject+"")&&H(h,_),T[0]&1&&E!==(E=l[30].body.substring(0,50)+"")&&H(M,E),T[0]&5&&b!==(b="message-item "+(l[30].is_read?"read":"unread")+" "+(((I=l[2])==null?void 0:I.id)===l[30].id?"active":""))&&u(e,"class",b)},d(A){A&&N(e),C=!1,re(k)}}}function ms(l){let e;return{c(){e=i("div"),e.innerHTML="<p>Select a message to read</p>",u(e,"class","empty-detail")},m(t,s){q(t,e,s)},p:K,d(t){t&&N(e)}}}function hs(l){let e,t,s,o,a,r,p,c=l[2].subject+"",f,d,m,_,h,y=l[2].sender_name+"",w,E,M=jl(l[2].created_at)+"",P,L,b,C=l[2].body+"",k,S,D;return{c(){e=i("div"),t=i("div"),s=i("button"),s.textContent="‚Üê Back",o=g(),a=i("button"),a.textContent="üóëÔ∏è Delete",r=g(),p=i("h2"),f=j(c),d=g(),m=i("div"),_=j("From "),h=i("strong"),w=j(y),E=j(" on "),P=j(M),L=g(),b=i("div"),k=j(C),u(s,"class","back-btn mobile-only"),u(a,"class","btn-delete-msg"),u(a,"title","Delete Message"),u(t,"class","detail-top-row"),u(m,"class","meta"),u(e,"class","detail-header"),u(b,"class","detail-body")},m(A,T){q(A,e,T),n(e,t),n(t,s),n(t,o),n(t,a),n(e,r),n(e,p),n(p,f),n(e,d),n(e,m),n(m,_),n(m,h),n(h,w),n(m,E),n(m,P),q(A,L,T),q(A,b,T),n(b,k),S||(D=[V(s,"click",l[9]),V(a,"click",l[18])],S=!0)},p(A,T){T[0]&4&&c!==(c=A[2].subject+"")&&H(f,c),T[0]&4&&y!==(y=A[2].sender_name+"")&&H(w,y),T[0]&4&&M!==(M=jl(A[2].created_at)+"")&&H(P,M),T[0]&4&&C!==(C=A[2].body+"")&&H(k,C)},d(A){A&&(N(e),N(L),N(b)),S=!1,re(D)}}}function Al(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P,L,b,C,k,S,D,A,T,I,R,v=l[6]?"Sending...":"Send Message",O,F,G,Y=he(l[4]),J=[];for(let U=0;U<Y.length;U+=1)J[U]=Tl(El(l,Y,U));return{c(){e=i("div"),t=i("div"),s=i("div"),o=i("h2"),o.textContent="New Message",a=g(),r=i("button"),r.textContent="√ó",p=g(),c=i("div"),f=i("div"),d=i("label"),d.textContent="To",m=g(),_=i("select"),h=i("option"),h.textContent="Select Recipient...";for(let U=0;U<J.length;U+=1)J[U].c();y=g(),w=i("div"),E=i("label"),E.textContent="Subject",M=g(),P=i("input"),L=g(),b=i("div"),C=i("label"),C.textContent="Message",k=g(),S=i("textarea"),D=g(),A=i("div"),T=i("button"),T.textContent="Cancel",I=g(),R=i("button"),O=j(v),u(r,"class","close-btn"),u(s,"class","modal-header"),u(d,"for","recipient"),h.__value="",B(h,h.__value),u(_,"id","recipient"),l[5].receiver_id===void 0&&He(()=>l[19].call(_)),u(f,"class","form-group"),u(E,"for","subject"),u(P,"id","subject"),u(P,"type","text"),u(P,"placeholder","Subject..."),u(w,"class","form-group"),u(C,"for","message"),u(S,"id","message"),u(S,"rows","5"),u(S,"placeholder","Write your message..."),u(b,"class","form-group"),u(c,"class","modal-body"),u(T,"class","btn-secondary"),u(R,"class","btn-primary"),R.disabled=l[6],u(A,"class","modal-footer"),u(t,"class","modal-card"),u(e,"class","modal-backdrop")},m(U,Q){q(U,e,Q),n(e,t),n(t,s),n(s,o),n(s,a),n(s,r),n(t,p),n(t,c),n(c,f),n(f,d),n(f,m),n(f,_),n(_,h);for(let z=0;z<J.length;z+=1)J[z]&&J[z].m(_,null);De(_,l[5].receiver_id,!0),n(c,y),n(c,w),n(w,E),n(w,M),n(w,P),B(P,l[5].subject),n(c,L),n(c,b),n(b,C),n(b,k),n(b,S),B(S,l[5].body),n(t,D),n(t,A),n(A,T),n(A,I),n(A,R),n(R,O),F||(G=[V(r,"click",l[11]),V(_,"change",l[19]),V(P,"input",l[20]),V(S,"input",l[21]),V(T,"click",l[11]),V(R,"click",l[12])],F=!0)},p(U,Q){if(Q[0]&16){Y=he(U[4]);let z;for(z=0;z<Y.length;z+=1){const $=El(U,Y,z);J[z]?J[z].p($,Q):(J[z]=Tl($),J[z].c(),J[z].m(_,null))}for(;z<J.length;z+=1)J[z].d(1);J.length=Y.length}Q[0]&48&&De(_,U[5].receiver_id),Q[0]&48&&P.value!==U[5].subject&&B(P,U[5].subject),Q[0]&48&&B(S,U[5].body),Q[0]&64&&v!==(v=U[6]?"Sending...":"Send Message")&&H(O,v),Q[0]&64&&(R.disabled=U[6])},d(U){U&&N(e),Ne(J,U),F=!1,re(G)}}}function Tl(l){let e,t=l[27].name+"",s,o,a=l[27].email+"",r,p,c;return{c(){e=i("option"),s=j(t),o=j(" ("),r=j(a),p=j(")"),e.__value=c=l[27].id,B(e,e.__value)},m(f,d){q(f,e,d),n(e,s),n(e,o),n(e,r),n(e,p)},p(f,d){d[0]&16&&t!==(t=f[27].name+"")&&H(s,t),d[0]&16&&a!==(a=f[27].email+"")&&H(r,a),d[0]&16&&c!==(c=f[27].id)&&(e.__value=c,B(e,e.__value))},d(f){f&&N(e)}}}function Ml(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w;return{c(){e=i("div"),t=i("div"),s=i("div"),o=i("h2"),o.textContent="Confirm Delete",a=g(),r=i("button"),r.textContent="√ó",p=g(),c=i("div"),c.innerHTML='<p class="delete-confirm-text">Are you sure you want to permanently delete this message?</p>',f=g(),d=i("div"),m=i("button"),m.textContent="Cancel",_=g(),h=i("button"),h.textContent="Yes, Delete",u(r,"class","close-btn"),u(s,"class","modal-header"),u(c,"class","modal-body"),u(m,"class","btn-secondary"),u(h,"class","btn-delete-confirm"),u(d,"class","modal-footer"),u(t,"class","modal-card delete-modal"),u(e,"class","modal-backdrop")},m(E,M){q(E,e,M),n(e,t),n(t,s),n(s,o),n(s,a),n(s,r),n(t,p),n(t,c),n(t,f),n(t,d),n(d,m),n(d,_),n(d,h),y||(w=[V(r,"click",l[14]),V(m,"click",l[14]),V(h,"click",l[15])],y=!0)},p:K,d(E){E&&N(e),y=!1,re(w)}}}function bs(l){let e,t,s,o,a,r,p,c,f,d,m,_,h,y,w,E,M,P;t=new ct({props:{$$slots:{default:[fs]},$$scope:{ctx:l}}});function L(I,R){return I[1]?_s:I[0].length===0?ps:ds}let b=L(l),C=b(l);function k(I,R){return I[2]?hs:ms}let S=k(l),D=S(l),A=l[3]&&Al(l),T=l[7]&&Ml(l);return{c(){e=i("div"),ke(t.$$.fragment),s=g(),o=i("div"),a=i("div"),r=i("div"),p=i("button"),p.textContent="+ New Message",c=g(),C.c(),d=g(),m=i("div"),D.c(),h=g(),A&&A.c(),y=g(),T&&T.c(),w=ze(),u(p,"class","btn-primary full-width"),u(r,"class","inbox-toolbar"),u(a,"class",f="message-list-pane "+(l[2]?"hidden-mobile":"")),u(m,"class",_="message-detail-pane "+(l[2]?"visible-mobile":"")),u(o,"class","page-content inbox-layout"),u(e,"class","page-wrapper")},m(I,R){q(I,e,R),ge(t,e,null),n(e,s),n(e,o),n(o,a),n(a,r),n(r,p),n(a,c),C.m(a,null),n(o,d),n(o,m),D.m(m,null),q(I,h,R),A&&A.m(I,R),q(I,y,R),T&&T.m(I,R),q(I,w,R),E=!0,M||(P=V(p,"click",l[10]),M=!0)},p(I,R){const v={};R[1]&4&&(v.$$scope={dirty:R,ctx:I}),t.$set(v),b===(b=L(I))&&C?C.p(I,R):(C.d(1),C=b(I),C&&(C.c(),C.m(a,null))),(!E||R[0]&4&&f!==(f="message-list-pane "+(I[2]?"hidden-mobile":"")))&&u(a,"class",f),S===(S=k(I))&&D?D.p(I,R):(D.d(1),D=S(I),D&&(D.c(),D.m(m,null))),(!E||R[0]&4&&_!==(_="message-detail-pane "+(I[2]?"visible-mobile":"")))&&u(m,"class",_),I[3]?A?A.p(I,R):(A=Al(I),A.c(),A.m(y.parentNode,y)):A&&(A.d(1),A=null),I[7]?T?T.p(I,R):(T=Ml(I),T.c(),T.m(w.parentNode,w)):T&&(T.d(1),T=null)},i(I){E||(ae(t.$$.fragment,I),E=!0)},o(I){de(t.$$.fragment,I),E=!1},d(I){I&&(N(e),N(h),N(y),N(w)),ve(t),C.d(),D.d(),A&&A.d(I),T&&T.d(I),M=!1,P()}}}function jl(l){return new Date(l).toLocaleString()}function gs(l,e,t){let s=[],o=!0,a=null,r=!1,p=[],c={receiver_id:"",subject:"",body:""},f=!1;Ke(async()=>{await d(),m()});async function d(){t(1,o=!0);try{const v=await fetch(`${le}/api/inbox`,{credentials:"include"});if(v.ok){const O=await v.json();t(0,s=O||[])}}catch(v){console.error(v)}finally{t(1,o=!1)}}async function m(){try{const v=await fetch(`${le}/api/employees`,{credentials:"include"});if(v.ok){const O=await v.json();t(4,p=O.map(F=>({id:F.id,name:F.name,email:F.email})))}}catch(v){console.error("Failed to load recipients",v)}}function _(v){t(2,a=v),v.is_read||(h(v.id),t(0,s=s.map(O=>O.id===v.id?{...O,is_read:!0}:O)))}async function h(v){try{await fetch(`${le}/api/inbox/${v}/read`,{method:"PUT",credentials:"include"})}catch(O){console.error(O)}}function y(){t(2,a=null)}function w(){t(5,c={receiver_id:"",subject:"",body:""}),t(3,r=!0)}function E(){t(3,r=!1)}async function M(){if(!(!c.receiver_id||!c.subject||!c.body)){t(6,f=!0);try{(await fetch(`${le}/api/inbox`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({receiver_id:parseInt(c.receiver_id),subject:c.subject,body:c.body})})).ok?(E(),alert("Message sent!")):alert("Failed to send message")}catch(v){console.error(v),alert("Error sending message")}finally{t(6,f=!1)}}}let P=!1,L=null;function b(v){L=v,t(7,P=!0)}function C(){t(7,P=!1),L=null}async function k(){if(L)try{(await fetch(`${le}/api/inbox/${L}`,{method:"DELETE",credentials:"include"})).ok?(t(0,s=s.filter(O=>O.id!==L)),t(2,a=null),t(7,P=!1),L=null):console.error("Failed to delete message")}catch(v){console.error(v)}}const S=v=>_(v),D=(v,O)=>O.key==="Enter"&&_(v),A=()=>b(a.id);function T(){c.receiver_id=yt(this),t(5,c),t(4,p)}function I(){c.subject=this.value,t(5,c),t(4,p)}function R(){c.body=this.value,t(5,c),t(4,p)}return[s,o,a,r,p,c,f,P,_,y,w,E,M,b,C,k,S,D,A,T,I,R]}class vs extends Me{constructor(e){super(),Te(this,e,gs,bs,Ae,{},null,[-1,-1])}}function Dl(l,e,t){const s=l.slice();return s[19]=e[t],s}function Il(l,e,t){const s=l.slice();return s[22]=e[t],s}function Ol(l){let e,t,s,o=(l[3].name||"Employee")+"",a,r,p,c,f=(l[3].email||"")+"",d,m,_,h=l[3].roles&&l[3].roles.length>0&&Rl(l);return{c(){e=i("div"),t=i("p"),s=j("Hello, "),a=j(o),r=j("!"),p=g(),c=i("p"),d=j(f),m=g(),_=i("p"),h&&h.c(),u(t,"class","sidebar-user-hi"),u(c,"class","sidebar-user-email"),u(_,"class","sidebar-user-role"),u(e,"class","sidebar-user")},m(y,w){q(y,e,w),n(e,t),n(t,s),n(t,a),n(t,r),n(e,p),n(e,c),n(c,d),n(e,m),n(e,_),h&&h.m(_,null)},p(y,w){w&8&&o!==(o=(y[3].name||"Employee")+"")&&H(a,o),w&8&&f!==(f=(y[3].email||"")+"")&&H(d,f),y[3].roles&&y[3].roles.length>0?h?h.p(y,w):(h=Rl(y),h.c(),h.m(_,null)):h&&(h.d(1),h=null)},d(y){y&&N(e),h&&h.d()}}}function Rl(l){let e,t=l[3].roles[0]+"",s;return{c(){e=i("span"),s=j(t),u(e,"class","role-badge")},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&8&&t!==(t=o[3].roles[0]+"")&&H(s,t)},d(o){o&&N(e)}}}function ks(l){let e,t,s=l[7](l[19].icon)+"",o,a,r,p=l[19].name+"",c,f,d,m,_,h=l[19].code==="INBOX"&&l[4]>0&&Pl(l);function y(){return l[11](l[19])}return{c(){e=i("button"),t=i("span"),o=j(s),a=g(),r=i("span"),c=j(p),f=g(),h&&h.c(),d=g(),u(t,"class","nav-icon"),u(r,"class","nav-label"),u(e,"class","nav-item"),Pe(e,"nav-item-active",l[0].toLowerCase()===l[19].code.toLowerCase())},m(w,E){q(w,e,E),n(e,t),n(t,o),n(e,a),n(e,r),n(r,c),n(e,f),h&&h.m(e,null),n(e,d),m||(_=V(e,"click",y),m=!0)},p(w,E){l=w,E&2&&s!==(s=l[7](l[19].icon)+"")&&H(o,s),E&2&&p!==(p=l[19].name+"")&&H(c,p),l[19].code==="INBOX"&&l[4]>0?h?h.p(l,E):(h=Pl(l),h.c(),h.m(e,d)):h&&(h.d(1),h=null),E&3&&Pe(e,"nav-item-active",l[0].toLowerCase()===l[19].code.toLowerCase())},d(w){w&&N(e),h&&h.d(),m=!1,_()}}}function ys(l){let e,t,s,o=l[7](l[19].icon)+"",a,r,p,c=l[19].name+"",f,d,m,_=l[2][l[19].code]?"‚ñº":"‚ñ∂",h,y,w,E,M;function P(){return l[9](l[19])}let L=l[2][l[19].code]&&Nl(l);return{c(){e=i("div"),t=i("button"),s=i("span"),a=j(o),r=g(),p=i("span"),f=j(c),d=g(),m=i("span"),h=j(_),y=g(),L&&L.c(),w=g(),u(s,"class","nav-icon"),u(p,"class","nav-label"),u(m,"class","nav-arrow"),u(t,"class","nav-item nav-parent"),Pe(t,"expanded",l[2][l[19].code]),u(e,"class","nav-group")},m(b,C){q(b,e,C),n(e,t),n(t,s),n(s,a),n(t,r),n(t,p),n(p,f),n(t,d),n(t,m),n(m,h),n(e,y),L&&L.m(e,null),n(e,w),E||(M=V(t,"click",P),E=!0)},p(b,C){l=b,C&2&&o!==(o=l[7](l[19].icon)+"")&&H(a,o),C&2&&c!==(c=l[19].name+"")&&H(f,c),C&6&&_!==(_=l[2][l[19].code]?"‚ñº":"‚ñ∂")&&H(h,_),C&6&&Pe(t,"expanded",l[2][l[19].code]),l[2][l[19].code]?L?L.p(l,C):(L=Nl(l),L.c(),L.m(e,w)):L&&(L.d(1),L=null)},d(b){b&&N(e),L&&L.d(),E=!1,M()}}}function Pl(l){let e,t=(l[4]>99?"99+":l[4])+"",s;return{c(){e=i("span"),s=j(t),u(e,"class","nav-badge")},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&16&&t!==(t=(o[4]>99?"99+":o[4])+"")&&H(s,t)},d(o){o&&N(e)}}}function Nl(l){let e,t=he(l[19].children),s=[];for(let o=0;o<t.length;o+=1)s[o]=Fl(Il(l,t,o));return{c(){e=i("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","nav-children")},m(o,a){q(o,e,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(o,a){if(a&211){t=he(o[19].children);let r;for(r=0;r<t.length;r+=1){const p=Il(o,t,r);s[r]?s[r].p(p,a):(s[r]=Fl(p),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(o){o&&N(e),Ne(s,o)}}}function ql(l){let e,t=(l[4]>99?"99+":l[4])+"",s;return{c(){e=i("span"),s=j(t),u(e,"class","nav-badge")},m(o,a){q(o,e,a),n(e,s)},p(o,a){a&16&&t!==(t=(o[4]>99?"99+":o[4])+"")&&H(s,t)},d(o){o&&N(e)}}}function Fl(l){let e,t,s=l[7](l[22].icon)+"",o,a,r,p=l[22].name+"",c,f,d,m,_,h=l[22].code==="INBOX"&&l[4]>0&&ql(l);function y(){return l[10](l[22])}return{c(){e=i("button"),t=i("span"),o=j(s),a=g(),r=i("span"),c=j(p),f=g(),h&&h.c(),d=g(),u(t,"class","nav-icon"),u(r,"class","nav-label"),u(e,"class","nav-item nav-child"),Pe(e,"nav-item-active",l[0].toLowerCase()===l[22].code.toLowerCase())},m(w,E){q(w,e,E),n(e,t),n(t,o),n(e,a),n(e,r),n(r,c),n(e,f),h&&h.m(e,null),n(e,d),m||(_=V(e,"click",y),m=!0)},p(w,E){l=w,E&2&&s!==(s=l[7](l[22].icon)+"")&&H(o,s),E&2&&p!==(p=l[22].name+"")&&H(c,p),l[22].code==="INBOX"&&l[4]>0?h?h.p(l,E):(h=ql(l),h.c(),h.m(e,d)):h&&(h.d(1),h=null),E&3&&Pe(e,"nav-item-active",l[0].toLowerCase()===l[22].code.toLowerCase())},d(w){w&&N(e),h&&h.d(),m=!1,_()}}}function Hl(l){let e;function t(a,r){if(a[19].children&&a[19].children.length>0)return ys;if(a[19].path)return ks}let s=t(l),o=s&&s(l);return{c(){o&&o.c(),e=ze()},m(a,r){o&&o.m(a,r),q(a,e,r)},p(a,r){s===(s=t(a))&&o?o.p(a,r):(o&&o.d(1),o=s&&s(a),o&&(o.c(),o.m(e.parentNode,e)))},d(a){a&&N(e),o&&o.d(a)}}}function ws(l){let e,t,s,o,a,r,p,c=l[3]&&Ol(l),f=he(l[1]),d=[];for(let m=0;m<f.length;m+=1)d[m]=Hl(Dl(l,f,m));return{c(){e=i("aside"),t=i("div"),t.innerHTML='<div class="sidebar-logo"><span class="logo-dot"></span> <span class="logo-text">Mitrasoft-HR</span></div> <p class="sidebar-company">PT Mitrasoft</p>',s=g(),c&&c.c(),o=g(),a=i("nav");for(let m=0;m<d.length;m+=1)d[m].c();r=g(),p=i("div"),p.innerHTML='<p class="sidebar-footnote">v0.2 ‚Ä¢ Mitrasoft-HR</p>',u(t,"class","sidebar-header"),u(a,"class","sidebar-nav"),u(p,"class","sidebar-footer"),u(e,"class","sidebar")},m(m,_){q(m,e,_),n(e,t),n(e,s),c&&c.m(e,null),n(e,o),n(e,a);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(a,null);n(e,r),n(e,p)},p(m,[_]){if(m[3]?c?c.p(m,_):(c=Ol(m),c.c(),c.m(e,o)):c&&(c.d(1),c=null),_&247){f=he(m[1]);let h;for(h=0;h<f.length;h+=1){const y=Dl(m,f,h);d[h]?d[h].p(y,_):(d[h]=Hl(y),d[h].c(),d[h].m(a,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=f.length}},i:K,o:K,d(m){m&&N(e),c&&c.d(),Ne(d,m)}}}function Cs(l,e,t){const s=at();let{activePage:o="dashboard"}=e,a=[],r=[],p={},c=null,f=0;it.subscribe(b=>t(8,a=b)),kt.subscribe(b=>b),Oe.subscribe(b=>t(3,c=b));async function d(){try{const b=await fetch(`${le}/api/me/menus`,{credentials:"include"});if(b.ok){const C=await b.json();it.set(C||[])}}catch(b){console.error("Failed to load menus:",b)}}async function m(){try{const b=await fetch(`${le}/api/inbox`,{credentials:"include"});if(b.ok){const C=await b.json();Array.isArray(C)&&t(4,f=C.filter(k=>!k.is_read).length)}}catch(b){console.error("Failed to load unread count",b)}}let _;Ke(()=>{d(),m(),_=setInterval(m,3e4)}),on(()=>{_&&clearInterval(_)});function h(b){t(2,p[b]=!p[b],p),t(2,p)}function y(b,C){b&&(st.set(C),s("navigate",b),C==="INBOX"&&setTimeout(m,1e3))}const w={home:"üè†",user:"üë§",mail:"üìß",briefcase:"üíº",calendar:"üìÖ","log-out":"üö™","file-text":"üìÑ",clock:"‚è∞",list:"üìã",users:"üë•","check-circle":"‚úÖ",megaphone:"üì¢","bar-chart":"üìä",settings:"‚öôÔ∏è","user-plus":"‚ûï",shield:"üõ°Ô∏è"};function E(b){return w[b]||"üìÅ"}const M=b=>h(b.code),P=b=>y(b.path,b.code),L=b=>y(b.path,b.code);return l.$$set=b=>{"activePage"in b&&t(0,o=b.activePage)},l.$$.update=()=>{if(l.$$.dirty&256){const b=(a||[]).find(v=>v.code==="SELF_SERVICE"),C=(a||[]).find(v=>v.code==="REQUESTS"),k=(a||[]).filter(v=>v.code!=="REQUESTS"&&v.code!=="SELF_SERVICE"),S=Array.isArray(b==null?void 0:b.children)?b.children:[],D=Array.isArray(C==null?void 0:C.children)?C.children:[],A=new Map;for(const v of[...S,...D])A.set(v.code,v);const T=(D||[]).find(v=>v.code==="MY_REQUESTS")||{code:"MY_REQUESTS",name:"My Requests",icon:"list",path:"/requests/history"},I=b?{...b,children:[T]}:{code:"SELF_SERVICE",name:"Self-Service",icon:"briefcase",children:[T]},R=k.findIndex(v=>v.code==="EMPLOYEES");R>=0?t(1,r=[...k.slice(0,R+1),I,...k.slice(R+1)]):t(1,r=[...k,I])}},[o,r,p,c,f,h,y,E,a,M,P,L]}class Es extends Me{constructor(e){super(),Te(this,e,Cs,ws,Ae,{activePage:0})}}function Ss(l){let e,t,s,o,a,r,p,c;t=new Es({props:{activePage:l[1]}}),t.$on("logout",l[3]),t.$on("navigate",l[4]);const f=[Is,Ds,js,Ms,Ts,As],d=[];function m(_,h){return h&2&&(a=null),_[1]==="dashboard"||_[1]==="DASHBOARD"?0:_[1]==="employees"||_[1]==="EMPLOYEES"?1:_[1]==="MY_PROFILE"||_[1]==="profile"?2:_[1]==="inbox"||_[1]==="INBOX"?3:(a==null&&(a=!!["SELF_SERVICE","APPROVALS","MY_REQUESTS","LEAVE_REQUEST","RESIGN_REQUEST","OVERTIME_REQ","EXIT_CLEARANCE","MEDICAL_CLAIM_REQ","ASSESSMENT"].includes(_[1])),a?4:5)}return r=m(l,-1),p=d[r]=f[r](l),{c(){e=i("div"),ke(t.$$.fragment),s=g(),o=i("main"),p.c(),u(o,"class","app-main"),u(e,"class","app-layout")},m(_,h){q(_,e,h),ge(t,e,null),n(e,s),n(e,o),d[r].m(o,null),c=!0},p(_,h){const y={};h&2&&(y.activePage=_[1]),t.$set(y);let w=r;r=m(_,h),r===w?d[r].p(_,h):(Gl(),de(d[w],1,1,()=>{d[w]=null}),zl(),p=d[r],p?p.p(_,h):(p=d[r]=f[r](_),p.c()),ae(p,1),p.m(o,null))},i(_){c||(ae(t.$$.fragment,_),ae(p),c=!0)},o(_){de(t.$$.fragment,_),de(p),c=!1},d(_){_&&N(e),ve(t),d[r].d()}}}function Ls(l){let e,t;return e=new gn({}),e.$on("loggedIn",l[2]),{c(){ke(e.$$.fragment)},m(s,o){ge(e,s,o),t=!0},p:K,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function As(l){let e,t,s,o,a,r,p,c,f,d;return{c(){e=i("div"),t=i("h1"),t.textContent="üöß Coming Soon",s=g(),o=i("p"),a=j("Halaman "),r=i("strong"),p=j(l[1]),c=j(" sedang dalam pengembangan."),f=g(),d=i("p"),d.textContent="Fitur ini akan tersedia di update selanjutnya.",u(d,"class","muted"),u(e,"class","coming-soon")},m(m,_){q(m,e,_),n(e,t),n(e,s),n(e,o),n(o,a),n(o,r),n(r,p),n(o,c),n(e,f),n(e,d)},p(m,_){_&2&&H(p,m[1])},i:K,o:K,d(m){m&&N(e)}}}function Ts(l){let e,t;return e=new us({props:{page:l[1]}}),{c(){ke(e.$$.fragment)},m(s,o){ge(e,s,o),t=!0},p(s,o){const a={};o&2&&(a.page=s[1]),e.$set(a)},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function Ms(l){let e,t;return e=new vs({}),{c(){ke(e.$$.fragment)},m(s,o){ge(e,s,o),t=!0},p:K,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function js(l){let e,t;return e=new xn({}),{c(){ke(e.$$.fragment)},m(s,o){ge(e,s,o),t=!0},p:K,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function Ds(l){let e,t;return e=new Bn({props:{page:l[1]}}),{c(){ke(e.$$.fragment)},m(s,o){ge(e,s,o),t=!0},p(s,o){const a={};o&2&&(a.page=s[1]),e.$set(a)},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function Is(l){let e,t;return e=new An({}),{c(){ke(e.$$.fragment)},m(s,o){ge(e,s,o),t=!0},p:K,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function Os(l){let e,t,s,o;const a=[Ls,Ss],r=[];function p(c,f){return c[0]?1:0}return e=p(l),t=r[e]=a[e](l),{c(){t.c(),s=ze()},m(c,f){r[e].m(c,f),q(c,s,f),o=!0},p(c,[f]){let d=e;e=p(c),e===d?r[e].p(c,f):(Gl(),de(r[d],1,1,()=>{r[d]=null}),zl(),t=r[e],t?t.p(c,f):(t=r[e]=a[e](c),t.c()),ae(t,1),t.m(s.parentNode,s))},i(c){o||(ae(t),o=!0)},o(c){de(t),o=!1},d(c){c&&N(s),r[e].d(c)}}}function Rs(){const l=window.location.pathname;return l==="/"||l==="/dashboard"?"DASHBOARD":l==="/profile"?"MY_PROFILE":l==="/inbox"?"INBOX":l==="/employees"?"EMPLOYEES":l.length>1?l.replace(/^\//,"").replace(/\//g,"-").toUpperCase().replace("-","_"):"DASHBOARD"}function Ps(l,e,t){let s=null,o=Rs();Oe.subscribe(f=>t(0,s=f)),st.subscribe(f=>t(1,o=f));async function a(f){const d=f.detail;Oe.set(d),st.set("DASHBOARD"),await r()}async function r(){try{const f=await fetch(`${le}/api/me/permissions`,{credentials:"include"});if(f.ok){const m=await f.json();kt.set(m.permissions||[])}const d=await fetch(`${le}/api/me/menus`,{credentials:"include"});if(d.ok){const m=await d.json();it.set(m||[])}}catch(f){console.error("Failed to load user data:",f)}}function p(){Oe.set(null),it.set([]),kt.set([]),st.set("DASHBOARD")}function c(f){const d=f.detail;console.log("Navigating to:",d,"Current Page:",o)}return[s,o,a,p,c]}class Ns extends Me{constructor(e){super(),Te(this,e,Ps,Os,Ae,{})}}new Ns({target:document.getElementById("app")});
